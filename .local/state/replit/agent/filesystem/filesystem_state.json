{"file_contents":{"attached_assets/vf-limit-counter/vf-limit-counter/test_api.py":{"content":"#!/usr/bin/env python3\r\n\"\"\"\r\nAutomated test script for Credit Budget Monitor API\r\nTests all endpoints with multiple projects\r\n\"\"\"\r\n\r\nimport requests\r\nimport json\r\nimport time\r\n\r\nAPI_BASE = \"https://vf-limit-counter.onrender.com\"\r\nPROJECT_1 = \"68e56f7170abdf09f66dc756\"\r\nPROJECT_2 = \"project_test_2\"\r\nPROJECT_3 = \"project_test_3\"\r\n\r\ndef make_request(method, endpoint, data=None):\r\n    \"\"\"Make API request and return response\"\"\"\r\n    url = f\"{API_BASE}{endpoint}\"\r\n    headers = {\"Content-Type\": \"application/json\"}\r\n    \r\n    try:\r\n        if method == \"GET\":\r\n            response = requests.get(url, timeout=10)\r\n        elif method == \"POST\":\r\n            response = requests.post(url, json=data, headers=headers, timeout=10)\r\n        \r\n        print(f\"{method} {endpoint}\")\r\n        if data:\r\n            print(f\"Request: {json.dumps(data, indent=2)}\")\r\n        print(f\"Status: {response.status_code}\")\r\n        print(f\"Response: {json.dumps(response.json(), indent=2)}\")\r\n        print(\"-\" * 60)\r\n        return response.json()\r\n    \r\n    except requests.exceptions.RequestException as e:\r\n        print(f\"Error: {e}\")\r\n        return None\r\n\r\ndef test_all_endpoints():\r\n    \"\"\"Test all API endpoints\"\"\"\r\n    print(\"Testing Credit Budget Monitor API\")\r\n    print(\"=\" * 60)\r\n    \r\n    # Test 1: Health Check\r\n    print(\"\\n1. Health Check\")\r\n    make_request(\"GET\", \"/health\")\r\n    time.sleep(1)\r\n    \r\n    # Test 2: Set budgets for different projects\r\n    print(\"\\n2. Setting Budgets for Multiple Projects\")\r\n    make_request(\"POST\", \"/budget\", {\"project_id\": PROJECT_1, \"budget\": 10.0})\r\n    time.sleep(1)\r\n    make_request(\"POST\", \"/budget\", {\"project_id\": PROJECT_2, \"budget\": 50.0})\r\n    time.sleep(1)\r\n    make_request(\"POST\", \"/budget\", {\"project_id\": PROJECT_3, \"budget\": 5.0})\r\n    time.sleep(1)\r\n    \r\n    # Test 3: Add credits to projects (different amounts)\r\n    print(\"\\n3. Adding Credits to Projects\")\r\n    make_request(\"POST\", \"/credits\", {\"project_id\": PROJECT_1, \"credits\": 1000})  # $0.60\r\n    time.sleep(1)\r\n    make_request(\"POST\", \"/credits\", {\"project_id\": PROJECT_2, \"credits\": 50000})  # $30.00\r\n    time.sleep(1)\r\n    make_request(\"POST\", \"/credits\", {\"project_id\": PROJECT_3, \"credits\": 100000})  # $60.00 (over budget!)\r\n    time.sleep(1)\r\n    \r\n    # Test 4: Check budget status for each project\r\n    print(\"\\n4. Checking Budget Status\")\r\n    make_request(\"POST\", \"/check\", {\"project_id\": PROJECT_1})  # Should be false (under budget)\r\n    time.sleep(1)\r\n    make_request(\"POST\", \"/check\", {\"project_id\": PROJECT_2})  # Should be false (under budget)\r\n    time.sleep(1)\r\n    make_request(\"POST\", \"/check\", {\"project_id\": PROJECT_3})  # Should be true (over budget)\r\n    time.sleep(1)\r\n    \r\n    # Test 5: Get status for specific projects\r\n    print(\"\\n5. Getting Status for Specific Projects\")\r\n    make_request(\"GET\", f\"/status/{PROJECT_1}\")\r\n    time.sleep(1)\r\n    make_request(\"GET\", f\"/status/{PROJECT_2}\")\r\n    time.sleep(1)\r\n    make_request(\"GET\", f\"/status/{PROJECT_3}\")\r\n    time.sleep(1)\r\n    \r\n    # Test 6: Get status for all projects\r\n    print(\"\\n6. Getting Status for All Projects\")\r\n    make_request(\"GET\", \"/status\")\r\n    time.sleep(1)\r\n    \r\n    # Test 7: Add more credits and check again\r\n    print(\"\\n7. Adding More Credits and Re-checking\")\r\n    make_request(\"POST\", \"/credits\", {\"project_id\": PROJECT_1, \"credits\": 150000})  # Now over budget\r\n    time.sleep(1)\r\n    make_request(\"POST\", \"/check\", {\"project_id\": PROJECT_1})  # Should now be true\r\n    time.sleep(1)\r\n    \r\n    # Test 8: Check with credits in same request\r\n    print(\"\\n8. Check with Credits in Same Request\")\r\n    make_request(\"POST\", \"/check\", {\"project_id\": PROJECT_2, \"credits\": 20000})  # Add credits and check\r\n    time.sleep(1)\r\n    \r\n    # Test 9: Test error handling\r\n    print(\"\\n9. Testing Error Handling\")\r\n    make_request(\"POST\", \"/check\", {})  # Missing project_id\r\n    time.sleep(1)\r\n    make_request(\"POST\", \"/budget\", {\"budget\": 10.0})  # Missing project_id\r\n    time.sleep(1)\r\n    \r\n    # Test 10: Reset specific project\r\n    print(\"\\n10. Resetting Specific Project\")\r\n    make_request(\"POST\", f\"/reset/{PROJECT_3}\")\r\n    time.sleep(1)\r\n    make_request(\"GET\", f\"/status/{PROJECT_3}\")  # Should be reset\r\n    time.sleep(1)\r\n    \r\n    # Test 11: Final status check\r\n    print(\"\\n11. Final Status Check\")\r\n    make_request(\"GET\", \"/status\")\r\n    \r\n    print(\"\\nAll tests completed!\")\r\n    print(\"=\" * 60)\r\n\r\nif __name__ == \"__main__\":\r\n    test_all_endpoints()\r\n","size_bytes":4496},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"attached_assets/vf-transcripts-exporter/vf-transcripts-exporter/README.md":{"content":"## Voiceflow Transcripts to CSV\n\nExport all transcripts for a Voiceflow project to a CSV via the Analytics API.\n\n### Setup\n\n1. Python 3.9+ recommended\n2. Install dependencies:\n\n```\npip3 install -r requirements.txt\n```\n\n### Usage\n\nProvide your `projectID` and API key. API key can be passed via `--api-key` or the `VOICEFLOW_API_KEY` env var.\n\nFetch all transcripts (no date limits) and write to `transcripts.csv` in the current directory:\n\n```\nexport VOICEFLOW_API_KEY=\"VF.DM.XXXX.XXXX\"\npython3 fetch_transcripts_to_csv.py --project-id \"YOUR_PROJECT_ID\" --output transcripts.csv\n```\n\nOr pass the key inline:\n\n```\npython3 fetch_transcripts_to_csv.py --project-id \"YOUR_PROJECT_ID\" \\\n  --api-key \"VF.DM.XXXX.XXXX\" --output transcripts.csv\n```\n\nOptional flags:\n- `--environment-id`: filter by environment\n- `--order ASC|DESC`: sort order (default: `DESC`)\n- `--take 1..100`: page size (default: `100`)\n\nOutput CSV columns:\n- `id, sessionID, projectID, environmentID, createdAt, updatedAt, expiresAt, endedAt, recordingURL`\n- `properties_count, properties_json, evaluations_count, evaluations_json` (nested fields serialized as JSON)\n\nKeep your API key secret. Avoid committing it to source control.\n\nThis project is CLI-only. It generates `transcripts.csv` and `transcripts_messages.csv`.\n\n### Web UI (local)\n\nRun locally:\n\n```\nuvicorn app:app --host 0.0.0.0 --port 8000\n```\n\nOpen http://localhost:8000 and enter API key and project ID. The browser downloads `transcripts_messages.csv` containing all chats (user and AI).\n\n\n","size_bytes":1521},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"server/routes.ts":{"content":"import type { Express, Request, Response, NextFunction } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport multer from \"multer\";\nimport { insertKnowledgeBaseFileSchema, creditOperationSchema } from \"@shared/schema\";\n\nconst upload = multer({ storage: multer.memoryStorage() });\n\nconst VOICEFLOW_API_KEY = process.env.VOICEFLOW_API_KEY;\nconst VOICEFLOW_API_BASE = \"https://api.voiceflow.com/v2\";\n\n// Session type extension\ndeclare module 'express-session' {\n  interface SessionData {\n    projectId?: string;\n    vfApiKey?: string;\n    budget?: number;\n  }\n}\n\n// Authentication middleware\nfunction requireAuth(req: Request, res: Response, next: NextFunction) {\n  if (!req.session?.projectId) {\n    return res.status(401).json({ error: \"Authentication required\" });\n  }\n  next();\n}\n\n// Constants for credit/budget calculations\nconst CREDITS_PER_UNIT = 10000;\nconst COST_PER_UNIT = 60.0;\nconst RESET_DAYS = 30;\n\nfunction calculateCost(credits: number): number {\n  return (credits / CREDITS_PER_UNIT) * COST_PER_UNIT;\n}\n\nfunction checkAndResetIfNeeded(config: any): boolean {\n  const startDate = new Date(config.start_date);\n  const daysElapsed = Math.floor((Date.now() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n  \n  if (daysElapsed >= RESET_DAYS) {\n    config.credits_used = 0;\n    config.start_date = new Date().toISOString();\n    return true;\n  }\n  return false;\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Authentication APIs\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const { project_id, vf_api_key, budget } = req.body;\n      \n      if (!project_id) {\n        return res.status(400).json({ error: \"project_id required\" });\n      }\n\n      // Regenerate session to prevent session fixation\n      req.session.regenerate((err) => {\n        if (err) {\n          console.error(\"Session regeneration error:\", err);\n          return res.status(500).json({ error: \"Login failed\" });\n        }\n\n        // Store in session (server-side)\n        req.session.projectId = project_id;\n        req.session.vfApiKey = vf_api_key || VOICEFLOW_API_KEY;\n        req.session.budget = budget || 60;\n\n        // Save session before responding\n        req.session.save(async (saveErr) => {\n          if (saveErr) {\n            console.error(\"Session save error:\", saveErr);\n            return res.status(500).json({ error: \"Login failed\" });\n          }\n\n          try {\n            // Initialize or update project config\n            const config = await storage.getProjectConfig(project_id);\n            config.budget = budget || config.budget;\n            if (vf_api_key) {\n              config.vf_api_key = vf_api_key;\n            }\n            await storage.updateProjectConfig(config);\n\n            res.json({\n              success: true,\n              project_id,\n            });\n          } catch (error) {\n            console.error(\"Config update error:\", error);\n            res.status(500).json({ error: \"Login failed\" });\n          }\n        });\n      });\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      res.status(500).json({ error: \"Login failed\" });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        console.error(\"Logout error:\", err);\n        return res.status(500).json({ error: \"Logout failed\" });\n      }\n      res.json({ success: true });\n    });\n  });\n\n  app.get(\"/api/auth/session\", (req, res) => {\n    if (req.session?.projectId) {\n      res.json({\n        authenticated: true,\n        project_id: req.session.projectId,\n      });\n    } else {\n      res.json({ authenticated: false });\n    }\n  });\n\n  // Usage Stats API\n  app.get(\"/api/usage/stats\", requireAuth, async (req, res) => {\n    try {\n      // Mock data for now - will be replaced with real Voiceflow API calls\n      const usageStats = {\n        totalUsage: 15234,\n        creditsUsed: 7521,\n        activeConversations: 42,\n        filesInKB: await storage.getKnowledgeBaseFiles().then(files => files.length),\n        usageHistory: [\n          { date: new Date(Date.now() - 6 * 24 * 60 * 60 * 1000).toISOString(), totalRequests: 1200, successfulRequests: 1150, failedRequests: 50 },\n          { date: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(), totalRequests: 1450, successfulRequests: 1400, failedRequests: 50 },\n          { date: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(), totalRequests: 1800, successfulRequests: 1750, failedRequests: 50 },\n          { date: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(), totalRequests: 2100, successfulRequests: 2050, failedRequests: 50 },\n          { date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(), totalRequests: 2500, successfulRequests: 2450, failedRequests: 50 },\n          { date: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(), totalRequests: 3084, successfulRequests: 3000, failedRequests: 84 },\n          { date: new Date().toISOString(), totalRequests: 3100, successfulRequests: 3021, failedRequests: 79 },\n        ],\n      };\n      res.json(usageStats);\n    } catch (error) {\n      console.error(\"Error fetching usage stats:\", error);\n      res.status(500).json({ error: \"Failed to fetch usage stats\" });\n    }\n  });\n\n  // Knowledge Base APIs\n  app.get(\"/api/knowledge-base\", requireAuth, async (req, res) => {\n    try {\n      const files = await storage.getKnowledgeBaseFiles();\n      res.json(files);\n    } catch (error) {\n      console.error(\"Error fetching knowledge base files:\", error);\n      res.status(500).json({ error: \"Failed to fetch knowledge base files\" });\n    }\n  });\n\n  app.post(\"/api/knowledge-base/upload\", requireAuth, upload.single(\"file\"), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ error: \"No file provided\" });\n      }\n\n      const fileData = {\n        name: req.file.originalname,\n        size: req.file.size,\n      };\n\n      const validated = insertKnowledgeBaseFileSchema.parse(fileData);\n      const file = await storage.createKnowledgeBaseFile(validated);\n      \n      res.json(file);\n    } catch (error) {\n      console.error(\"Error uploading file:\", error);\n      res.status(500).json({ error: \"Failed to upload file\" });\n    }\n  });\n\n  app.delete(\"/api/knowledge-base/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deleteKnowledgeBaseFile(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"File not found\" });\n      }\n      \n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error deleting file:\", error);\n      res.status(500).json({ error: \"Failed to delete file\" });\n    }\n  });\n\n  // Transcripts APIs\n  app.get(\"/api/transcripts\", requireAuth, async (req, res) => {\n    try {\n      // Mock data for now - will be replaced with real Voiceflow API calls\n      const transcripts = [\n        {\n          id: \"transcript-1\",\n          startTime: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n          endTime: new Date(Date.now() - 1.5 * 60 * 60 * 1000).toISOString(),\n          messageCount: 8,\n          messages: [\n            { id: \"msg-1\", role: \"user\" as const, content: \"Hello, I need help with my order\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString() },\n            { id: \"msg-2\", role: \"assistant\" as const, content: \"Hello! I'd be happy to help you with your order. Could you please provide your order number?\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 5000).toISOString() },\n            { id: \"msg-3\", role: \"user\" as const, content: \"It's order #12345\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 15000).toISOString() },\n            { id: \"msg-4\", role: \"assistant\" as const, content: \"Thank you! Let me look that up for you.\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 20000).toISOString() },\n          ],\n        },\n        {\n          id: \"transcript-2\",\n          startTime: new Date(Date.now() - 5 * 60 * 60 * 1000).toISOString(),\n          endTime: new Date(Date.now() - 4.8 * 60 * 60 * 1000).toISOString(),\n          messageCount: 6,\n          messages: [\n            { id: \"msg-5\", role: \"user\" as const, content: \"What are your business hours?\", timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000).toISOString() },\n            { id: \"msg-6\", role: \"assistant\" as const, content: \"We're open Monday-Friday 9am-5pm EST. How else can I help you?\", timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000 + 3000).toISOString() },\n          ],\n        },\n        {\n          id: \"transcript-3\",\n          startTime: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n          endTime: new Date(Date.now() - 23.5 * 60 * 60 * 1000).toISOString(),\n          messageCount: 12,\n          messages: [\n            { id: \"msg-7\", role: \"user\" as const, content: \"I'd like to know more about your pricing\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString() },\n            { id: \"msg-8\", role: \"assistant\" as const, content: \"Of course! We have several pricing tiers available. Would you like me to explain each one?\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 4000).toISOString() },\n            { id: \"msg-9\", role: \"user\" as const, content: \"Yes please\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 10000).toISOString() },\n            { id: \"msg-10\", role: \"assistant\" as const, content: \"We have three plans: Basic ($9/month), Pro ($29/month), and Enterprise (custom pricing). Each tier includes different features and limits.\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 15000).toISOString() },\n          ],\n        },\n      ];\n      \n      res.json(transcripts);\n    } catch (error) {\n      console.error(\"Error fetching transcripts:\", error);\n      res.status(500).json({ error: \"Failed to fetch transcripts\" });\n    }\n  });\n\n  app.get(\"/api/transcripts/:id\", requireAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      // Mock data - in real implementation, fetch from Voiceflow API\n      const allTranscripts = [\n        {\n          id: \"transcript-1\",\n          startTime: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n          endTime: new Date(Date.now() - 1.5 * 60 * 60 * 1000).toISOString(),\n          messageCount: 8,\n          messages: [\n            { id: \"msg-1\", role: \"user\" as const, content: \"Hello, I need help with my order\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString() },\n            { id: \"msg-2\", role: \"assistant\" as const, content: \"Hello! I'd be happy to help you with your order. Could you please provide your order number?\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 5000).toISOString() },\n            { id: \"msg-3\", role: \"user\" as const, content: \"It's order #12345\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 15000).toISOString() },\n            { id: \"msg-4\", role: \"assistant\" as const, content: \"Thank you! Let me look that up for you.\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 20000).toISOString() },\n            { id: \"msg-5\", role: \"assistant\" as const, content: \"I found your order! It was shipped yesterday and should arrive in 2-3 business days.\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 30000).toISOString() },\n            { id: \"msg-6\", role: \"user\" as const, content: \"Great! Can I get the tracking number?\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 45000).toISOString() },\n            { id: \"msg-7\", role: \"assistant\" as const, content: \"Your tracking number is: TRK123456789\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 50000).toISOString() },\n            { id: \"msg-8\", role: \"user\" as const, content: \"Perfect, thank you!\", timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000 + 60000).toISOString() },\n          ],\n        },\n        {\n          id: \"transcript-2\",\n          startTime: new Date(Date.now() - 5 * 60 * 60 * 1000).toISOString(),\n          endTime: new Date(Date.now() - 4.8 * 60 * 60 * 1000).toISOString(),\n          messageCount: 6,\n          messages: [\n            { id: \"msg-9\", role: \"user\" as const, content: \"What are your business hours?\", timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000).toISOString() },\n            { id: \"msg-10\", role: \"assistant\" as const, content: \"We're open Monday-Friday 9am-5pm EST. How else can I help you?\", timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000 + 3000).toISOString() },\n            { id: \"msg-11\", role: \"user\" as const, content: \"Do you ship internationally?\", timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000 + 10000).toISOString() },\n            { id: \"msg-12\", role: \"assistant\" as const, content: \"Yes! We ship to most countries worldwide. Shipping costs vary by location.\", timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000 + 15000).toISOString() },\n            { id: \"msg-13\", role: \"user\" as const, content: \"How long does international shipping take?\", timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000 + 25000).toISOString() },\n            { id: \"msg-14\", role: \"assistant\" as const, content: \"International shipping typically takes 7-14 business days depending on the destination.\", timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000 + 30000).toISOString() },\n          ],\n        },\n        {\n          id: \"transcript-3\",\n          startTime: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n          endTime: new Date(Date.now() - 23.5 * 60 * 60 * 1000).toISOString(),\n          messageCount: 12,\n          messages: [\n            { id: \"msg-15\", role: \"user\" as const, content: \"I'd like to know more about your pricing\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString() },\n            { id: \"msg-16\", role: \"assistant\" as const, content: \"Of course! We have several pricing tiers available. Would you like me to explain each one?\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 4000).toISOString() },\n            { id: \"msg-17\", role: \"user\" as const, content: \"Yes please\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 10000).toISOString() },\n            { id: \"msg-18\", role: \"assistant\" as const, content: \"We have three plans: Basic ($9/month), Pro ($29/month), and Enterprise (custom pricing). Each tier includes different features and limits.\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 15000).toISOString() },\n            { id: \"msg-19\", role: \"user\" as const, content: \"What's included in the Pro plan?\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 30000).toISOString() },\n            { id: \"msg-20\", role: \"assistant\" as const, content: \"The Pro plan includes unlimited projects, advanced analytics, priority support, and API access.\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 35000).toISOString() },\n            { id: \"msg-21\", role: \"user\" as const, content: \"That sounds good. Is there a free trial?\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 50000).toISOString() },\n            { id: \"msg-22\", role: \"assistant\" as const, content: \"Yes! We offer a 14-day free trial for all plans. No credit card required.\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 55000).toISOString() },\n            { id: \"msg-23\", role: \"user\" as const, content: \"Perfect! How do I sign up?\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 65000).toISOString() },\n            { id: \"msg-24\", role: \"assistant\" as const, content: \"You can sign up at our website. Just click 'Start Free Trial' and follow the steps.\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 70000).toISOString() },\n            { id: \"msg-25\", role: \"user\" as const, content: \"Thanks for the help!\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 80000).toISOString() },\n            { id: \"msg-26\", role: \"assistant\" as const, content: \"You're welcome! Feel free to reach out if you have any other questions.\", timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000 + 85000).toISOString() },\n          ],\n        },\n      ];\n      \n      const transcript = allTranscripts.find(t => t.id === id);\n      \n      if (!transcript) {\n        return res.status(404).json({ error: \"Transcript not found\" });\n      }\n      \n      res.json(transcript);\n    } catch (error) {\n      console.error(\"Error fetching transcript:\", error);\n      res.status(500).json({ error: \"Failed to fetch transcript\" });\n    }\n  });\n\n  // Credit/Budget Management APIs\n  app.post(\"/api/budget/check\", requireAuth, async (req, res) => {\n    try {\n      // Use project_id from session only (prevent IDOR)\n      const projectId = req.session.projectId!;\n      const config = await storage.getProjectConfig(projectId);\n      const wasReset = checkAndResetIfNeeded(config);\n      \n      if (wasReset) {\n        await storage.updateProjectConfig(config);\n      }\n\n      const currentCost = calculateCost(config.credits_used);\n      const budgetInCredits = Math.floor((config.budget / COST_PER_UNIT) * CREDITS_PER_UNIT);\n      const creditsRemaining = budgetInCredits - config.credits_used;\n      const overBudget = currentCost > config.budget;\n      \n      const startDate = new Date(config.start_date);\n      const daysElapsed = Math.floor((Date.now() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n      const daysRemaining = RESET_DAYS - daysElapsed;\n\n      const status = overBudget ? \"usage_limit_reached\" : `${creditsRemaining}_credits_remain`;\n\n      const response = {\n        status,\n        over_budget: overBudget,\n        project_id: projectId,\n        budget: config.budget,\n        credits_used: config.credits_used,\n        current_cost: parseFloat(currentCost.toFixed(2)),\n        remaining: parseFloat((config.budget - currentCost).toFixed(2)),\n        credits_remaining: creditsRemaining,\n        days_remaining: Math.max(0, daysRemaining),\n        start_date: config.start_date,\n        reset: wasReset,\n        message: wasReset ? \"Period reset (30 days elapsed)\" : undefined,\n      };\n\n      res.json(response);\n    } catch (error) {\n      console.error(\"Error checking budget:\", error);\n      res.status(500).json({ error: \"Failed to check budget\" });\n    }\n  });\n\n  app.post(\"/api/budget/set\", requireAuth, async (req, res) => {\n    try {\n      const { budget, vf_api_key } = req.body;\n      \n      if (budget === undefined) {\n        return res.status(400).json({ error: \"budget required\" });\n      }\n\n      // Use project_id from session only (prevent IDOR)\n      const projectId = req.session.projectId!;\n      const config = await storage.getProjectConfig(projectId);\n      config.budget = parseFloat(budget);\n      \n      if (vf_api_key) {\n        config.vf_api_key = vf_api_key;\n      }\n\n      await storage.updateProjectConfig(config);\n\n      res.json({\n        message: \"Budget set successfully\",\n        project_id: projectId,\n        budget: config.budget,\n        has_vf_api_key: !!config.vf_api_key,\n      });\n    } catch (error) {\n      console.error(\"Error setting budget:\", error);\n      res.status(500).json({ error: \"Failed to set budget\" });\n    }\n  });\n\n  app.post(\"/api/credits/add\", requireAuth, async (req, res) => {\n    try {\n      const { credits } = req.body;\n      \n      if (credits === undefined) {\n        return res.status(400).json({ error: \"credits required\" });\n      }\n\n      // Use project_id from session only (prevent IDOR)\n      const projectId = req.session.projectId!;\n      const config = await storage.addCredits(projectId, credits);\n      const currentCost = calculateCost(config.credits_used);\n\n      res.json({\n        message: \"Credits added\",\n        project_id: config.project_id,\n        credits_used: config.credits_used,\n        current_cost: parseFloat(currentCost.toFixed(2)),\n      });\n    } catch (error) {\n      console.error(\"Error adding credits:\", error);\n      res.status(500).json({ error: \"Failed to add credits\" });\n    }\n  });\n\n  app.get(\"/api/budget/status/:projectId\", requireAuth, async (req, res) => {\n    try {\n      // Ignore URL param, use session projectId only (prevent IDOR)\n      const projectId = req.session.projectId!;\n      const config = await storage.getProjectConfig(projectId);\n      const currentCost = calculateCost(config.credits_used);\n      const overBudget = currentCost > config.budget;\n\n      res.json({\n        project_id: projectId,\n        budget: config.budget,\n        credits_used: config.credits_used,\n        current_cost: parseFloat(currentCost.toFixed(2)),\n        remaining: parseFloat((config.budget - currentCost).toFixed(2)),\n        over_budget: overBudget,\n        pricing: {\n          credits: CREDITS_PER_UNIT,\n          cost: COST_PER_UNIT,\n        },\n      });\n    } catch (error) {\n      console.error(\"Error fetching budget status:\", error);\n      res.status(500).json({ error: \"Failed to fetch budget status\" });\n    }\n  });\n\n  app.post(\"/api/budget/reset/:projectId\", requireAuth, async (req, res) => {\n    try {\n      // Ignore URL param, use session projectId only (prevent IDOR)\n      const projectId = req.session.projectId!;\n      await storage.resetProject(projectId);\n\n      res.json({\n        message: `Project ${projectId} reset successfully`,\n      });\n    } catch (error) {\n      console.error(\"Error resetting project:\", error);\n      res.status(500).json({ error: \"Failed to reset project\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":21526},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"attached_assets/vf-kb-exporter/vf-knowledge-base-exporter/README.md":{"content":"# Voiceflow Knowledge Base Manager\n\nA Python library for managing documents in your Voiceflow Knowledge Base. Upload, query, update, and delete documents with ease.\n\n## Features\n\n- üì§ **Upload Documents**: Support for PDF, TXT, DOCX, URLs, and tabular data\n- üîç **Query Knowledge Base**: Search and retrieve relevant information with optional filtering\n- ‚úèÔ∏è **Update Documents**: Replace existing documents with new versions\n- üóëÔ∏è **Delete Documents**: Remove documents from your knowledge base\n- üè∑Ô∏è **Metadata Support**: Organize documents with custom metadata fields\n- üìä **Table Support**: Upload structured data with customizable schemas\n\n## Installation\n\n1. Clone or download this repository\n2. Install dependencies:\n\n```bash\npip install -r requirements.txt\n```\n\n3. Test your connection:\n\n```bash\npython test_connection.py\n```\n\nThis will verify your API credentials and connection to Voiceflow.\n\n## Quick Start\n\n### Python Library\n\n```python\nfrom voiceflow_kb import VoiceflowKB\n\n# Initialize with your credentials\nkb = VoiceflowKB(\n    api_key=\"VF.DM.your-api-key\",\n    project_id=\"your-project-id\"\n)\n\n# Upload a document\nresult = kb.upload_document(\n    file_path=\"example.pdf\",\n    metadata={\"category\": \"documentation\"}\n)\n\n# Query the knowledge base\nanswer = kb.query(\n    question=\"What are your business hours?\",\n    chunkLimit=5\n)\nprint(answer['output'])\n```\n\n### Command Line Interface\n\n```bash\n# Query the knowledge base\npython kb_cli.py query \"What are your business hours?\"\n\n# Upload a file\npython kb_cli.py upload-file document.pdf --metadata '{\"category\": \"support\"}'\n\n# Upload a URL\npython kb_cli.py upload-url \"https://example.com/help\" --name \"Help Page\"\n\n# List all documents\npython kb_cli.py list\n\n# Get document details\npython kb_cli.py get <document-id>\n\n# Delete a document\npython kb_cli.py delete <document-id>\n```\n\n## Configuration\n\nYour credentials are configured in the example files:\n- **Project ID**: `66aeff0ea380c590e96e8e70`\n- **API Key**: `VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR`\n\n‚ö†Ô∏è **Security Note**: In production, store credentials in environment variables or a secure configuration file, not in your code.\n\n## API Methods\n\n### Upload Methods\n\n#### `upload_document(file_path, tags=None, metadata=None)`\nUpload a file (PDF, TXT, DOCX) to the knowledge base.\n\n```python\nresult = kb.upload_document(\n    file_path=\"documentation.pdf\",\n    metadata={\n        \"category\": \"user-guide\",\n        \"version\": \"1.0\"\n    }\n)\n```\n\n#### `upload_url(url, name=None, tags=None, metadata=None)`\nUpload a URL to the knowledge base.\n\n```python\nresult = kb.upload_url(\n    url=\"https://example.com/help\",\n    name=\"Help Center\",\n    metadata={\"source\": \"website\"}\n)\n```\n\n#### `upload_table(name, data, schema, tags=None, metadata=None)`\nUpload structured table data.\n\n```python\nschema = {\n    \"id\": {\"type\": \"number\", \"searchable\": True},\n    \"name\": {\"type\": \"string\", \"searchable\": True},\n    \"description\": {\"type\": \"string\", \"searchable\": True}\n}\n\ndata = [\n    {\"id\": 1, \"name\": \"Product A\", \"description\": \"Great product\"},\n    {\"id\": 2, \"name\": \"Product B\", \"description\": \"Better product\"}\n]\n\nresult = kb.upload_table(\n    name=\"Product Catalog\",\n    data=data,\n    schema=schema,\n    metadata={\"type\": \"catalog\"}\n)\n```\n\n### Query Methods\n\n#### `query(question, chunkLimit=5, synthesis=True, temperature=0.1, tags=None, metadata=None)`\nQuery the knowledge base for information.\n\n```python\n# Simple query\nresult = kb.query(\"What products do you offer?\")\n\n# Query with metadata filter\nresult = kb.query(\n    question=\"Show me documentation\",\n    chunkLimit=10,\n    metadata={\"$eq\": {\"category\": \"documentation\"}}\n)\n\nprint(result['output'])  # Synthesized answer\nprint(result['chunks'])  # Retrieved chunks\n```\n\n### Document Management\n\n#### `get_document(document_id)`\nRetrieve a document by its ID.\n\n```python\ndoc = kb.get_document(\"document-id-here\")\nprint(doc['data']['name'])\n```\n\n#### `update_document(document_id, file_path, tags=None, metadata=None)`\nReplace an existing document with a new version.\n\n```python\nresult = kb.update_document(\n    document_id=\"document-id-here\",\n    file_path=\"updated_file.pdf\",\n    metadata={\"version\": \"2.0\"}\n)\n```\n\n#### `delete_document(document_id)`\nDelete a document from the knowledge base.\n\n```python\nresult = kb.delete_document(\"document-id-here\")\n```\n\n#### `list_documents(limit=50, offset=0)`\nList all documents in the knowledge base.\n\n```python\ndocs = kb.list_documents(limit=20)\nfor doc in docs.get('data', []):\n    print(f\"{doc['name']} - {doc['documentID']}\")\n```\n\n## Examples\n\nSee `example_usage.py` for comprehensive examples of all features:\n\n```bash\npython example_usage.py\n```\n\nThe example file includes:\n- Uploading different document types\n- Querying with and without filters\n- Document CRUD operations\n- Table data uploads\n\n## Metadata vs Tags\n\n**Note**: Tags API was deprecated in July 2025. Use `metadata` instead for organizing and filtering documents.\n\n### Metadata Example\n\n```python\n# Upload with metadata\nkb.upload_document(\n    file_path=\"doc.pdf\",\n    metadata={\n        \"category\": \"support\",\n        \"department\": \"sales\",\n        \"priority\": \"high\"\n    }\n)\n\n# Query with metadata filter\nkb.query(\n    question=\"Find sales documents\",\n    metadata={\"$eq\": {\"department\": \"sales\"}}\n)\n```\n\n### Metadata Filter Operators\n\n- `$eq`: Equality filter `{\"$eq\": {\"category\": \"support\"}}`\n- `$ne`: Not equal `{\"$ne\": {\"status\": \"archived\"}}`\n- `$in`: In array `{\"$in\": {\"category\": [\"support\", \"sales\"]}}`\n- `$and`: Logical AND for multiple conditions\n- `$or`: Logical OR for multiple conditions\n\n## API Endpoints\n\nThis library uses the following Voiceflow API endpoints:\n\n- **Document Management**: `https://api.voiceflow.com/v1/knowledge-base/docs/*`\n- **Query**: `https://general-runtime.voiceflow.com/knowledge-base/query`\n\n## Error Handling\n\nThe library raises exceptions for API errors. Wrap calls in try-except blocks:\n\n```python\ntry:\n    result = kb.upload_document(\"file.pdf\")\nexcept FileNotFoundError:\n    print(\"File not found\")\nexcept requests.HTTPError as e:\n    print(f\"API error: {e}\")\n```\n\n## Supported File Types\n\n- **Documents**: PDF, TXT, DOCX\n- **URLs**: Any valid HTTP/HTTPS URL\n- **Tables**: JSON-formatted structured data\n\n## CLI Usage\n\nThe project includes a command-line interface (`kb_cli.py`) for easy management:\n\n### Available Commands\n\n```bash\n# Query\npython kb_cli.py query \"Your question here\" [--limit 5] [--format json]\n\n# Upload file\npython kb_cli.py upload-file path/to/file.pdf [--metadata '{\"key\": \"value\"}']\n\n# Upload URL\npython kb_cli.py upload-url \"https://example.com\" [--name \"Page Name\"]\n\n# Upload table\npython kb_cli.py upload-table \"Table Name\" --data-file data.json --schema-file schema.json\n\n# Get document\npython kb_cli.py get <document-id> [--format json]\n\n# Update document\npython kb_cli.py update <document-id> path/to/newfile.pdf\n\n# Delete document\npython kb_cli.py delete <document-id> [--confirm]\n\n# List documents\npython kb_cli.py list [--limit 50] [--offset 0]\n```\n\n### CLI Options\n\n- `--api-key`: Override default API key\n- `--project-id`: Override default project ID\n- `-v, --verbose`: Show detailed output\n- `--format`: Output format (text or json)\n\n### Example: Upload and Query\n\n```bash\n# Upload a document\npython kb_cli.py upload-file support_docs.pdf --metadata '{\"category\": \"support\", \"version\": \"1.0\"}'\n\n# Query with filter\npython kb_cli.py query \"How do I reset my password?\" --metadata '{\"$eq\": {\"category\": \"support\"}}'\n\n# View in JSON format\npython kb_cli.py query \"Store hours\" --format json\n```\n\n## Project Structure\n\n```\nvf-knowledge-base-exporter/\n‚îú‚îÄ‚îÄ voiceflow_kb.py          # Main library\n‚îú‚îÄ‚îÄ kb_cli.py                # Command-line interface\n‚îú‚îÄ‚îÄ example_usage.py         # Python usage examples\n‚îú‚îÄ‚îÄ test_connection.py       # Connection test script\n‚îú‚îÄ‚îÄ requirements.txt         # Dependencies\n‚îú‚îÄ‚îÄ config.example.json      # Configuration template\n‚îú‚îÄ‚îÄ .gitignore               # Git ignore rules\n‚îú‚îÄ‚îÄ README.md                # Full documentation (this file)\n‚îú‚îÄ‚îÄ QUICKSTART.md            # Quick start guide\n‚îî‚îÄ‚îÄ examples/                # Example files directory\n    ‚îú‚îÄ‚îÄ README.md            # Examples documentation\n    ‚îú‚îÄ‚îÄ table_data.example.json\n    ‚îî‚îÄ‚îÄ table_schema.example.json\n```\n\n## Requirements\n\n- Python 3.7+\n- requests library\n\n## Authentication\n\nAll requests require a Dialog Manager API Key from your Voiceflow project:\n\n1. Go to your Voiceflow project\n2. Navigate to **Settings** ‚Üí **Integration**\n3. Copy your API Key (starts with `VF.DM.`)\n\n## Contributing\n\nFeel free to submit issues, fork the repository, and create pull requests for any improvements.\n\n## License\n\nThis project is open source and available for use in your Voiceflow projects.\n\n## Resources\n\n- [Voiceflow Documentation](https://developer.voiceflow.com/)\n- [Knowledge Base API Reference](https://developer.voiceflow.com/reference/knowledge-base)\n- [Voiceflow Community](https://community.voiceflow.com/)\n\n## Support\n\nFor issues with:\n- **This library**: Open an issue in this repository\n- **Voiceflow API**: Visit [Voiceflow Support](https://help.voiceflow.com/)\n- **General Questions**: Join the [Voiceflow Discord](https://discord.gg/voiceflow)\n\n","size_bytes":9308},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"attached_assets/vf-limit-counter/vf-limit-counter/test_live_voiceflow.py":{"content":"#!/usr/bin/env python3\r\n\"\"\"\r\nLive test with actual Voiceflow credentials\r\n\"\"\"\r\n\r\nimport requests\r\nimport json\r\nimport time\r\n\r\nAPI_BASE = \"https://vf-limit-counter.onrender.com\"\r\nPROJECT_ID = \"66aeff0ea380c590e96e8e70\"\r\nVF_API_KEY = \"VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR\"\r\n\r\ndef test_voiceflow_live():\r\n    \"\"\"Test with live Voiceflow API\"\"\"\r\n    \r\n    print(\"=\" * 80)\r\n    print(\"TESTING VOICEFLOW INTEGRATION - LIVE\")\r\n    print(\"=\" * 80)\r\n    \r\n    # Test 1: Configure project\r\n    print(\"\\n1. Configuring project with budget and VF API key\")\r\n    print(\"-\" * 80)\r\n    response = requests.post(\r\n        f\"{API_BASE}/config\",\r\n        json={\r\n            \"project_id\": PROJECT_ID,\r\n            \"budget\": 10.0,\r\n            \"vf_api_key\": VF_API_KEY\r\n        },\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    print(f\"Status: {response.status_code}\")\r\n    print(f\"Response:\\n{json.dumps(response.json(), indent=2)}\")\r\n    time.sleep(2)\r\n    \r\n    # Test 2: Check budget (will fetch from Voiceflow)\r\n    print(\"\\n2. Checking budget (fetching live credits from Voiceflow)\")\r\n    print(\"-\" * 80)\r\n    response = requests.post(\r\n        f\"{API_BASE}/check\",\r\n        json={\"project_id\": PROJECT_ID},\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    print(f\"Status: {response.status_code}\")\r\n    result = response.json()\r\n    print(f\"Response:\\n{json.dumps(result, indent=2)}\")\r\n    \r\n    # Test 3: Get detailed status\r\n    print(\"\\n3. Getting detailed status\")\r\n    print(\"-\" * 80)\r\n    response = requests.get(f\"{API_BASE}/status/{PROJECT_ID}\")\r\n    print(f\"Status: {response.status_code}\")\r\n    print(f\"Response:\\n{json.dumps(response.json(), indent=2)}\")\r\n    \r\n    # Summary\r\n    print(\"\\n\" + \"=\" * 80)\r\n    print(\"SUMMARY\")\r\n    print(\"=\" * 80)\r\n    print(f\"Project ID:        {result.get('project_id')}\")\r\n    print(f\"Budget:            ${result.get('budget'):.2f}\")\r\n    print(f\"Credits Used:      {result.get('credits_used'):,}\")\r\n    print(f\"Current Cost:      ${result.get('current_cost'):.2f}\")\r\n    print(f\"Remaining Budget:  ${result.get('remaining'):.2f}\")\r\n    print(f\"Days Remaining:    {result.get('days_remaining')} / 30 days\")\r\n    print(f\"Start Date:        {result.get('start_date')}\")\r\n    print(f\"Over Budget:       {result.get('over_budget')}\")\r\n    print(\"=\" * 80)\r\n    \r\n    if result.get('over_budget'):\r\n        print(\"\\n‚ö†Ô∏è  WARNING: PROJECT IS OVER BUDGET!\")\r\n    else:\r\n        print(\"\\n‚úÖ Project is within budget\")\r\n\r\nif __name__ == \"__main__\":\r\n    test_voiceflow_live()\r\n\r\n","size_bytes":2554},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"attached_assets/vf-kb-exporter/vf-knowledge-base-exporter/test_connection.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nConnection Test Script\n\nThis script verifies that your Voiceflow Knowledge Base connection is working properly.\nRun this first to ensure everything is set up correctly.\n\"\"\"\n\nfrom voiceflow_kb import VoiceflowKB\nimport sys\n\n# Configuration\nAPI_KEY = \"VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR\"\nPROJECT_ID = \"68e56f7170abdf09f66dc756\"\n\ndef print_header(text):\n    \"\"\"Print a formatted header\"\"\"\n    print(\"\\n\" + \"=\"*60)\n    print(f\"  {text}\")\n    print(\"=\"*60)\n\ndef print_success(text):\n    \"\"\"Print success message\"\"\"\n    print(f\"‚úì {text}\")\n\ndef print_error(text):\n    \"\"\"Print error message\"\"\"\n    print(f\"‚úó {text}\", file=sys.stderr)\n\ndef print_info(text):\n    \"\"\"Print info message\"\"\"\n    print(f\"‚Ñπ {text}\")\n\ndef test_initialization():\n    \"\"\"Test 1: Initialize the KB manager\"\"\"\n    print_header(\"Test 1: Initialization\")\n    try:\n        kb = VoiceflowKB(API_KEY, PROJECT_ID)\n        print_success(\"VoiceflowKB initialized successfully\")\n        print_info(f\"Project ID: {PROJECT_ID}\")\n        print_info(f\"API Key: {API_KEY[:20]}...\")\n        return kb\n    except Exception as e:\n        print_error(f\"Failed to initialize: {e}\")\n        return None\n\ndef test_query(kb):\n    \"\"\"Test 2: Simple query\"\"\"\n    print_header(\"Test 2: Query Test\")\n    try:\n        result = kb.query(\n            question=\"Hello, testing connection\",\n            chunkLimit=1,\n            synthesis=False\n        )\n        print_success(\"Query executed successfully\")\n        \n        if result.get('chunks'):\n            print_info(f\"Found {len(result['chunks'])} chunk(s)\")\n            print_info(\"Your knowledge base has content!\")\n        else:\n            print_info(\"No chunks returned (knowledge base might be empty)\")\n        \n        return True\n    except Exception as e:\n        print_error(f\"Query failed: {e}\")\n        if \"401\" in str(e) or \"403\" in str(e):\n            print_info(\"Authentication error - check your API key\")\n        elif \"404\" in str(e):\n            print_info(\"Project not found - check your Project ID\")\n        else:\n            print_info(f\"Error details: {str(e)}\")\n        return False\n\ndef test_list_documents(kb):\n    \"\"\"Test 3: List documents (optional)\"\"\"\n    print_header(\"Test 3: List Documents\")\n    try:\n        result = kb.list_documents(limit=5)\n        docs = result.get('data', [])\n        print_success(f\"Successfully listed documents\")\n        \n        if docs:\n            print_info(f\"Found {len(docs)} document(s) in your knowledge base:\")\n            for doc in docs[:5]:\n                print(f\"    ‚Ä¢ {doc.get('name', 'Unnamed')} (Type: {doc.get('type', 'Unknown')})\")\n        else:\n            print_info(\"No documents found - your knowledge base is empty\")\n        \n        return True\n    except Exception as e:\n        print_info(\"List documents endpoint not available or returned error\")\n        print_info(f\"  (This is okay - not all endpoints may be accessible)\")\n        return True  # Don't fail the test for this\n\ndef run_all_tests():\n    \"\"\"Run all connection tests\"\"\"\n    print_header(\"Voiceflow Knowledge Base - Connection Test\")\n    print(\"This script will verify your connection to Voiceflow API\\n\")\n    \n    # Test 1: Initialize\n    kb = test_initialization()\n    if not kb:\n        print_error(\"\\nConnection test failed at initialization\")\n        return False\n    \n    # Test 2: Query\n    query_success = test_query(kb)\n    if not query_success:\n        print_error(\"\\nConnection test failed at query\")\n        return False\n    \n    # Test 3: List documents (optional)\n    test_list_documents(kb)\n    \n    # Summary\n    print_header(\"Test Summary\")\n    print_success(\"All critical tests passed!\")\n    print_info(\"Your Voiceflow Knowledge Base connection is working properly\")\n    print(\"\\nNext steps:\")\n    print(\"  1. Run: python kb_cli.py list\")\n    print(\"  2. Upload a document: python kb_cli.py upload-file document.pdf\")\n    print(\"  3. Query: python kb_cli.py query \\\"Your question\\\"\")\n    print(\"\\nFor more examples, see QUICKSTART.md\\n\")\n    \n    return True\n\nif __name__ == \"__main__\":\n    try:\n        success = run_all_tests()\n        sys.exit(0 if success else 1)\n    except KeyboardInterrupt:\n        print(\"\\n\\nTest interrupted by user\")\n        sys.exit(1)\n    except Exception as e:\n        print_error(f\"\\nUnexpected error: {e}\")\n        import traceback\n        traceback.print_exc()\n        sys.exit(1)\n\n","size_bytes":4419},"attached_assets/vf-limit-counter/vf-limit-counter/vf-usage-api-exporter/vf-usage-api-exporter/src/server.js":{"content":"/*\n  Minimal UI server (no external deps)\n\n  - Serves static files from ../public\n  - Provides GET /api/usage that proxies Voiceflow v2 usage API\n  - Accepts query params: metric, projectID, startTime, endTime, limit\n  - Paginates and returns consolidated items for charting\n\n  Env:\n    VF_API_KEY (required)\n    VF_PROJECT_ID (default project if not provided via query)\n*/\n\nimport http from \"http\";\nimport { readFileSync, existsSync, createReadStream } from \"fs\";\nimport { extname, join, resolve } from \"path\";\nimport { fileURLToPath } from \"url\";\nimport { URL } from \"url\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = resolve(__filename, \"..\");\nconst PUBLIC_DIR = resolve(__dirname, \"../public\");\n\nconst USAGE_ENDPOINT = \"https://analytics-api.voiceflow.com/v2/query/usage\";\n\nfunction getContentType(filePath) {\n  const ext = extname(filePath).toLowerCase();\n  switch (ext) {\n    case \".html\": return \"text/html; charset=utf-8\";\n    case \".js\": return \"application/javascript; charset=utf-8\";\n    case \".css\": return \"text/css; charset=utf-8\";\n    case \".json\": return \"application/json; charset=utf-8\";\n    case \".png\": return \"image/png\";\n    case \".jpg\":\n    case \".jpeg\": return \"image/jpeg\";\n    case \".svg\": return \"image/svg+xml\";\n    default: return \"application/octet-stream\";\n  }\n}\n\nfunction parseQuery(requestUrl) {\n  const url = new URL(requestUrl, \"http://localhost\");\n  const params = Object.fromEntries(url.searchParams.entries());\n  return params;\n}\n\nfunction toInt(value, fallback) {\n  const n = Number(value);\n  return Number.isFinite(n) ? n : fallback;\n}\n\nasync function postJson(url, body, headers) {\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      ...headers,\n    },\n    body: JSON.stringify(body),\n  });\n  const text = await response.text();\n  let json;\n  try {\n    json = text ? JSON.parse(text) : {};\n  } catch {\n    json = { raw: text };\n  }\n  if (!response.ok) {\n    const err = new Error(`HTTP ${response.status}`);\n    err.response = response;\n    err.body = json;\n    throw err;\n  }\n  return json;\n}\n\nfunction buildFilter({ projectId, limit, startTime, endTime, cursor }) {\n  const filter = { projectID: projectId, limit };\n  if (startTime) filter.startTime = startTime;\n  if (endTime) filter.endTime = endTime;\n  if (cursor != null) filter.cursor = cursor;\n  return filter;\n}\n\nasync function fetchUsageItems({ apiKey, projectId, metricName, limit, startTime, endTime }) {\n  const headers = { Authorization: apiKey };\n  let cursor = undefined;\n  const items = [];\n  const maxPages = 100;\n  for (let page = 0; page < maxPages; page++) {\n    const body = {\n      data: {\n        name: metricName,\n        filter: buildFilter({ projectId, limit, startTime, endTime, cursor }),\n      },\n    };\n    const json = await postJson(USAGE_ENDPOINT, body, headers);\n    const pageItems = json?.result?.items || [];\n    if (!Array.isArray(pageItems) || pageItems.length === 0) break;\n    items.push(...pageItems);\n    const nextCursor = json?.result?.cursor;\n    if (nextCursor == null) break;\n    cursor = nextCursor;\n  }\n  // Sort by period ascending\n  items.sort((a, b) => new Date(a.period) - new Date(b.period));\n  return items;\n}\n\nfunction sendJson(res, status, data) {\n  const body = JSON.stringify(data);\n  res.writeHead(status, {\n    \"Content-Type\": \"application/json; charset=utf-8\",\n    \"Content-Length\": Buffer.byteLength(body),\n  });\n  res.end(body);\n}\n\nasync function handleApiUsage(req, res, params) {\n  const apiKey = process.env.VF_API_KEY;\n  if (!apiKey) {\n    return sendJson(res, 500, { error: \"Missing VF_API_KEY env\" });\n  }\n  const projectId = params.projectID || process.env.VF_PROJECT_ID;\n  if (!projectId) {\n    return sendJson(res, 400, { error: \"projectID is required (query or VF_PROJECT_ID env)\" });\n  }\n  const metricName = (params.metric || \"credit_usage\").trim();\n  const limit = toInt(params.limit, 100);\n  const startTime = params.startTime;\n  const endTime = params.endTime;\n\n  try {\n    const items = await fetchUsageItems({ apiKey, projectId, metricName, limit, startTime, endTime });\n    return sendJson(res, 200, { projectId, metric: metricName, items });\n  } catch (err) {\n    return sendJson(res, 502, { error: err?.message || \"Upstream error\", details: err?.body });\n  }\n}\n\nfunction serveStatic(req, res, pathname) {\n  let filePath = pathname === \"/\" ? join(PUBLIC_DIR, \"index.html\") : join(PUBLIC_DIR, pathname);\n  // Prevent path traversal\n  filePath = resolve(filePath);\n  if (!filePath.startsWith(PUBLIC_DIR)) {\n    res.writeHead(403);\n    res.end(\"Forbidden\");\n    return;\n  }\n  if (!existsSync(filePath)) {\n    res.writeHead(404);\n    res.end(\"Not Found\");\n    return;\n  }\n  res.writeHead(200, { \"Content-Type\": getContentType(filePath) });\n  createReadStream(filePath).pipe(res);\n}\n\nconst server = http.createServer(async (req, res) => {\n  const url = new URL(req.url, \"http://localhost\");\n  const pathname = url.pathname;\n\n  if (req.method === \"GET\" && pathname === \"/api/usage\") {\n    const params = Object.fromEntries(url.searchParams.entries());\n    return handleApiUsage(req, res, params);\n  }\n\n  // Static assets\n  return serveStatic(req, res, pathname);\n});\n\nconst PORT = process.env.PORT ? Number(process.env.PORT) : 5000;\nserver.listen(PORT, () => {\n  console.log(`UI server listening on http://localhost:${PORT}`);\n});\n\n\n","size_bytes":5432},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport session from \"express-session\";\nimport createMemoryStore from \"memorystore\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n// Session configuration\nif (!process.env.SESSION_SECRET && process.env.NODE_ENV === \"production\") {\n  throw new Error(\"SESSION_SECRET environment variable is required in production\");\n}\n\nconst MemoryStore = createMemoryStore(session);\napp.use(\n  session({\n    secret: process.env.SESSION_SECRET || \"dev-only-secret-change-in-production\",\n    resave: false,\n    saveUninitialized: false,\n    store: new MemoryStore({\n      checkPeriod: 86400000, // prune expired entries every 24h\n    }),\n    cookie: {\n      secure: process.env.NODE_ENV === \"production\",\n      httpOnly: true,\n      sameSite: \"lax\",\n      maxAge: 24 * 60 * 60 * 1000, // 24 hours\n    },\n  })\n);\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"‚Ä¶\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2814},"client/src/pages/transcripts.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Transcript } from \"@shared/schema\";\nimport { Search, MessageSquare, Calendar } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function Transcripts() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedTranscript, setSelectedTranscript] = useState<string | null>(null);\n\n  const { data: transcripts, isLoading } = useQuery<Transcript[]>({\n    queryKey: [\"/api/transcripts\"],\n  });\n\n  const { data: selectedTranscriptData } = useQuery<Transcript>({\n    queryKey: [\"/api/transcripts\", selectedTranscript],\n    enabled: !!selectedTranscript,\n  });\n\n  const filteredTranscripts = transcripts?.filter((transcript) =>\n    transcript.id.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    transcript.messages.some(m => m.content.toLowerCase().includes(searchQuery.toLowerCase()))\n  );\n\n  if (isLoading) {\n    return (\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"max-w-7xl mx-auto px-6 py-8 md:px-8 md:py-12 space-y-8\">\n          <Skeleton className=\"h-8 w-48 mb-2\" />\n          <Skeleton className=\"h-96\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 overflow-auto\">\n      <div className=\"max-w-7xl mx-auto px-6 py-8 md:px-8 md:py-12 space-y-8\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-foreground mb-2\" data-testid=\"text-transcripts-title\">\n            Conversation Transcripts\n          </h1>\n          <p className=\"text-sm text-muted-foreground\">\n            View and search through chatbot conversation history\n          </p>\n        </div>\n\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search transcripts...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-10\"\n            data-testid=\"input-search-transcripts\"\n          />\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <Card className=\"lg:col-span-1\" data-testid=\"card-transcript-list\">\n            <CardHeader>\n              <CardTitle className=\"text-base font-semibold\">\n                Conversations ({filteredTranscripts?.length || 0})\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2 max-h-[600px] overflow-y-auto\">\n              {filteredTranscripts && filteredTranscripts.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center py-12\">\n                  <MessageSquare className=\"w-12 h-12 text-muted-foreground mb-4\" />\n                  <p className=\"text-sm text-muted-foreground text-center\">\n                    No transcripts found\n                  </p>\n                </div>\n              ) : (\n                filteredTranscripts?.map((transcript) => (\n                  <div\n                    key={transcript.id}\n                    className={`p-4 rounded-md border cursor-pointer hover-elevate ${\n                      selectedTranscript === transcript.id\n                        ? \"border-primary bg-accent\"\n                        : \"border-border\"\n                    }`}\n                    onClick={() => setSelectedTranscript(transcript.id)}\n                    data-testid={`transcript-item-${transcript.id}`}\n                  >\n                    <div className=\"flex items-start justify-between gap-2 mb-2\">\n                      <p className=\"text-sm font-medium text-foreground font-mono\">\n                        {transcript.id.slice(0, 8)}\n                      </p>\n                      <span className=\"text-xs text-muted-foreground\">\n                        {transcript.messageCount} msgs\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n                      <Calendar className=\"w-3 h-3\" />\n                      {new Date(transcript.startTime).toLocaleString()}\n                    </div>\n                  </div>\n                ))\n              )}\n            </CardContent>\n          </Card>\n\n          <Card className=\"lg:col-span-2\" data-testid=\"card-transcript-viewer\">\n            <CardHeader>\n              <CardTitle className=\"text-base font-semibold\">\n                {selectedTranscriptData ? \"Conversation Details\" : \"Select a Conversation\"}\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {selectedTranscriptData ? (\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center gap-4 text-xs text-muted-foreground pb-4 border-b border-border\">\n                    <div>\n                      <span className=\"font-medium\">Started:</span>{\" \"}\n                      {new Date(selectedTranscriptData.startTime).toLocaleString()}\n                    </div>\n                    {selectedTranscriptData.endTime && (\n                      <div>\n                        <span className=\"font-medium\">Ended:</span>{\" \"}\n                        {new Date(selectedTranscriptData.endTime).toLocaleString()}\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"space-y-3 max-h-[500px] overflow-y-auto\">\n                    {selectedTranscriptData.messages.map((message) => (\n                      <div\n                        key={message.id}\n                        className={`flex ${message.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n                        data-testid={`message-${message.id}`}\n                      >\n                        <div\n                          className={`max-w-[80%] rounded-lg p-4 ${\n                            message.role === \"user\"\n                              ? \"bg-primary text-primary-foreground\"\n                              : \"bg-muted text-foreground\"\n                          }`}\n                        >\n                          <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n                          <p className=\"text-xs mt-2 opacity-70\">\n                            {new Date(message.timestamp).toLocaleTimeString()}\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex flex-col items-center justify-center py-16\">\n                  <MessageSquare className=\"w-16 h-16 text-muted-foreground mb-4\" />\n                  <p className=\"text-sm text-muted-foreground text-center\">\n                    Select a conversation from the list to view its details\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":7154},"attached_assets/vf-kb-exporter/vf-knowledge-base-exporter/example_usage.py":{"content":"\"\"\"\nExample usage script for Voiceflow Knowledge Base Manager\n\nThis script demonstrates how to use the VoiceflowKB class to:\n- Upload documents (files, URLs, tables)\n- Query the knowledge base\n- Update and delete documents\n\"\"\"\n\nfrom voiceflow_kb import VoiceflowKB\n\n# Initialize the KB manager with your credentials\nAPI_KEY = \"VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR\"\nPROJECT_ID = \"66aeff0ea380c590e96e8e70\"\n\nkb = VoiceflowKB(API_KEY, PROJECT_ID)\n\n\ndef example_upload_file():\n    \"\"\"Example: Upload a PDF, TXT, or DOCX file\"\"\"\n    print(\"\\n=== Uploading a file ===\")\n    \n    # Upload with metadata (recommended over deprecated tags)\n    result = kb.upload_document(\n        file_path=\"example.pdf\",\n        metadata={\n            \"category\": \"documentation\",\n            \"department\": \"support\",\n            \"version\": \"1.0\"\n        }\n    )\n    \n    print(f\"Document uploaded successfully!\")\n    print(f\"Document ID: {result.get('data', {}).get('documentID')}\")\n    return result\n\n\ndef example_upload_url():\n    \"\"\"Example: Upload a URL\"\"\"\n    print(\"\\n=== Uploading a URL ===\")\n    \n    result = kb.upload_url(\n        url=\"https://www.example.com/help\",\n        name=\"Example Help Page\",\n        metadata={\n            \"type\": \"external\",\n            \"source\": \"website\"\n        }\n    )\n    \n    print(f\"URL uploaded successfully!\")\n    print(f\"Document ID: {result.get('data', {}).get('documentID')}\")\n    return result\n\n\ndef example_upload_table():\n    \"\"\"Example: Upload table data\"\"\"\n    print(\"\\n=== Uploading table data ===\")\n    \n    # Define the schema\n    schema = {\n        \"product_id\": {\"type\": \"number\", \"searchable\": True},\n        \"name\": {\"type\": \"string\", \"searchable\": True},\n        \"price\": {\"type\": \"number\", \"searchable\": True},\n        \"description\": {\"type\": \"string\", \"searchable\": True},\n        \"categories\": {\"type\": \"array\", \"searchable\": False}\n    }\n    \n    # Define the data\n    data = [\n        {\n            \"product_id\": 1,\n            \"name\": \"Widget A\",\n            \"price\": 29.99,\n            \"description\": \"High-quality widget for everyday use\",\n            \"categories\": [\"hardware\", \"tools\"]\n        },\n        {\n            \"product_id\": 2,\n            \"name\": \"Widget B\",\n            \"price\": 49.99,\n            \"description\": \"Premium widget with advanced features\",\n            \"categories\": [\"hardware\", \"premium\"]\n        },\n        {\n            \"product_id\": 3,\n            \"name\": \"Service Plan\",\n            \"price\": 99.99,\n            \"description\": \"Annual maintenance service\",\n            \"categories\": [\"services\"]\n        }\n    ]\n    \n    result = kb.upload_table(\n        name=\"Product Catalog\",\n        data=data,\n        schema=schema,\n        metadata={\n            \"type\": \"catalog\",\n            \"last_updated\": \"2025-10-14\"\n        }\n    )\n    \n    print(f\"Table uploaded successfully!\")\n    print(f\"Document ID: {result.get('data', {}).get('documentID')}\")\n    return result\n\n\ndef example_query():\n    \"\"\"Example: Query the knowledge base\"\"\"\n    print(\"\\n=== Querying the knowledge base ===\")\n    \n    # Simple query\n    result = kb.query(\n        question=\"What products do you offer?\",\n        chunkLimit=3,\n        synthesis=True\n    )\n    \n    print(f\"Query: 'What products do you offer?'\")\n    if result.get('output'):\n        print(f\"\\nSynthesized Answer: {result['output']}\")\n    \n    if result.get('chunks'):\n        print(f\"\\nFound {len(result['chunks'])} relevant chunks:\")\n        for i, chunk in enumerate(result['chunks'], 1):\n            print(f\"\\n  Chunk {i}:\")\n            print(f\"    Score: {chunk.get('score')}\")\n            print(f\"    Content: {chunk.get('content')[:100]}...\")\n    \n    return result\n\n\ndef example_query_with_filters():\n    \"\"\"Example: Query with metadata filters\"\"\"\n    print(\"\\n=== Querying with metadata filters ===\")\n    \n    # Query with metadata filter\n    result = kb.query(\n        question=\"Show me documentation\",\n        chunkLimit=5,\n        metadata={\n            \"$eq\": {\"category\": \"documentation\"}\n        }\n    )\n    \n    print(f\"Query with filter: category='documentation'\")\n    print(f\"Found {len(result.get('chunks', []))} chunks\")\n    return result\n\n\ndef example_get_document(document_id: str):\n    \"\"\"Example: Retrieve a document by ID\"\"\"\n    print(f\"\\n=== Getting document {document_id} ===\")\n    \n    result = kb.get_document(document_id)\n    print(f\"Document retrieved:\")\n    print(f\"  Name: {result.get('data', {}).get('name')}\")\n    print(f\"  Type: {result.get('data', {}).get('type')}\")\n    return result\n\n\ndef example_update_document(document_id: str):\n    \"\"\"Example: Update an existing document\"\"\"\n    print(f\"\\n=== Updating document {document_id} ===\")\n    \n    result = kb.update_document(\n        document_id=document_id,\n        file_path=\"updated_example.pdf\",\n        metadata={\n            \"category\": \"documentation\",\n            \"version\": \"2.0\",\n            \"updated\": \"2025-10-14\"\n        }\n    )\n    \n    print(f\"Document updated successfully!\")\n    return result\n\n\ndef example_delete_document(document_id: str):\n    \"\"\"Example: Delete a document\"\"\"\n    print(f\"\\n=== Deleting document {document_id} ===\")\n    \n    result = kb.delete_document(document_id)\n    print(f\"Document deleted successfully!\")\n    return result\n\n\ndef example_list_documents():\n    \"\"\"Example: List all documents\"\"\"\n    print(\"\\n=== Listing documents ===\")\n    \n    try:\n        result = kb.list_documents(limit=10, offset=0)\n        print(f\"Found documents:\")\n        for doc in result.get('data', []):\n            print(f\"  - {doc.get('name')} (ID: {doc.get('documentID')})\")\n        return result\n    except Exception as e:\n        print(f\"Note: list_documents may not be available in API: {e}\")\n        return None\n\n\nif __name__ == \"__main__\":\n    print(\"=\" * 60)\n    print(\"Voiceflow Knowledge Base Manager - Example Usage\")\n    print(\"=\" * 60)\n    \n    # Uncomment the examples you want to run:\n    \n    # 1. Upload examples\n    # example_upload_file()  # Requires example.pdf file\n    # example_upload_url()\n    # example_upload_table()\n    \n    # 2. Query examples\n    # example_query()\n    # example_query_with_filters()\n    \n    # 3. Document management examples\n    # Replace 'YOUR_DOCUMENT_ID' with actual document ID\n    # example_get_document('YOUR_DOCUMENT_ID')\n    # example_update_document('YOUR_DOCUMENT_ID')  # Requires updated_example.pdf\n    # example_delete_document('YOUR_DOCUMENT_ID')\n    \n    # 4. List documents\n    # example_list_documents()\n    \n    print(\"\\n\" + \"=\" * 60)\n    print(\"Examples completed!\")\n    print(\"=\" * 60)\n    print(\"\\nTo run specific examples, uncomment them in the __main__ section\")\n\n","size_bytes":6665},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"shared/schema.ts":{"content":"import { z } from \"zod\";\n\n// Usage Data Types\nexport const usageDataSchema = z.object({\n  date: z.string(),\n  totalRequests: z.number(),\n  successfulRequests: z.number(),\n  failedRequests: z.number(),\n});\n\nexport const usageStatsSchema = z.object({\n  totalUsage: z.number(),\n  creditsUsed: z.number(),\n  activeConversations: z.number(),\n  filesInKB: z.number(),\n  usageHistory: z.array(usageDataSchema),\n});\n\nexport type UsageData = z.infer<typeof usageDataSchema>;\nexport type UsageStats = z.infer<typeof usageStatsSchema>;\n\n// Credit Limit Types\nexport const creditLimitSchema = z.object({\n  current: z.number(),\n  limit: z.number(),\n  percentage: z.number(),\n  status: z.enum([\"safe\", \"warning\", \"danger\"]),\n});\n\nexport type CreditLimit = z.infer<typeof creditLimitSchema>;\n\n// Knowledge Base Types\nexport const knowledgeBaseFileSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  size: z.number(),\n  uploadedAt: z.string(),\n  status: z.enum([\"active\", \"inactive\"]),\n});\n\nexport const insertKnowledgeBaseFileSchema = z.object({\n  name: z.string(),\n  size: z.number(),\n});\n\nexport type KnowledgeBaseFile = z.infer<typeof knowledgeBaseFileSchema>;\nexport type InsertKnowledgeBaseFile = z.infer<typeof insertKnowledgeBaseFileSchema>;\n\n// Transcript Types\nexport const transcriptMessageSchema = z.object({\n  id: z.string(),\n  role: z.enum([\"user\", \"assistant\"]),\n  content: z.string(),\n  timestamp: z.string(),\n});\n\nexport const transcriptSchema = z.object({\n  id: z.string(),\n  startTime: z.string(),\n  endTime: z.string().optional(),\n  messageCount: z.number(),\n  messages: z.array(transcriptMessageSchema),\n});\n\nexport type TranscriptMessage = z.infer<typeof transcriptMessageSchema>;\nexport type Transcript = z.infer<typeof transcriptSchema>;\n\n// Project Configuration and Credit Management\nexport const projectConfigSchema = z.object({\n  project_id: z.string(),\n  budget: z.number(),\n  credits_used: z.number(),\n  start_date: z.string(),\n  vf_api_key: z.string().optional(),\n});\n\nexport const creditOperationSchema = z.object({\n  project_id: z.string(),\n  credits: z.number(),\n});\n\nexport const budgetCheckSchema = z.object({\n  status: z.string(),\n  over_budget: z.boolean(),\n  project_id: z.string(),\n  budget: z.number(),\n  credits_used: z.number(),\n  current_cost: z.number(),\n  remaining: z.number(),\n  credits_remaining: z.number(),\n  days_remaining: z.number(),\n  start_date: z.string(),\n  reset: z.boolean().optional(),\n  message: z.string().optional(),\n});\n\nexport type ProjectConfig = z.infer<typeof projectConfigSchema>;\nexport type CreditOperation = z.infer<typeof creditOperationSchema>;\nexport type BudgetCheck = z.infer<typeof budgetCheckSchema>;\n","size_bytes":2673},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"attached_assets/vf-limit-counter/vf-limit-counter/vf-usage-api-exporter/vf-usage-api-exporter/src/index.js":{"content":"/*\n  Usage checker for Voiceflow Analytics v2\n\n  - Queries the v2 usage endpoint with data.name = \"credit_usage\" by default\n  - Paginates using the returned cursor\n  - Sums the numeric `count` across all returned items\n  - If USAGE_THRESHOLD is set and total > threshold, posts to SLACK_WEBHOOK_URL (if set) and exits non-zero\n\n  Environment variables:\n    VF_API_KEY            (required)  e.g. VF.DM.xxxxxx\n    VF_PROJECT_ID         (required)\n    USAGE_THRESHOLD       (optional)  integer threshold of credits\n    SLACK_WEBHOOK_URL     (optional)  Slack Incoming Webhook URL for alerts\n    METRIC_NAME           (optional)  defaults to \"credit_usage\" (examples: interactions, unique_users)\n    START_TIME            (optional)  ISO timestamp; if omitted, API default window applies\n    END_TIME              (optional)  ISO timestamp\n    PAGE_LIMIT            (optional)  integer per-page limit (default 100)\n\n  CLI flags override env (e.g. --project, --key, --threshold, --metric, --start, --end, --limit, --slack-url)\n*/\n\nconst USAGE_ENDPOINT = \"https://analytics-api.voiceflow.com/v2/query/usage\";\n\nfunction parseArgs(argv) {\n  const args = {};\n  for (let i = 2; i < argv.length; i++) {\n    const part = argv[i];\n    if (!part.startsWith(\"--\")) continue;\n    const [rawKey, ...rest] = part.replace(/^--/, \"\").split(\"=\");\n    const key = rawKey.trim();\n    const value = rest.length > 0 ? rest.join(\"=\") : argv[i + 1];\n    if (rest.length === 0 && argv[i + 1] && !argv[i + 1].startsWith(\"--\")) i++;\n    args[key] = value;\n  }\n  return args;\n}\n\nfunction getConfig() {\n  const args = parseArgs(process.argv);\n\n  const apiKey = args.key || process.env.VF_API_KEY;\n  const projectId = args.project || process.env.VF_PROJECT_ID;\n  const metricName = (args.metric || process.env.METRIC_NAME || \"credit_usage\").trim();\n  const threshold = args.threshold !== undefined ? Number(args.threshold) : (process.env.USAGE_THRESHOLD !== undefined ? Number(process.env.USAGE_THRESHOLD) : undefined);\n  const slackWebhookUrl = args[\"slack-url\"] || process.env.SLACK_WEBHOOK_URL;\n  const startTime = args.start || process.env.START_TIME;\n  const endTime = args.end || process.env.END_TIME;\n  const pageLimit = args.limit !== undefined ? Number(args.limit) : (process.env.PAGE_LIMIT !== undefined ? Number(process.env.PAGE_LIMIT) : 100);\n\n  if (!apiKey) {\n    console.error(\"VF_API_KEY is required (or pass --key)\");\n    process.exit(2);\n  }\n  if (!projectId) {\n    console.error(\"VF_PROJECT_ID is required (or pass --project)\");\n    process.exit(2);\n  }\n\n  return {\n    apiKey,\n    projectId,\n    metricName,\n    threshold: Number.isFinite(threshold) ? threshold : undefined,\n    slackWebhookUrl,\n    startTime,\n    endTime,\n    pageLimit: Number.isFinite(pageLimit) && pageLimit > 0 ? pageLimit : 100,\n  };\n}\n\nasync function postJson(url, body, headers) {\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      ...headers,\n    },\n    body: JSON.stringify(body),\n  });\n  const text = await response.text();\n  let json;\n  try {\n    json = text ? JSON.parse(text) : {};\n  } catch {\n    json = { raw: text };\n  }\n  if (!response.ok) {\n    const err = new Error(`HTTP ${response.status}`);\n    err.response = response;\n    err.body = json;\n    throw err;\n  }\n  return json;\n}\n\nfunction buildFilter(config, cursor) {\n  const filter = {\n    projectID: config.projectId,\n    limit: config.pageLimit,\n  };\n  if (config.startTime) filter.startTime = config.startTime;\n  if (config.endTime) filter.endTime = config.endTime;\n  if (cursor != null) filter.cursor = cursor;\n  return filter;\n}\n\nasync function fetchUsageItems(config) {\n  const headers = { Authorization: config.apiKey };\n  let cursor = undefined;\n  let items = [];\n\n  // Paginate until no items are returned\n  // Guard against infinite loops by capping pages\n  const maxPages = 100;\n  for (let page = 0; page < maxPages; page++) {\n    const body = {\n      data: {\n        name: config.metricName,\n        filter: buildFilter(config, cursor),\n      },\n    };\n\n    const json = await postJson(USAGE_ENDPOINT, body, headers);\n    const pageItems = json?.result?.items || [];\n    if (!Array.isArray(pageItems) || pageItems.length === 0) break;\n    items = items.concat(pageItems);\n    cursor = json?.result?.cursor;\n    if (cursor == null) break;\n  }\n  return items;\n}\n\nfunction sumCounts(items) {\n  let total = 0;\n  for (const item of items) {\n    const value = typeof item?.count === \"number\" ? item.count : 0;\n    total += value;\n  }\n  return total;\n}\n\nasync function sendSlackAlert(webhookUrl, message) {\n  try {\n    await postJson(webhookUrl, { text: message });\n  } catch (err) {\n    console.error(\"Failed to send Slack alert\", err?.body || err?.message || err);\n  }\n}\n\nfunction formatWindow(config) {\n  if (!config.startTime && !config.endTime) return \"(default window)\";\n  if (config.startTime && config.endTime) return `${config.startTime} ‚Üí ${config.endTime}`;\n  if (config.startTime) return `since ${config.startTime}`;\n  return `until ${config.endTime}`;\n}\n\nasync function main() {\n  const config = getConfig();\n\n  console.log(JSON.stringify({\n    message: \"Querying Voiceflow usage\",\n    metric: config.metricName,\n    projectId: config.projectId,\n    window: formatWindow(config),\n    pageLimit: config.pageLimit,\n  }));\n\n  let items;\n  try {\n    items = await fetchUsageItems(config);\n  } catch (err) {\n    console.error(JSON.stringify({ error: true, status: err?.response?.status, body: err?.body }));\n    process.exit(1);\n    return;\n  }\n\n  const total = sumCounts(items);\n  const summary = {\n    metric: config.metricName,\n    projectId: config.projectId,\n    total,\n    itemCount: items.length,\n    window: formatWindow(config),\n  };\n\n  console.log(JSON.stringify({ result: summary }));\n\n  if (Number.isFinite(config.threshold) && total > config.threshold) {\n    const alertMessage = `Voiceflow ${config.metricName} for project ${config.projectId} is ${total}, exceeding threshold ${config.threshold} ${formatWindow(config)}`;\n    console.error(alertMessage);\n    if (config.slackWebhookUrl) {\n      await sendSlackAlert(config.slackWebhookUrl, alertMessage);\n    }\n    process.exit(3);\n    return;\n  }\n}\n\n// Node 18+ fetch is global\nmain();\n\n\n","size_bytes":6299},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"attached_assets/vf-kb-exporter/vf-knowledge-base-exporter/app.py":{"content":"from flask import Flask, render_template, request, redirect, url_for, flash\nfrom werkzeug.utils import secure_filename\nimport os\nimport json\nfrom voiceflow_kb import VoiceflowKB\n\n\napp = Flask(__name__)\napp.secret_key = os.environ.get('FLASK_SECRET_KEY', 'dev-secret')\n\n\ndef get_kb() -> VoiceflowKB:\n    api_key = os.environ.get('VF_API_KEY', 'VF.DM.68ec4148e1ae57b065368bde.OZyVatxIGZnrMWce')\n    project_id = os.environ.get('VF_PROJECT_ID', '68e56f7170abdf09f66dc756')\n    return VoiceflowKB(api_key, project_id)\n\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n\n@app.route('/set-creds', methods=['POST'])\ndef set_creds():\n    os.environ['VF_API_KEY'] = request.form.get('api_key', '').strip()\n    os.environ['VF_PROJECT_ID'] = request.form.get('project_id', '').strip()\n    flash('Credentials updated for this session', 'success')\n    return redirect(url_for('index'))\n\n\n@app.route('/list')\ndef list_docs():\n    kb = get_kb()\n    try:\n        docs = kb.list_documents(limit=50).get('data', [])\n    except Exception as e:\n        flash(f'Error listing documents: {e}', 'error')\n        docs = []\n    return render_template('list.html', docs=docs)\n\n\n@app.route('/query', methods=['POST'])\ndef do_query():\n    question = request.form.get('question', '')\n    kb = get_kb()\n    try:\n        result = kb.query(question=question, chunkLimit=5, synthesis=True)\n        return render_template('query.html', question=question, result=result)\n    except Exception as e:\n        flash(f'Query error: {e}', 'error')\n        return redirect(url_for('index'))\n\n\n@app.route('/upload/file', methods=['POST'])\ndef upload_file():\n    kb = get_kb()\n    f = request.files.get('file')\n    metadata_raw = request.form.get('metadata')\n    overwrite = request.form.get('overwrite') == 'on'\n    max_chunk_size = request.form.get('max_chunk_size')\n    \n    metadata = None\n    if metadata_raw:\n        try:\n            metadata = json.loads(metadata_raw)\n        except Exception:\n            flash('Invalid metadata JSON', 'error')\n            return redirect(url_for('index'))\n    \n    if not f or f.filename == '':\n        flash('No file selected', 'error')\n        return redirect(url_for('index'))\n    \n    filename = secure_filename(f.filename)\n    tmp_path = os.path.join('tmp', filename)\n    os.makedirs('tmp', exist_ok=True)\n    f.save(tmp_path)\n    try:\n        mcs = int(max_chunk_size) if max_chunk_size else None\n        res = kb.upload_document(tmp_path, metadata=metadata, overwrite=overwrite, max_chunk_size=mcs)\n        flash(f\"Uploaded file. documentID: {res['data']['documentID']}\", 'success')\n    except Exception as e:\n        flash(f'Upload error: {e}', 'error')\n    finally:\n        try:\n            os.remove(tmp_path)\n        except Exception:\n            pass\n    return redirect(url_for('list_docs'))\n\n\n@app.route('/upload/url', methods=['POST'])\ndef upload_url():\n    kb = get_kb()\n    url = request.form.get('url')\n    name = request.form.get('name') or None\n    metadata_raw = request.form.get('metadata')\n    overwrite = request.form.get('overwrite') == 'on'\n    max_chunk_size = request.form.get('max_chunk_size')\n    \n    metadata = None\n    if metadata_raw:\n        try:\n            metadata = json.loads(metadata_raw)\n        except Exception:\n            flash('Invalid metadata JSON', 'error')\n            return redirect(url_for('index'))\n    \n    if not url:\n        flash('URL is required', 'error')\n        return redirect(url_for('index'))\n    \n    try:\n        mcs = int(max_chunk_size) if max_chunk_size else None\n        res = kb.upload_url(url, name=name, metadata=metadata, overwrite=overwrite, max_chunk_size=mcs)\n        flash(f\"Uploaded URL. documentID: {res['data']['documentID']}\", 'success')\n    except Exception as e:\n        flash(f'Upload error: {e}', 'error')\n    return redirect(url_for('list_docs'))\n\n\n@app.route('/upload/table', methods=['POST'])\ndef upload_table():\n    kb = get_kb()\n    name = request.form.get('name')\n    schema_raw = request.form.get('schema')\n    items_raw = request.form.get('items')\n    metadata_raw = request.form.get('metadata')\n    overwrite = request.form.get('overwrite') == 'on'\n    max_chunk_size = request.form.get('max_chunk_size')\n    \n    if not name:\n        flash('Table name is required', 'error')\n        return redirect(url_for('index'))\n    \n    try:\n        schema_in = json.loads(schema_raw) if schema_raw else {}\n        # Accept simple schema format: { field: { type, searchable? } }\n        schema = {}\n        for k, v in schema_in.items():\n            schema[k] = { 'type': v.get('type'), 'searchable': v.get('searchable', False) }\n        \n        items = json.loads(items_raw) if items_raw else []\n        metadata = json.loads(metadata_raw) if metadata_raw else None\n    except Exception:\n        flash('Invalid JSON in schema/items/metadata', 'error')\n        return redirect(url_for('index'))\n    \n    try:\n        mcs = int(max_chunk_size) if max_chunk_size else None\n        res = kb.upload_table(name, items, schema, metadata=metadata, overwrite=overwrite, max_chunk_size=mcs)\n        flash(f\"Uploaded table. documentID: {res['data']['documentID']}\", 'success')\n    except Exception as e:\n        flash(f'Upload error: {e}', 'error')\n    return redirect(url_for('list_docs'))\n\n\nif __name__ == '__main__':\n    port = int(os.environ.get('PORT', '5000'))\n    app.run(host='127.0.0.1', port=port, debug=True)\n\n\n","size_bytes":5422},"attached_assets/vf-usage-exporter/vf-usage-api-exporter/src/index.js":{"content":"/*\n  Usage checker for Voiceflow Analytics v2\n\n  - Queries the v2 usage endpoint with data.name = \"credit_usage\" by default\n  - Paginates using the returned cursor\n  - Sums the numeric `count` across all returned items\n  - If USAGE_THRESHOLD is set and total > threshold, posts to SLACK_WEBHOOK_URL (if set) and exits non-zero\n\n  Environment variables:\n    VF_API_KEY            (required)  e.g. VF.DM.xxxxxx\n    VF_PROJECT_ID         (required)\n    USAGE_THRESHOLD       (optional)  integer threshold of credits\n    SLACK_WEBHOOK_URL     (optional)  Slack Incoming Webhook URL for alerts\n    METRIC_NAME           (optional)  defaults to \"credit_usage\" (examples: interactions, unique_users)\n    START_TIME            (optional)  ISO timestamp; if omitted, API default window applies\n    END_TIME              (optional)  ISO timestamp\n    PAGE_LIMIT            (optional)  integer per-page limit (default 100)\n\n  CLI flags override env (e.g. --project, --key, --threshold, --metric, --start, --end, --limit, --slack-url)\n*/\n\nconst USAGE_ENDPOINT = \"https://analytics-api.voiceflow.com/v2/query/usage\";\n\nfunction parseArgs(argv) {\n  const args = {};\n  for (let i = 2; i < argv.length; i++) {\n    const part = argv[i];\n    if (!part.startsWith(\"--\")) continue;\n    const [rawKey, ...rest] = part.replace(/^--/, \"\").split(\"=\");\n    const key = rawKey.trim();\n    const value = rest.length > 0 ? rest.join(\"=\") : argv[i + 1];\n    if (rest.length === 0 && argv[i + 1] && !argv[i + 1].startsWith(\"--\")) i++;\n    args[key] = value;\n  }\n  return args;\n}\n\nfunction getConfig() {\n  const args = parseArgs(process.argv);\n\n  const apiKey = args.key || process.env.VF_API_KEY;\n  const projectId = args.project || process.env.VF_PROJECT_ID;\n  const metricName = (args.metric || process.env.METRIC_NAME || \"credit_usage\").trim();\n  const threshold = args.threshold !== undefined ? Number(args.threshold) : (process.env.USAGE_THRESHOLD !== undefined ? Number(process.env.USAGE_THRESHOLD) : undefined);\n  const slackWebhookUrl = args[\"slack-url\"] || process.env.SLACK_WEBHOOK_URL;\n  const startTime = args.start || process.env.START_TIME;\n  const endTime = args.end || process.env.END_TIME;\n  const pageLimit = args.limit !== undefined ? Number(args.limit) : (process.env.PAGE_LIMIT !== undefined ? Number(process.env.PAGE_LIMIT) : 100);\n\n  if (!apiKey) {\n    console.error(\"VF_API_KEY is required (or pass --key)\");\n    process.exit(2);\n  }\n  if (!projectId) {\n    console.error(\"VF_PROJECT_ID is required (or pass --project)\");\n    process.exit(2);\n  }\n\n  return {\n    apiKey,\n    projectId,\n    metricName,\n    threshold: Number.isFinite(threshold) ? threshold : undefined,\n    slackWebhookUrl,\n    startTime,\n    endTime,\n    pageLimit: Number.isFinite(pageLimit) && pageLimit > 0 ? pageLimit : 100,\n  };\n}\n\nasync function postJson(url, body, headers) {\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      ...headers,\n    },\n    body: JSON.stringify(body),\n  });\n  const text = await response.text();\n  let json;\n  try {\n    json = text ? JSON.parse(text) : {};\n  } catch {\n    json = { raw: text };\n  }\n  if (!response.ok) {\n    const err = new Error(`HTTP ${response.status}`);\n    err.response = response;\n    err.body = json;\n    throw err;\n  }\n  return json;\n}\n\nfunction buildFilter(config, cursor) {\n  const filter = {\n    projectID: config.projectId,\n    limit: config.pageLimit,\n  };\n  if (config.startTime) filter.startTime = config.startTime;\n  if (config.endTime) filter.endTime = config.endTime;\n  if (cursor != null) filter.cursor = cursor;\n  return filter;\n}\n\nasync function fetchUsageItems(config) {\n  const headers = { Authorization: config.apiKey };\n  let cursor = undefined;\n  let items = [];\n\n  // Paginate until no items are returned\n  // Guard against infinite loops by capping pages\n  const maxPages = 100;\n  for (let page = 0; page < maxPages; page++) {\n    const body = {\n      data: {\n        name: config.metricName,\n        filter: buildFilter(config, cursor),\n      },\n    };\n\n    const json = await postJson(USAGE_ENDPOINT, body, headers);\n    const pageItems = json?.result?.items || [];\n    if (!Array.isArray(pageItems) || pageItems.length === 0) break;\n    items = items.concat(pageItems);\n    cursor = json?.result?.cursor;\n    if (cursor == null) break;\n  }\n  return items;\n}\n\nfunction sumCounts(items) {\n  let total = 0;\n  for (const item of items) {\n    const value = typeof item?.count === \"number\" ? item.count : 0;\n    total += value;\n  }\n  return total;\n}\n\nasync function sendSlackAlert(webhookUrl, message) {\n  try {\n    await postJson(webhookUrl, { text: message });\n  } catch (err) {\n    console.error(\"Failed to send Slack alert\", err?.body || err?.message || err);\n  }\n}\n\nfunction formatWindow(config) {\n  if (!config.startTime && !config.endTime) return \"(default window)\";\n  if (config.startTime && config.endTime) return `${config.startTime} ‚Üí ${config.endTime}`;\n  if (config.startTime) return `since ${config.startTime}`;\n  return `until ${config.endTime}`;\n}\n\nasync function main() {\n  const config = getConfig();\n\n  console.log(JSON.stringify({\n    message: \"Querying Voiceflow usage\",\n    metric: config.metricName,\n    projectId: config.projectId,\n    window: formatWindow(config),\n    pageLimit: config.pageLimit,\n  }));\n\n  let items;\n  try {\n    items = await fetchUsageItems(config);\n  } catch (err) {\n    console.error(JSON.stringify({ error: true, status: err?.response?.status, body: err?.body }));\n    process.exit(1);\n    return;\n  }\n\n  const total = sumCounts(items);\n  const summary = {\n    metric: config.metricName,\n    projectId: config.projectId,\n    total,\n    itemCount: items.length,\n    window: formatWindow(config),\n  };\n\n  console.log(JSON.stringify({ result: summary }));\n\n  if (Number.isFinite(config.threshold) && total > config.threshold) {\n    const alertMessage = `Voiceflow ${config.metricName} for project ${config.projectId} is ${total}, exceeding threshold ${config.threshold} ${formatWindow(config)}`;\n    console.error(alertMessage);\n    if (config.slackWebhookUrl) {\n      await sendSlackAlert(config.slackWebhookUrl, alertMessage);\n    }\n    process.exit(3);\n    return;\n  }\n}\n\n// Node 18+ fetch is global\nmain();\n\n\n","size_bytes":6299},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AppSidebar } from \"@/components/app-sidebar\";\nimport { ThemeProvider } from \"@/components/theme-provider\";\nimport { ProtectedRoute } from \"@/components/protected-route\";\nimport Dashboard from \"@/pages/dashboard\";\nimport Usage from \"@/pages/usage\";\nimport KnowledgeBase from \"@/pages/knowledge-base\";\nimport Transcripts from \"@/pages/transcripts\";\nimport Login from \"@/pages/login\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/\">\n        <ProtectedRoute>\n          <Dashboard />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/usage\">\n        <ProtectedRoute>\n          <Usage />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/knowledge-base\">\n        <ProtectedRoute>\n          <KnowledgeBase />\n        </ProtectedRoute>\n      </Route>\n      <Route path=\"/transcripts\">\n        <ProtectedRoute>\n          <Transcripts />\n        </ProtectedRoute>\n      </Route>\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider defaultTheme=\"dark\">\n        <TooltipProvider>\n          <Switch>\n            <Route path=\"/login\">\n              <Router />\n            </Route>\n            <Route>\n              <SidebarProvider style={style as React.CSSProperties}>\n                <div className=\"flex h-screen w-full\">\n                  <AppSidebar />\n                  <div className=\"flex flex-col flex-1 min-w-0\">\n                    <header className=\"flex items-center justify-between p-4 border-b border-border bg-background sticky top-0 z-10\">\n                      <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n                    </header>\n                    <main className=\"flex-1 overflow-hidden\">\n                      <Router />\n                    </main>\n                  </div>\n                </div>\n              </SidebarProvider>\n            </Route>\n          </Switch>\n          <Toaster />\n        </TooltipProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2593},"client/src/lib/auth.ts":{"content":"export interface ProjectConfig {\n  project_id: string;\n  vf_api_key?: string;\n  budget: number;\n}\n\nlet cachedProjectId: string | null = null;\n\nexport async function login(projectId: string, vfApiKey?: string, budget?: number): Promise<{ success: boolean; error?: string }> {\n  try {\n    const response = await fetch(\"/api/auth/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        project_id: projectId,\n        vf_api_key: vfApiKey,\n        budget: budget || 60,\n      }),\n    });\n\n    if (!response.ok) {\n      const error = await response.json();\n      return { success: false, error: error.error || \"Login failed\" };\n    }\n\n    const data = await response.json();\n    cachedProjectId = data.project_id;\n    return { success: true };\n  } catch (error) {\n    return { success: false, error: \"Network error\" };\n  }\n}\n\nexport async function logout(): Promise<void> {\n  try {\n    await fetch(\"/api/auth/logout\", {\n      method: \"POST\",\n    });\n    cachedProjectId = null;\n  } catch (error) {\n    console.error(\"Logout error:\", error);\n  }\n}\n\nexport async function checkSession(): Promise<{ authenticated: boolean; project_id?: string }> {\n  try {\n    const response = await fetch(\"/api/auth/session\");\n    const data = await response.json();\n    \n    if (data.authenticated) {\n      cachedProjectId = data.project_id;\n    } else {\n      cachedProjectId = null;\n    }\n    \n    return data;\n  } catch (error) {\n    cachedProjectId = null;\n    return { authenticated: false };\n  }\n}\n\nexport function getProjectId(): string | null {\n  return cachedProjectId;\n}\n\nexport async function isAuthenticated(): Promise<boolean> {\n  if (cachedProjectId) {\n    return true;\n  }\n  const session = await checkSession();\n  return session.authenticated;\n}\n","size_bytes":1807},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/credit-limit-bar.tsx":{"content":"import { CreditLimit } from \"@shared/schema\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { AlertCircle, CheckCircle, AlertTriangle } from \"lucide-react\";\n\ninterface CreditLimitBarProps {\n  creditLimit: CreditLimit;\n}\n\nexport function CreditLimitBar({ creditLimit }: CreditLimitBarProps) {\n  const getStatusColor = () => {\n    switch (creditLimit.status) {\n      case \"safe\":\n        return \"text-chart-2\";\n      case \"warning\":\n        return \"text-chart-3\";\n      case \"danger\":\n        return \"text-destructive\";\n      default:\n        return \"text-muted-foreground\";\n    }\n  };\n\n  const getStatusIcon = () => {\n    switch (creditLimit.status) {\n      case \"safe\":\n        return <CheckCircle className=\"w-5 h-5 text-chart-2\" />;\n      case \"warning\":\n        return <AlertTriangle className=\"w-5 h-5 text-chart-3\" />;\n      case \"danger\":\n        return <AlertCircle className=\"w-5 h-5 text-destructive\" />;\n      default:\n        return null;\n    }\n  };\n\n  const getProgressColor = () => {\n    if (creditLimit.percentage >= 90) return \"bg-destructive\";\n    if (creditLimit.percentage >= 70) return \"bg-chart-3\";\n    return \"bg-chart-2\";\n  };\n\n  return (\n    <div className=\"space-y-4\" data-testid=\"credit-limit-bar\">\n      <div className=\"flex items-center justify-between gap-4\">\n        <div className=\"flex items-center gap-2\">\n          {getStatusIcon()}\n          <div>\n            <p className=\"text-sm font-medium text-foreground\">\n              {creditLimit.current.toLocaleString()} / {creditLimit.limit.toLocaleString()} credits\n            </p>\n            <p className={`text-xs ${getStatusColor()}`}>\n              {creditLimit.percentage.toFixed(1)}% used\n            </p>\n          </div>\n        </div>\n        <div className=\"text-right\">\n          <p className=\"text-xs text-muted-foreground\">\n            {creditLimit.status === \"safe\" && \"Usage within safe limits\"}\n            {creditLimit.status === \"warning\" && \"Approaching credit limit\"}\n            {creditLimit.status === \"danger\" && \"Critical: Near limit\"}\n          </p>\n        </div>\n      </div>\n      <div className=\"relative\">\n        <Progress value={creditLimit.percentage} className=\"h-3\" />\n        <div\n          className={`absolute inset-0 h-3 rounded-full transition-all ${getProgressColor()}`}\n          style={{ width: `${Math.min(creditLimit.percentage, 100)}%` }}\n        />\n      </div>\n    </div>\n  );\n}\n","size_bytes":2423},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"server/storage.ts":{"content":"import { type KnowledgeBaseFile, type InsertKnowledgeBaseFile, type ProjectConfig } from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\n\nexport interface IStorage {\n  // Knowledge Base\n  getKnowledgeBaseFiles(): Promise<KnowledgeBaseFile[]>;\n  getKnowledgeBaseFile(id: string): Promise<KnowledgeBaseFile | undefined>;\n  createKnowledgeBaseFile(file: InsertKnowledgeBaseFile): Promise<KnowledgeBaseFile>;\n  deleteKnowledgeBaseFile(id: string): Promise<boolean>;\n  \n  // Credit/Budget Management\n  getProjectConfig(projectId: string): Promise<ProjectConfig>;\n  updateProjectConfig(config: ProjectConfig): Promise<ProjectConfig>;\n  addCredits(projectId: string, credits: number): Promise<ProjectConfig>;\n  resetProject(projectId: string): Promise<void>;\n}\n\nexport class MemStorage implements IStorage {\n  private knowledgeBaseFiles: Map<string, KnowledgeBaseFile>;\n  private projectConfigs: Map<string, ProjectConfig>;\n\n  constructor() {\n    this.knowledgeBaseFiles = new Map();\n    this.projectConfigs = new Map();\n  }\n\n  async getKnowledgeBaseFiles(): Promise<KnowledgeBaseFile[]> {\n    return Array.from(this.knowledgeBaseFiles.values());\n  }\n\n  async getKnowledgeBaseFile(id: string): Promise<KnowledgeBaseFile | undefined> {\n    return this.knowledgeBaseFiles.get(id);\n  }\n\n  async createKnowledgeBaseFile(insertFile: InsertKnowledgeBaseFile): Promise<KnowledgeBaseFile> {\n    const id = randomUUID();\n    const file: KnowledgeBaseFile = {\n      ...insertFile,\n      id,\n      uploadedAt: new Date().toISOString(),\n      status: \"active\",\n    };\n    this.knowledgeBaseFiles.set(id, file);\n    return file;\n  }\n\n  async deleteKnowledgeBaseFile(id: string): Promise<boolean> {\n    return this.knowledgeBaseFiles.delete(id);\n  }\n\n  async getProjectConfig(projectId: string): Promise<ProjectConfig> {\n    let config = this.projectConfigs.get(projectId);\n    if (!config) {\n      config = {\n        project_id: projectId,\n        budget: 60.0,\n        credits_used: 0,\n        start_date: new Date().toISOString(),\n      };\n      this.projectConfigs.set(projectId, config);\n    }\n    return config;\n  }\n\n  async updateProjectConfig(config: ProjectConfig): Promise<ProjectConfig> {\n    this.projectConfigs.set(config.project_id, config);\n    return config;\n  }\n\n  async addCredits(projectId: string, credits: number): Promise<ProjectConfig> {\n    const config = await this.getProjectConfig(projectId);\n    config.credits_used += credits;\n    this.projectConfigs.set(projectId, config);\n    return config;\n  }\n\n  async resetProject(projectId: string): Promise<void> {\n    const config = await this.getProjectConfig(projectId);\n    config.credits_used = 0;\n    config.start_date = new Date().toISOString();\n    this.projectConfigs.set(projectId, config);\n  }\n}\n\nexport const storage = new MemStorage();\n","size_bytes":2805},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/protected-route.tsx":{"content":"import { useEffect, useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { checkSession } from \"@/lib/auth\";\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const [, setLocation] = useLocation();\n  const [isChecking, setIsChecking] = useState(true);\n  const [isAuth, setIsAuth] = useState(false);\n\n  useEffect(() => {\n    checkSession().then((session) => {\n      if (!session.authenticated) {\n        setLocation(\"/login\");\n      } else {\n        setIsAuth(true);\n      }\n      setIsChecking(false);\n    });\n  }, [setLocation]);\n\n  if (isChecking || !isAuth) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n","size_bytes":715},"attached_assets/vf-transcripts-exporter/vf-transcripts-exporter/fetch_transcripts_to_csv.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nFetch all Voiceflow project transcripts (no date limits) and export to CSV.\n\nUsage examples:\n  - Using env var for API key:\n      export VOICEFLOW_API_KEY=\"VF.DM.xxxx.yyyy\" && \\\n      python3 fetch_transcripts_to_csv.py --project-id PROJECT_ID --output transcripts.csv\n\n  - Passing API key via flag:\n      python3 fetch_transcripts_to_csv.py --project-id PROJECT_ID \\\n        --api-key \"VF.DM.xxxx.yyyy\" --output transcripts.csv\n\nThis script paginates through all transcripts using the Analytics API and writes\nrows to a CSV with core fields and JSON for nested collections.\n\"\"\"\n\nimport argparse\nimport csv\nimport json\nimport os\nimport sys\nfrom typing import Dict, Generator, Iterable, Optional\n\nimport requests\n\n\nANALYTICS_BASE_URL = \"https://analytics-api.voiceflow.com/v1\"\n\n\ndef build_headers(api_key: str) -> Dict[str, str]:\n    return {\n        \"accept\": \"application/json\",\n        \"content-type\": \"application/json\",\n        \"Authorization\": api_key,\n    }\n\n\ndef fetch_all_transcripts(\n    project_id: str,\n    api_key: str,\n    environment_id: Optional[str] = None,\n    page_size: int = 100,\n    order: str = \"DESC\",\n    request_timeout_seconds: int = 30,\n    verbose: bool = False,\n) -> Generator[Dict, None, None]:\n    \"\"\"Yield all transcripts for a project by paginating until exhaustion.\"\"\"\n    if page_size < 1 or page_size > 100:\n        raise ValueError(\"page_size must be between 1 and 100 inclusive\")\n\n    url = f\"{ANALYTICS_BASE_URL}/transcript/project/{project_id}\"\n    headers = build_headers(api_key)\n    session = requests.Session()\n\n    skip = 0\n    while True:\n        params = {\"take\": page_size, \"skip\": skip, \"order\": order}\n        body: Dict[str, str] = {}\n        if environment_id:\n            body[\"environmentID\"] = environment_id\n\n        if verbose:\n            print(\n                f\"[verbose] Requesting page: skip={skip}, take={page_size}, order={order}, env={environment_id or 'ALL'}\"\n            )\n        try:\n            response = session.post(\n                url,\n                params=params,\n                json=body if body else {},\n                headers=headers,\n                timeout=request_timeout_seconds,\n            )\n        except requests.RequestException as exc:\n            raise SystemExit(f\"Network error while requesting transcripts: {exc}\") from exc\n\n        if response.status_code != 200:\n            details = None\n            try:\n                details = response.json()\n            except Exception:  # noqa: BLE001\n                details = response.text\n            raise SystemExit(\n                f\"API error {response.status_code} fetching transcripts: {details}\"\n            )\n\n        payload = response.json()\n        transcripts = payload.get(\"transcripts\", [])\n        if not isinstance(transcripts, list):\n            raise SystemExit(\"Unexpected API response: 'transcripts' is not a list\")\n\n        if not transcripts:\n            if verbose:\n                print(\"[verbose] Received 0 transcripts, pagination complete.\")\n            break\n\n        if verbose:\n            print(f\"[verbose] Received {len(transcripts)} transcripts on this page\")\n        for transcript in transcripts:\n            yield transcript\n\n        # If we got fewer than requested, we've reached the end\n        if len(transcripts) < page_size:\n            if verbose:\n                print(\n                    f\"[verbose] Page size {page_size}, received {len(transcripts)} < {page_size}; reached end.\"\n                )\n            break\n        skip += len(transcripts)\n        if verbose:\n            print(f\"[verbose] Advancing skip to {skip}\")\n\n\ndef fetch_transcript_details(\n    transcript_id: str,\n    api_key: str,\n    request_timeout_seconds: int = 30,\n    verbose: bool = False,\n) -> Dict:\n    \"\"\"Fetch full transcript details, including logs, by transcript ID.\"\"\"\n    url = f\"{ANALYTICS_BASE_URL}/transcript/{transcript_id}\"\n    headers = build_headers(api_key)\n    if verbose:\n        print(f\"[verbose] Fetching transcript details for {transcript_id}\")\n    try:\n        response = requests.get(url, headers=headers, timeout=request_timeout_seconds)\n    except requests.RequestException as exc:\n        raise SystemExit(f\"Network error while fetching transcript {transcript_id}: {exc}\") from exc\n\n    if response.status_code != 200:\n        details = None\n        try:\n            details = response.json()\n        except Exception:  # noqa: BLE001\n            details = response.text\n        raise SystemExit(\n            f\"API error {response.status_code} fetching transcript {transcript_id}: {details}\"\n        )\n\n    payload = response.json()\n    transcript = payload.get(\"transcript\")\n    if not isinstance(transcript, dict):\n        raise SystemExit(\"Unexpected API response: 'transcript' is not an object\")\n    return transcript\n\n\ndef iter_message_rows(\n    transcripts: Iterable[Dict],\n    api_key: str,\n    request_timeout_seconds: int = 30,\n    verbose: bool = False,\n) -> Generator[Dict[str, Optional[str]], None, None]:\n    \"\"\"Yield per-message rows (user and ai) for the given transcripts.\n\n    - user messages: logs with type 'action' and data.type == 'text'\n    - ai messages: logs with type 'trace' and data.type == 'text' and payload.ai == True\n    \"\"\"\n    for t in transcripts:\n        transcript_id = t.get(\"id\")\n        if not transcript_id:\n            continue\n        full = fetch_transcript_details(\n            transcript_id=transcript_id,\n            api_key=api_key,\n            request_timeout_seconds=request_timeout_seconds,\n            verbose=verbose,\n        )\n        session_id = full.get(\"sessionID\") or t.get(\"sessionID\")\n        logs = full.get(\"logs\") or []\n        if verbose:\n            print(f\"[verbose] Transcript {transcript_id} has {len(logs)} logs\")\n\n        for log in logs:\n            log_type = (log or {}).get(\"type\")\n            data = (log or {}).get(\"data\") or {}\n            created_at = (log or {}).get(\"createdAt\")\n\n            # User message: action text\n            if log_type == \"action\" and data.get(\"type\") == \"text\":\n                yield {\n                    \"transcriptID\": transcript_id,\n                    \"sessionID\": session_id,\n                    \"role\": \"user\",\n                    \"message\": str(data.get(\"payload\", \"\")),\n                    \"logCreatedAt\": created_at,\n                }\n\n            # AI message: trace text with ai flag\n            if log_type == \"trace\" and data.get(\"type\") == \"text\":\n                payload = (data or {}).get(\"payload\") or {}\n                if payload.get(\"ai\") and \"message\" in payload:\n                    yield {\n                        \"transcriptID\": transcript_id,\n                        \"sessionID\": session_id,\n                        \"role\": \"ai\",\n                        \"message\": str(payload.get(\"message\", \"\")),\n                        \"logCreatedAt\": created_at,\n                    }\n\n\ndef transcript_to_row(transcript: Dict) -> Dict[str, Optional[str]]:\n    \"\"\"Flatten a transcript object into a CSV-friendly row.\n\n    Nested collections like properties/evaluations are serialized to compact JSON strings.\n    \"\"\"\n    properties = transcript.get(\"properties\")\n    evaluations = transcript.get(\"evaluations\")\n\n    def to_json(value: object) -> str:\n        return json.dumps(value, ensure_ascii=False, separators=(\",\", \":\")) if value is not None else \"\"\n\n    return {\n        \"id\": transcript.get(\"id\"),\n        \"sessionID\": transcript.get(\"sessionID\"),\n        \"projectID\": transcript.get(\"projectID\"),\n        \"environmentID\": transcript.get(\"environmentID\"),\n        \"createdAt\": transcript.get(\"createdAt\"),\n        \"updatedAt\": transcript.get(\"updatedAt\"),\n        \"expiresAt\": transcript.get(\"expiresAt\"),\n        \"endedAt\": transcript.get(\"endedAt\"),\n        \"recordingURL\": transcript.get(\"recordingURL\"),\n        \"properties_count\": str(len(properties) if isinstance(properties, list) else 0),\n        \"properties_json\": to_json(properties),\n        \"evaluations_count\": str(len(evaluations) if isinstance(evaluations, list) else 0),\n        \"evaluations_json\": to_json(evaluations),\n    }\n\n\ndef write_csv(rows: Iterable[Dict[str, Optional[str]]], output_path: str) -> int:\n    fieldnames = [\n        \"id\",\n        \"sessionID\",\n        \"projectID\",\n        \"environmentID\",\n        \"createdAt\",\n        \"updatedAt\",\n        \"expiresAt\",\n        \"endedAt\",\n        \"recordingURL\",\n        \"properties_count\",\n        \"properties_json\",\n        \"evaluations_count\",\n        \"evaluations_json\",\n    ]\n\n    written = 0\n    with open(output_path, \"w\", encoding=\"utf-8\", newline=\"\") as f:\n        writer = csv.DictWriter(f, fieldnames=fieldnames, extrasaction=\"ignore\")\n        writer.writeheader()\n        for row in rows:\n            writer.writerow(row)\n            written += 1\n    return written\n\n\ndef parse_args() -> argparse.Namespace:\n    parser = argparse.ArgumentParser(\n        description=\"Fetch all Voiceflow transcripts for a project and export to CSV\",\n    )\n    parser.add_argument(\n        \"--project-id\",\n        required=True,\n        help=\"Voiceflow projectID to fetch transcripts for\",\n    )\n    parser.add_argument(\n        \"--environment-id\",\n        help=\"Optional Voiceflow environmentID to filter transcripts\",\n    )\n    parser.add_argument(\n        \"--order\",\n        choices=[\"ASC\", \"DESC\"],\n        default=\"DESC\",\n        help=\"Sort order (default: DESC)\",\n    )\n    parser.add_argument(\n        \"--take\",\n        type=int,\n        default=100,\n        help=\"Page size per request (1-100, default: 100)\",\n    )\n    parser.add_argument(\n        \"--output\",\n        default=\"transcripts.csv\",\n        help=\"Output CSV filepath (default: transcripts.csv)\",\n    )\n    parser.add_argument(\n        \"--api-key\",\n        default=os.getenv(\"VOICEFLOW_API_KEY\"),\n        help=\"Voiceflow API key (default: VOICEFLOW_API_KEY env var)\",\n    )\n    parser.add_argument(\n        \"--verbose\",\n        \"-v\",\n        action=\"store_true\",\n        help=\"Enable verbose diagnostics logging\",\n    )\n    parser.add_argument(\n        \"--messages-output\",\n        default=\"transcripts_messages.csv\",\n        help=\"Output CSV filepath for message-level export (default: transcripts_messages.csv)\",\n    )\n    return parser.parse_args()\n\n\ndef main() -> None:\n    args = parse_args()\n    if not args.api_key:\n        raise SystemExit(\n            \"API key missing. Provide --api-key or set VOICEFLOW_API_KEY environment variable.\"\n        )\n\n    # Normalize order\n    order = (args.order or \"DESC\").upper()\n    if order not in (\"ASC\", \"DESC\"):\n        raise SystemExit(\"--order must be ASC or DESC\")\n\n    # Clamp take to valid range\n    if args.take < 1 or args.take > 100:\n        raise SystemExit(\"--take must be between 1 and 100 inclusive\")\n\n    print(\n        f\"Fetching transcripts for project {args.project_id} (environment: {args.environment_id or 'ALL'})...\"\n    )\n\n    rows = (\n        transcript_to_row(t)\n        for t in fetch_all_transcripts(\n            project_id=args.project_id,\n            api_key=args.api_key,\n            environment_id=args.environment_id,\n            page_size=args.take,\n            order=order,\n            verbose=args.verbose,\n        )\n    )\n\n    try:\n        total = write_csv(rows, args.output)\n    except OSError as exc:\n        raise SystemExit(f\"Failed to write CSV: {exc}\") from exc\n\n    print(f\"Wrote {total} transcripts to {args.output}\")\n\n    # Optional messages export\n    if args.messages_output:\n        if args.verbose:\n            print(\"[verbose] Starting message-level export...\")\n        message_rows = iter_message_rows(\n            transcripts=fetch_all_transcripts(\n                project_id=args.project_id,\n                api_key=args.api_key,\n                environment_id=args.environment_id,\n                page_size=args.take,\n                order=order,\n                verbose=args.verbose,\n            ),\n            api_key=args.api_key,\n            request_timeout_seconds=30,\n            verbose=args.verbose,\n        )\n\n        message_fields = [\"transcriptID\", \"sessionID\", \"role\", \"message\", \"logCreatedAt\"]\n        written_messages = 0\n        try:\n            with open(args.messages_output, \"w\", encoding=\"utf-8\", newline=\"\") as mf:\n                mwriter = csv.DictWriter(mf, fieldnames=message_fields, extrasaction=\"ignore\")\n                mwriter.writeheader()\n                for mrow in message_rows:\n                    mwriter.writerow(mrow)\n                    written_messages += 1\n        except OSError as exc:\n            raise SystemExit(f\"Failed to write messages CSV: {exc}\") from exc\n        print(f\"Wrote {written_messages} messages to {args.messages_output}\")\n\n\nif __name__ == \"__main__\":\n    main()\n\n\n\n","size_bytes":12756},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"design_guidelines.md":{"content":"# SaaS Dashboard Design Guidelines\n\n## Design Approach\n**Selected Framework:** Material Design-inspired data dashboard with Linear's refined aesthetics\n**Justification:** Information-dense chatbot management platform requiring clear data visualization, efficient workflows, and professional polish. Linear's clean typography and spatial organization combined with Material's robust data components create an optimal experience for managing usage, limits, and knowledge bases.\n\n## Core Design Elements\n\n### A. Color Palette\n\n**Dark Mode (Primary):**\n- Background Base: 222 47% 11%\n- Surface Elevated: 222 47% 15%\n- Surface Hover: 222 47% 18%\n- Border Subtle: 222 20% 25%\n- Primary Brand: 217 91% 60%\n- Primary Hover: 217 91% 55%\n- Success: 142 71% 45%\n- Warning: 38 92% 50%\n- Danger: 0 84% 60%\n- Text Primary: 210 40% 98%\n- Text Secondary: 215 20% 65%\n- Text Tertiary: 215 16% 47%\n\n**Light Mode:**\n- Background Base: 0 0% 100%\n- Surface: 210 20% 98%\n- Border: 214 32% 91%\n- Primary: 217 91% 60%\n- Text: 222 47% 11%\n\n### B. Typography\n- **Primary Font:** Inter (Google Fonts) for UI elements, data tables\n- **Monospace Font:** JetBrains Mono for API keys, JSON data, code snippets\n- **Scale:** text-xs (labels), text-sm (body), text-base (headings), text-lg/xl (page titles), text-2xl (dashboard title)\n- **Weights:** font-normal (400), font-medium (500), font-semibold (600)\n\n### C. Layout System\n**Spacing Primitives:** Tailwind units of 2, 4, 6, 8, 12, 16\n- Component padding: p-4 to p-6\n- Section spacing: space-y-6 to space-y-8\n- Card gaps: gap-4 to gap-6\n- Page margins: px-6 py-8 (mobile), px-8 py-12 (desktop)\n\n**Grid Structure:**\n- Sidebar: fixed w-64 with navigation\n- Main content: flex-1 with max-w-7xl container\n- Dashboard cards: grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\n- Responsive breakpoints: sm:640px, md:768px, lg:1024px, xl:1280px\n\n### D. Component Library\n\n**Navigation:**\n- Sidebar with logo, main nav items (Dashboard, Usage, Knowledge Base, Transcripts), settings footer\n- Active state: subtle background highlight + primary color left border\n- Icons from Heroicons (outline style)\n\n**Data Visualization:**\n- Usage charts: Line/area charts for timeline data, bar charts for comparisons\n- Chart library: Chart.js via CDN\n- Chart colors: Primary blue gradient, multi-color for category breakdowns\n- Chart container: rounded-lg border with p-6, dark background\n\n**Cards & Surfaces:**\n- Base card: rounded-lg border bg-surface p-6\n- Stat cards: Large number (text-3xl font-bold), label (text-sm text-secondary), trend indicator (small arrow + percentage)\n- Elevation: subtle border, no shadow (Linear-style flatness)\n\n**Data Tables:**\n- Striped rows for readability\n- Sticky headers on scroll\n- Row hover: subtle background change\n- Sort indicators on column headers\n- Pagination controls at bottom\n\n**Forms & Inputs:**\n- File upload area: dashed border, drag-drop zone, file list with remove buttons\n- Input fields: rounded-md border focus:ring-2 focus:ring-primary\n- Buttons: rounded-md px-4 py-2, primary (bg-primary text-white), secondary (border variant), danger (bg-danger)\n- Search bars: with leading icon, rounded-full option for aesthetic variety\n\n**Status Indicators:**\n- Credit limit progress bar: linear with color transitions (green ‚Üí yellow ‚Üí red)\n- Usage badges: pill-shaped with colored backgrounds (success/warning/danger states)\n- Active/inactive toggles for knowledge base items\n\n**Knowledge Base Manager:**\n- File list with columns: filename, size, upload date, actions\n- Upload button prominent at top-right\n- Delete confirmation modal\n- Empty state: icon + message + CTA button\n\n**Modals & Overlays:**\n- Backdrop: bg-black/50 backdrop-blur-sm\n- Modal: rounded-lg max-w-lg mx-auto with close button\n- Slide-over panels for detailed views (transcripts)\n\n### E. Dashboard Layout\n\n**Page Structure:**\n1. **Header:** Dashboard title, date range selector, export button\n2. **Stats Row:** 4 stat cards (Total Usage, Credits Used, Active Conversations, Files in KB)\n3. **Charts Section:** 2-column grid (Usage Over Time, Top Intents/Categories)\n4. **Quick Actions:** Knowledge Base summary card, Recent transcripts preview\n5. **Alerts:** Credit limit warnings if approaching threshold\n\n**Knowledge Base Page:**\n- Header with upload button\n- Search/filter bar\n- File grid/list view toggle\n- Bulk selection and actions\n\n**Transcripts Page:**\n- Conversation list (sidebar or main table)\n- Transcript viewer with message bubbles\n- Export individual transcript button\n- Search and date filtering\n\n## Images\nNo hero images for utility dashboard. Use:\n- Icon illustrations for empty states (upload cloud for KB, chat bubble for transcripts)\n- Placeholder avatars for user profiles\n- Product logo in sidebar (120x40px area)\n\n## Key Principles\n- **Efficiency First:** Minimize clicks to complete tasks\n- **Data Clarity:** Charts and numbers immediately scannable\n- **Consistent Density:** Balanced information without overwhelming\n- **Progressive Disclosure:** Hide complexity until needed\n- **Status Visibility:** Always show current usage vs. limits","size_bytes":5086},"client/src/components/theme-provider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"dark\" | \"light\";\n\ntype ThemeProviderProps = {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n};\n\ntype ThemeProviderState = {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n};\n\nconst ThemeProviderContext = createContext<ThemeProviderState | undefined>(\n  undefined\n);\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"dark\",\n}: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(\n    () => (localStorage.getItem(\"theme\") as Theme) || defaultTheme\n  );\n\n  useEffect(() => {\n    const root = document.documentElement;\n    root.classList.remove(\"light\", \"dark\");\n    root.classList.add(theme);\n    localStorage.setItem(\"theme\", theme);\n  }, [theme]);\n\n  return (\n    <ThemeProviderContext.Provider value={{ theme, setTheme }}>\n      {children}\n    </ThemeProviderContext.Provider>\n  );\n}\n\nexport const useTheme = () => {\n  const context = useContext(ThemeProviderContext);\n  if (context === undefined)\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  return context;\n};\n","size_bytes":1114},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"attached_assets/vf-kb-exporter/vf-knowledge-base-exporter/kb_cli.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nVoiceflow Knowledge Base CLI\n\nA command-line interface for managing your Voiceflow Knowledge Base.\n\"\"\"\n\nimport argparse\nimport os\nimport json\nimport sys\nfrom pathlib import Path\nfrom voiceflow_kb import VoiceflowKB\n\n\n# Default credentials (can be overridden with env or CLI)\nDEFAULT_API_KEY = os.environ.get(\"VF_API_KEY\", \"VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR\")\nDEFAULT_PROJECT_ID = os.environ.get(\"VF_PROJECT_ID\", \"68e56f7170abdf09f66dc756\")\n\n\ndef upload_file_cmd(args, kb):\n    \"\"\"Upload a file to the knowledge base\"\"\"\n    metadata = json.loads(args.metadata) if args.metadata else None\n    \n    try:\n        result = kb.upload_document(\n            file_path=args.file,\n            metadata=metadata\n        )\n        doc_id = result.get('data', {}).get('documentID')\n        print(f\"‚úì File uploaded successfully!\")\n        print(f\"  Document ID: {doc_id}\")\n        if args.verbose:\n            print(f\"  Full response: {json.dumps(result, indent=2)}\")\n    except Exception as e:\n        print(f\"‚úó Error uploading file: {e}\", file=sys.stderr)\n        sys.exit(1)\n\n\ndef upload_url_cmd(args, kb):\n    \"\"\"Upload a URL to the knowledge base\"\"\"\n    metadata = json.loads(args.metadata) if args.metadata else None\n    \n    try:\n        result = kb.upload_url(\n            url=args.url,\n            name=args.name,\n            metadata=metadata\n        )\n        doc_id = result.get('data', {}).get('documentID')\n        print(f\"‚úì URL uploaded successfully!\")\n        print(f\"  Document ID: {doc_id}\")\n        if args.verbose:\n            print(f\"  Full response: {json.dumps(result, indent=2)}\")\n    except Exception as e:\n        print(f\"‚úó Error uploading URL: {e}\", file=sys.stderr)\n        sys.exit(1)\n\n\ndef upload_table_cmd(args, kb):\n    \"\"\"Upload table data to the knowledge base\"\"\"\n    try:\n        # Load data and schema from JSON files\n        with open(args.data_file, 'r') as f:\n            data = json.load(f)\n        \n        with open(args.schema_file, 'r') as f:\n            schema = json.load(f)\n        \n        metadata = json.loads(args.metadata) if args.metadata else None\n        \n        result = kb.upload_table(\n            name=args.name,\n            data=data,\n            schema=schema,\n            metadata=metadata\n        )\n        doc_id = result.get('data', {}).get('documentID')\n        print(f\"‚úì Table uploaded successfully!\")\n        print(f\"  Document ID: {doc_id}\")\n        if args.verbose:\n            print(f\"  Full response: {json.dumps(result, indent=2)}\")\n    except Exception as e:\n        print(f\"‚úó Error uploading table: {e}\", file=sys.stderr)\n        sys.exit(1)\n\n\ndef query_cmd(args, kb):\n    \"\"\"Query the knowledge base\"\"\"\n    metadata = json.loads(args.metadata) if args.metadata else None\n    \n    try:\n        result = kb.query(\n            question=args.question,\n            chunkLimit=args.limit,\n            synthesis=not args.no_synthesis,\n            metadata=metadata\n        )\n        \n        if args.output_format == 'json':\n            print(json.dumps(result, indent=2))\n        else:\n            # Human-readable format\n            print(\"\\n\" + \"=\"*60)\n            print(f\"Question: {args.question}\")\n            print(\"=\"*60)\n            \n            if result.get('output'):\n                print(f\"\\nüìù Answer:\\n{result['output']}\\n\")\n            \n            if result.get('chunks'):\n                print(f\"üìö Found {len(result['chunks'])} relevant chunks:\\n\")\n                for i, chunk in enumerate(result['chunks'], 1):\n                    print(f\"  [{i}] Score: {chunk.get('score', 'N/A')}\")\n                    content = chunk.get('content', '')\n                    # Truncate long content\n                    if len(content) > 200 and not args.verbose:\n                        content = content[:200] + '...'\n                    print(f\"      {content}\")\n                    print()\n    except Exception as e:\n        print(f\"‚úó Error querying knowledge base: {e}\", file=sys.stderr)\n        sys.exit(1)\n\n\ndef get_document_cmd(args, kb):\n    \"\"\"Get document details\"\"\"\n    try:\n        result = kb.get_document(args.document_id)\n        \n        if args.output_format == 'json':\n            print(json.dumps(result, indent=2))\n        else:\n            data = result.get('data', {})\n            print(f\"\\nüìÑ Document Details:\")\n            print(f\"  ID: {data.get('documentID')}\")\n            print(f\"  Name: {data.get('name')}\")\n            print(f\"  Type: {data.get('type')}\")\n            print(f\"  Status: {data.get('status')}\")\n            if data.get('metadata'):\n                print(f\"  Metadata: {json.dumps(data.get('metadata'), indent=4)}\")\n    except Exception as e:\n        print(f\"‚úó Error getting document: {e}\", file=sys.stderr)\n        sys.exit(1)\n\n\ndef delete_document_cmd(args, kb):\n    \"\"\"Delete a document\"\"\"\n    if not args.confirm:\n        response = input(f\"Are you sure you want to delete document {args.document_id}? (yes/no): \")\n        if response.lower() not in ['yes', 'y']:\n            print(\"Deletion cancelled.\")\n            return\n    \n    try:\n        result = kb.delete_document(args.document_id)\n        print(f\"‚úì Document {args.document_id} deleted successfully!\")\n        if args.verbose:\n            print(f\"  Full response: {json.dumps(result, indent=2)}\")\n    except Exception as e:\n        print(f\"‚úó Error deleting document: {e}\", file=sys.stderr)\n        sys.exit(1)\n\n\ndef update_document_cmd(args, kb):\n    \"\"\"Update a document\"\"\"\n    metadata = json.loads(args.metadata) if args.metadata else None\n    \n    try:\n        result = kb.update_document(\n            document_id=args.document_id,\n            file_path=args.file,\n            metadata=metadata\n        )\n        print(f\"‚úì Document {args.document_id} updated successfully!\")\n        if args.verbose:\n            print(f\"  Full response: {json.dumps(result, indent=2)}\")\n    except Exception as e:\n        print(f\"‚úó Error updating document: {e}\", file=sys.stderr)\n        sys.exit(1)\n\n\ndef list_documents_cmd(args, kb):\n    \"\"\"List all documents\"\"\"\n    try:\n        result = kb.list_documents(limit=args.limit, offset=args.offset)\n        \n        if args.output_format == 'json':\n            print(json.dumps(result, indent=2))\n        else:\n            docs = result.get('data', [])\n            print(f\"\\nüìö Documents (showing {len(docs)}):\\n\")\n            for doc in docs:\n                print(f\"  ‚Ä¢ {doc.get('name', 'Unnamed')}\")\n                print(f\"    ID: {doc.get('documentID')}\")\n                print(f\"    Type: {doc.get('type')}\")\n                print()\n    except Exception as e:\n        print(f\"‚úó Error listing documents: {e}\", file=sys.stderr)\n        sys.exit(1)\n\n\ndef main():\n    parser = argparse.ArgumentParser(\n        description=\"Voiceflow Knowledge Base CLI\",\n        formatter_class=argparse.RawDescriptionHelpFormatter\n    )\n    \n    # Global arguments\n    parser.add_argument('--api-key', default=DEFAULT_API_KEY,\n                       help='Voiceflow API Key (default: from script)')\n    parser.add_argument('--project-id', default=DEFAULT_PROJECT_ID,\n                       help='Voiceflow Project ID (default: from script)')\n    parser.add_argument('-v', '--verbose', action='store_true',\n                       help='Verbose output')\n    \n    subparsers = parser.add_subparsers(dest='command', help='Commands')\n    \n    # Upload file command\n    upload_file = subparsers.add_parser('upload-file', help='Upload a file')\n    upload_file.add_argument('file', help='Path to file to upload')\n    upload_file.add_argument('--metadata', help='Metadata as JSON string')\n    \n    # Upload URL command\n    upload_url = subparsers.add_parser('upload-url', help='Upload a URL')\n    upload_url.add_argument('url', help='URL to upload')\n    upload_url.add_argument('--name', help='Name for the document')\n    upload_url.add_argument('--metadata', help='Metadata as JSON string')\n    \n    # Upload table command\n    upload_table = subparsers.add_parser('upload-table', help='Upload table data')\n    upload_table.add_argument('name', help='Name for the table')\n    upload_table.add_argument('--data-file', required=True, help='JSON file with table data')\n    upload_table.add_argument('--schema-file', required=True, help='JSON file with table schema')\n    upload_table.add_argument('--metadata', help='Metadata as JSON string')\n    \n    # Query command\n    query = subparsers.add_parser('query', help='Query the knowledge base')\n    query.add_argument('question', help='Question to ask')\n    query.add_argument('--limit', type=int, default=5, help='Max chunks to return')\n    query.add_argument('--no-synthesis', action='store_true', help='Disable answer synthesis')\n    query.add_argument('--metadata', help='Metadata filter as JSON string')\n    query.add_argument('--format', dest='output_format', choices=['text', 'json'], \n                      default='text', help='Output format')\n    \n    # Get document command\n    get_doc = subparsers.add_parser('get', help='Get document details')\n    get_doc.add_argument('document_id', help='Document ID')\n    get_doc.add_argument('--format', dest='output_format', choices=['text', 'json'],\n                        default='text', help='Output format')\n    \n    # Delete document command\n    delete_doc = subparsers.add_parser('delete', help='Delete a document')\n    delete_doc.add_argument('document_id', help='Document ID to delete')\n    delete_doc.add_argument('--confirm', action='store_true', help='Skip confirmation')\n    \n    # Update document command\n    update_doc = subparsers.add_parser('update', help='Update a document')\n    update_doc.add_argument('document_id', help='Document ID to update')\n    update_doc.add_argument('file', help='Path to new file')\n    update_doc.add_argument('--metadata', help='Metadata as JSON string')\n    \n    # List documents command\n    list_docs = subparsers.add_parser('list', help='List all documents')\n    list_docs.add_argument('--limit', type=int, default=50, help='Number of documents to return')\n    list_docs.add_argument('--offset', type=int, default=0, help='Offset for pagination')\n    list_docs.add_argument('--format', dest='output_format', choices=['text', 'json'],\n                          default='text', help='Output format')\n    \n    args = parser.parse_args()\n    \n    if not args.command:\n        parser.print_help()\n        sys.exit(1)\n    \n    # Initialize KB manager\n    kb = VoiceflowKB(args.api_key, args.project_id)\n    \n    # Route to appropriate command handler\n    commands = {\n        'upload-file': upload_file_cmd,\n        'upload-url': upload_url_cmd,\n        'upload-table': upload_table_cmd,\n        'query': query_cmd,\n        'get': get_document_cmd,\n        'delete': delete_document_cmd,\n        'update': update_document_cmd,\n        'list': list_documents_cmd\n    }\n    \n    handler = commands.get(args.command)\n    if handler:\n        handler(args, kb)\n    else:\n        print(f\"Unknown command: {args.command}\", file=sys.stderr)\n        sys.exit(1)\n\n\nif __name__ == \"__main__\":\n    main()\n\n","size_bytes":11094},"attached_assets/vf-kb-exporter/vf-knowledge-base-exporter/PROJECT_SUMMARY.md":{"content":"# Voiceflow Knowledge Base Manager - Project Summary\n\n## Overview\n\nThis project provides a complete Python-based solution for managing your Voiceflow Knowledge Base. It includes both a Python library and a command-line interface for easy interaction with the Voiceflow API.\n\n## What's Included\n\n### Core Library (`voiceflow_kb.py`)\nA comprehensive Python library with the following capabilities:\n\n**Upload Methods:**\n- `upload_document()` - Upload PDF, TXT, DOCX files\n- `upload_url()` - Add web pages to your knowledge base\n- `upload_table()` - Upload structured data with custom schemas\n\n**Query Methods:**\n- `query()` - Search the knowledge base with optional filters\n- Advanced filtering by metadata and tags\n- Customizable chunk limits and synthesis settings\n\n**Document Management:**\n- `get_document()` - Retrieve document details\n- `update_document()` - Replace existing documents\n- `delete_document()` - Remove documents\n- `list_documents()` - View all documents\n\n### Command-Line Interface (`kb_cli.py`)\nA user-friendly CLI for all operations:\n- Upload files, URLs, and tables\n- Query with natural language\n- Manage documents (get, update, delete, list)\n- JSON or text output formats\n- Verbose mode for debugging\n\n### Documentation\n- **README.md** - Complete API reference and documentation\n- **QUICKSTART.md** - 5-minute getting started guide\n- **examples/README.md** - Examples and templates\n\n### Testing & Examples\n- **test_connection.py** - Verify your API connection\n- **example_usage.py** - Comprehensive Python examples\n- **examples/** - JSON templates for table uploads\n\n### Configuration\n- **requirements.txt** - Python dependencies (just `requests`)\n- **config.example.json** - Configuration template\n- **.gitignore** - Protects sensitive data\n\n## Your Configuration\n\nThe project is pre-configured with your credentials:\n\n```python\nPROJECT_ID = \"66aeff0ea380c590e96e8e70\"\nAPI_KEY = \"VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR\"\n```\n\n‚ö†Ô∏è **Security Note**: These credentials are embedded in the code for convenience. For production use, consider using environment variables or a secure config file.\n\n## Key Features\n\n### 1. Multiple Upload Types\n- **Files**: PDF, TXT, DOCX documents\n- **URLs**: Web pages and online content\n- **Tables**: Structured data with customizable schemas\n\n### 2. Advanced Querying\n- Natural language questions\n- Metadata filtering with operators ($eq, $ne, $in, $and, $or)\n- Adjustable result limits\n- Optional answer synthesis\n- Configurable temperature for AI responses\n\n### 3. Metadata Support\nOrganize your knowledge base with custom metadata:\n```python\nmetadata = {\n    \"category\": \"documentation\",\n    \"department\": \"support\",\n    \"version\": \"1.0\",\n    \"priority\": \"high\"\n}\n```\n\n### 4. Table Uploads\nUpload structured data with schemas:\n```python\nschema = {\n    \"id\": {\"type\": \"number\", \"searchable\": True},\n    \"name\": {\"type\": \"string\", \"searchable\": True},\n    \"description\": {\"type\": \"string\", \"searchable\": True}\n}\n```\n\n### 5. Two Ways to Use\n- **Python Library**: For integration into your applications\n- **CLI**: For quick operations and automation scripts\n\n## Quick Start\n\n1. **Install**:\n   ```bash\n   pip install -r requirements.txt\n   ```\n\n2. **Test Connection**:\n   ```bash\n   python test_connection.py\n   ```\n\n3. **Upload Content**:\n   ```bash\n   python kb_cli.py upload-file document.pdf\n   ```\n\n4. **Query**:\n   ```bash\n   python kb_cli.py query \"What's in my knowledge base?\"\n   ```\n\n## Use Cases\n\n### Documentation Management\nUpload and search through product documentation, user manuals, and technical guides.\n\n### Product Catalogs\nCreate searchable product databases with pricing, descriptions, and categorization.\n\n### FAQ Systems\nBuild question-answering systems from your FAQ content.\n\n### Website Indexing\nImport content from multiple web pages for unified search.\n\n### Customer Support\nIntegrate with Voiceflow assistants to provide accurate, sourced answers.\n\n## API Endpoints Used\n\nThe library interacts with these Voiceflow API endpoints:\n\n- **Document Management**: `https://api.voiceflow.com/v1/knowledge-base/docs/*`\n- **Query**: `https://general-runtime.voiceflow.com/knowledge-base/query`\n\nAll requests are authenticated using your Dialog Manager API Key.\n\n## File Structure\n\n```\nvf-knowledge-base-exporter/\n‚îú‚îÄ‚îÄ Core Library\n‚îÇ   ‚îî‚îÄ‚îÄ voiceflow_kb.py (320 lines)\n‚îÇ\n‚îú‚îÄ‚îÄ Command-Line Tools\n‚îÇ   ‚îú‚îÄ‚îÄ kb_cli.py (360 lines)\n‚îÇ   ‚îî‚îÄ‚îÄ test_connection.py (150 lines)\n‚îÇ\n‚îú‚îÄ‚îÄ Documentation\n‚îÇ   ‚îú‚îÄ‚îÄ README.md (350 lines)\n‚îÇ   ‚îú‚îÄ‚îÄ QUICKSTART.md (250 lines)\n‚îÇ   ‚îî‚îÄ‚îÄ PROJECT_SUMMARY.md (this file)\n‚îÇ\n‚îú‚îÄ‚îÄ Examples\n‚îÇ   ‚îú‚îÄ‚îÄ example_usage.py (200 lines)\n‚îÇ   ‚îî‚îÄ‚îÄ examples/\n‚îÇ       ‚îú‚îÄ‚îÄ README.md\n‚îÇ       ‚îú‚îÄ‚îÄ table_data.example.json\n‚îÇ       ‚îî‚îÄ‚îÄ table_schema.example.json\n‚îÇ\n‚îî‚îÄ‚îÄ Configuration\n    ‚îú‚îÄ‚îÄ requirements.txt\n    ‚îú‚îÄ‚îÄ config.example.json\n    ‚îî‚îÄ‚îÄ .gitignore\n```\n\n## Technical Details\n\n### Dependencies\n- **requests**: HTTP library for API calls\n- **Python 3.7+**: Minimum Python version\n\n### Error Handling\nThe library includes comprehensive error handling:\n- File not found errors\n- HTTP errors with status codes\n- Authentication failures\n- JSON parsing errors\n- API rate limiting\n\n### Response Format\nAll API methods return dictionaries with this general structure:\n```python\n{\n    \"data\": {\n        \"documentID\": \"abc123\",\n        \"name\": \"Document Name\",\n        \"type\": \"file\",\n        \"status\": \"uploaded\"\n    }\n}\n```\n\nQuery responses include:\n```python\n{\n    \"output\": \"Synthesized answer...\",\n    \"chunks\": [\n        {\n            \"content\": \"Relevant text...\",\n            \"score\": 0.95\n        }\n    ]\n}\n```\n\n## Best Practices\n\n1. **Use Metadata**: Organize documents with consistent metadata schemas\n2. **Searchable Fields**: Mark important table fields as searchable\n3. **Test Queries**: Verify uploads with test queries\n4. **Version Control**: Track document versions in metadata\n5. **Descriptive Names**: Use clear, searchable document names\n\n## Extending the Library\n\nThe code is well-structured for extensions:\n\n```python\nclass VoiceflowKB:\n    def __init__(self, api_key, project_id):\n        # Initialize\n    \n    def your_custom_method(self, ...):\n        # Add custom functionality\n        url = f\"{self.base_url}/your/endpoint\"\n        response = requests.post(url, headers=self.headers, json=data)\n        return response.json()\n```\n\n## Support & Resources\n\n- **Documentation**: See README.md for complete API reference\n- **Quick Start**: See QUICKSTART.md for getting started\n- **Examples**: See example_usage.py for code examples\n- **Voiceflow Docs**: https://developer.voiceflow.com/\n- **Community**: https://discord.gg/voiceflow\n\n## Version Information\n\n- **Created**: October 2025\n- **API Version**: Voiceflow Knowledge Base API v1\n- **Python Version**: 3.7+\n\n## Notes\n\n- Tags API was deprecated in July 2025; use metadata instead\n- Some endpoints may have rate limits\n- Large files may take time to process\n- Document IDs are required for update/delete operations\n\n## Future Enhancements\n\nPotential additions to consider:\n- Batch upload operations\n- Progress bars for large uploads\n- Async operations for better performance\n- Export functionality\n- Document comparison tools\n- Analytics and reporting\n\n## License\n\nOpen source - free to use and modify for your Voiceflow projects.\n\n---\n\n**Ready to go!** Start with `python test_connection.py` to verify everything works, then explore the examples.\n\nFor detailed usage, see:\n- `README.md` - Full documentation\n- `QUICKSTART.md` - Quick start guide\n- `example_usage.py` - Code examples\n\n","size_bytes":7673},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/usage-chart.tsx":{"content":"import { useEffect, useRef } from \"react\";\nimport { UsageData } from \"@shared/schema\";\n\ninterface UsageChartProps {\n  data: UsageData[];\n  height?: number;\n}\n\ndeclare global {\n  interface Window {\n    Chart: any;\n  }\n}\n\nexport function UsageChart({ data, height = 300 }: UsageChartProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const chartRef = useRef<any>(null);\n\n  useEffect(() => {\n    if (!canvasRef.current || !window.Chart) return;\n\n    const ctx = canvasRef.current.getContext(\"2d\");\n    if (!ctx) return;\n\n    if (chartRef.current) {\n      chartRef.current.destroy();\n    }\n\n    const isDark = document.documentElement.classList.contains(\"dark\");\n    const textColor = isDark ? \"rgb(210, 220, 240)\" : \"rgb(30, 41, 59)\";\n    const gridColor = isDark ? \"rgba(255, 255, 255, 0.1)\" : \"rgba(0, 0, 0, 0.1)\";\n\n    chartRef.current = new window.Chart(ctx, {\n      type: \"line\",\n      data: {\n        labels: data.map((d) => new Date(d.date).toLocaleDateString()),\n        datasets: [\n          {\n            label: \"Total Requests\",\n            data: data.map((d) => d.totalRequests),\n            borderColor: \"rgb(59, 130, 246)\",\n            backgroundColor: \"rgba(59, 130, 246, 0.1)\",\n            fill: true,\n            tension: 0.4,\n          },\n          {\n            label: \"Successful\",\n            data: data.map((d) => d.successfulRequests),\n            borderColor: \"rgb(34, 197, 94)\",\n            backgroundColor: \"rgba(34, 197, 94, 0.1)\",\n            fill: true,\n            tension: 0.4,\n          },\n          {\n            label: \"Failed\",\n            data: data.map((d) => d.failedRequests),\n            borderColor: \"rgb(239, 68, 68)\",\n            backgroundColor: \"rgba(239, 68, 68, 0.1)\",\n            fill: true,\n            tension: 0.4,\n          },\n        ],\n      },\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            display: true,\n            position: \"top\",\n            labels: {\n              color: textColor,\n              usePointStyle: true,\n              padding: 15,\n            },\n          },\n          tooltip: {\n            mode: \"index\",\n            intersect: false,\n          },\n        },\n        scales: {\n          x: {\n            grid: {\n              color: gridColor,\n            },\n            ticks: {\n              color: textColor,\n            },\n          },\n          y: {\n            beginAtZero: true,\n            grid: {\n              color: gridColor,\n            },\n            ticks: {\n              color: textColor,\n            },\n          },\n        },\n      },\n    });\n\n    return () => {\n      if (chartRef.current) {\n        chartRef.current.destroy();\n      }\n    };\n  }, [data]);\n\n  return <canvas ref={canvasRef} height={height} />;\n}\n","size_bytes":2803},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"attached_assets/vf-kb-exporter/vf-knowledge-base-exporter/QUICKSTART.md":{"content":"# Quick Start Guide\n\nGet up and running with the Voiceflow Knowledge Base Manager in 5 minutes!\n\n## 1. Install Dependencies\n\n```bash\npip install -r requirements.txt\n```\n\n## 2. Verify Your Credentials\n\nYour project is already configured with:\n- **Project ID**: `66aeff0ea380c590e96e8e70`\n- **API Key**: `VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR`\n\nThese are embedded in the scripts, but you can override them with command-line arguments if needed.\n\n## 3. Test the Connection\n\nTry a simple query to verify everything works:\n\n```bash\npython kb_cli.py query \"Hello, are you working?\"\n```\n\nExpected output: A response with any relevant information from your knowledge base.\n\n## 4. Upload Your First Document\n\n### Option A: Upload a File\n\n```bash\n# Upload a PDF, TXT, or DOCX file\npython kb_cli.py upload-file your_document.pdf \\\n  --metadata '{\"category\": \"documentation\", \"version\": \"1.0\"}'\n```\n\n### Option B: Upload a URL\n\n```bash\n# Add a webpage to your knowledge base\npython kb_cli.py upload-url \"https://www.voiceflow.com/features\" \\\n  --name \"Voiceflow Features Page\" \\\n  --metadata '{\"source\": \"website\"}'\n```\n\n### Option C: Upload Table Data\n\n```bash\n# Use the provided example files\npython kb_cli.py upload-table \"Product Catalog\" \\\n  --data-file examples/table_data.example.json \\\n  --schema-file examples/table_schema.example.json \\\n  --metadata '{\"type\": \"catalog\"}'\n```\n\n## 5. Query Your Knowledge Base\n\nAfter uploading content, try querying it:\n\n```bash\n# Simple query\npython kb_cli.py query \"What products do you have?\"\n\n# Query with JSON output\npython kb_cli.py query \"Tell me about premium widgets\" --format json\n\n# Query with more results\npython kb_cli.py query \"Show me everything about services\" --limit 10\n```\n\n## 6. Manage Your Documents\n\n### List all documents\n\n```bash\npython kb_cli.py list\n```\n\n### Get document details\n\n```bash\n# Replace <doc-id> with an actual document ID from the list\npython kb_cli.py get <doc-id>\n```\n\n### Update a document\n\n```bash\n# Replace <doc-id> with the document you want to update\npython kb_cli.py update <doc-id> new_version.pdf \\\n  --metadata '{\"version\": \"2.0\"}'\n```\n\n### Delete a document\n\n```bash\n# Replace <doc-id> with the document you want to delete\npython kb_cli.py delete <doc-id>\n\n# Skip confirmation prompt\npython kb_cli.py delete <doc-id> --confirm\n```\n\n## 7. Use in Python Scripts\n\n```python\nfrom voiceflow_kb import VoiceflowKB\n\n# Initialize\nkb = VoiceflowKB(\n    api_key=\"VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR\",\n    project_id=\"66aeff0ea380c590e96e8e70\"\n)\n\n# Upload\nresult = kb.upload_document(\"document.pdf\")\ndoc_id = result['data']['documentID']\nprint(f\"Uploaded: {doc_id}\")\n\n# Query\nanswer = kb.query(\"What is this document about?\")\nprint(answer['output'])\n\n# Clean up\nkb.delete_document(doc_id)\n```\n\n## Common Use Cases\n\n### Use Case 1: Documentation Upload\n\nUpload your product documentation:\n\n```bash\npython kb_cli.py upload-file user_manual.pdf \\\n  --metadata '{\"category\": \"manual\", \"product\": \"widget\", \"version\": \"1.0\"}'\n  \npython kb_cli.py upload-file api_docs.pdf \\\n  --metadata '{\"category\": \"technical\", \"product\": \"api\", \"version\": \"2.0\"}'\n```\n\nQuery with filters:\n\n```bash\npython kb_cli.py query \"How do I use the API?\" \\\n  --metadata '{\"$eq\": {\"category\": \"technical\"}}'\n```\n\n### Use Case 2: Product Catalog\n\nUpload your product catalog and query it:\n\n```bash\n# Upload the example table\npython kb_cli.py upload-table \"Products\" \\\n  --data-file examples/table_data.example.json \\\n  --schema-file examples/table_schema.example.json\n\n# Query products\npython kb_cli.py query \"Show me premium products under $50\"\npython kb_cli.py query \"What's the best rated product?\"\npython kb_cli.py query \"Do you have any service plans?\"\n```\n\n### Use Case 3: Website Content\n\nIndex multiple pages from your website:\n\n```bash\npython kb_cli.py upload-url \"https://example.com/about\" --name \"About Us\"\npython kb_cli.py upload-url \"https://example.com/pricing\" --name \"Pricing\"\npython kb_cli.py upload-url \"https://example.com/support\" --name \"Support\"\n```\n\n### Use Case 4: FAQ Management\n\nCreate a FAQ table:\n\n```python\nimport json\nfrom voiceflow_kb import VoiceflowKB\n\nkb = VoiceflowKB(\n    api_key=\"VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR\",\n    project_id=\"66aeff0ea380c590e96e8e70\"\n)\n\nfaq_schema = {\n    \"question\": {\"type\": \"string\", \"searchable\": True},\n    \"answer\": {\"type\": \"string\", \"searchable\": True},\n    \"category\": {\"type\": \"string\", \"searchable\": False}\n}\n\nfaq_data = [\n    {\n        \"question\": \"What are your business hours?\",\n        \"answer\": \"We're open Monday-Friday, 9am-5pm EST\",\n        \"category\": \"general\"\n    },\n    {\n        \"question\": \"How do I return a product?\",\n        \"answer\": \"Visit our returns page or contact support within 30 days\",\n        \"category\": \"returns\"\n    }\n]\n\nresult = kb.upload_table(\"FAQ\", faq_data, faq_schema)\nprint(f\"FAQ uploaded: {result['data']['documentID']}\")\n```\n\n## Troubleshooting\n\n### Issue: \"Authentication failed\"\n- Verify your API key is correct\n- Check that your API key starts with `VF.DM.`\n- Ensure your project ID is correct\n\n### Issue: \"File not found\"\n- Use absolute paths or make sure you're in the right directory\n- Check file permissions\n\n### Issue: \"Invalid JSON in metadata\"\n- Make sure your JSON is properly formatted\n- Use single quotes around the JSON and double quotes inside: `'{\"key\": \"value\"}'`\n\n### Issue: Query returns no results\n- Make sure you've uploaded documents first\n- Try a broader query\n- Check that your documents have been processed (may take a few moments)\n\n## Next Steps\n\n1. Check out `example_usage.py` for more Python examples\n2. Read the full `README.md` for detailed API documentation\n3. Explore the `examples/` directory for table upload templates\n4. Create your own metadata schemas for better organization\n5. Integrate the library into your Voiceflow assistant\n\n## Tips for Success\n\n1. **Use Metadata**: Organize documents with consistent metadata schemas\n2. **Searchable Fields**: Mark important fields as searchable in table schemas\n3. **Descriptive Names**: Give documents clear, descriptive names\n4. **Test Queries**: After uploading, test various queries to ensure good results\n5. **Update Regularly**: Keep your knowledge base fresh by updating outdated documents\n\n## Need Help?\n\n- Check the main `README.md` for full documentation\n- Review `example_usage.py` for code examples\n- Visit [Voiceflow Documentation](https://developer.voiceflow.com/)\n- Join the [Voiceflow Discord](https://discord.gg/voiceflow)\n\n---\n\nHappy knowledge base building! üöÄ\n\n","size_bytes":6551},"attached_assets/vf-limit-counter/vf-limit-counter/test_new_status_format.py":{"content":"#!/usr/bin/env python3\r\n\"\"\"\r\nTest new status format: usage_limit_reached and x_credits_remain\r\n\"\"\"\r\n\r\nimport requests\r\nimport json\r\n\r\nAPI_BASE = \"https://vf-limit-counter.onrender.com\"\r\nPROJECT_ID = \"66aeff0ea380c590e96e8e70\"\r\n\r\ndef test_new_format():\r\n    \"\"\"Test both over budget and under budget status messages\"\"\"\r\n    \r\n    print(\"=\" * 80)\r\n    print(\"TESTING NEW STATUS FORMAT\")\r\n    print(\"=\" * 80)\r\n    \r\n    # Test 1: Over budget scenario\r\n    print(\"\\n1. Testing OVER BUDGET (usage_limit_reached)\")\r\n    print(\"-\" * 80)\r\n    print(\"Setting budget to $0.50 with 1000 credits ($6.00)\")\r\n    \r\n    # Set low budget\r\n    response = requests.post(\r\n        f\"{API_BASE}/config\",\r\n        json={\"project_id\": PROJECT_ID, \"budget\": 0.50},\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    \r\n    # Add credits to go over budget\r\n    response = requests.post(\r\n        f\"{API_BASE}/credits\",\r\n        json={\"project_id\": PROJECT_ID, \"credits\": 1000},\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    \r\n    # Check status\r\n    response = requests.post(\r\n        f\"{API_BASE}/check\",\r\n        json={\"project_id\": PROJECT_ID},\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    result = response.json()\r\n    print(f\"Response:\\n{json.dumps(result, indent=2)}\")\r\n    print(f\"\\n‚úÖ Status: {result.get('status')}\")\r\n    \r\n    # Test 2: Under budget scenario\r\n    print(\"\\n\\n2. Testing UNDER BUDGET (x_credits_remain)\")\r\n    print(\"-\" * 80)\r\n    print(\"Resetting and setting budget to $10.00 with 500 credits ($3.00)\")\r\n    \r\n    # Reset project\r\n    response = requests.post(f\"{API_BASE}/reset/{PROJECT_ID}\")\r\n    \r\n    # Set normal budget\r\n    response = requests.post(\r\n        f\"{API_BASE}/config\",\r\n        json={\"project_id\": PROJECT_ID, \"budget\": 10.0},\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    \r\n    # Add some credits (but stay under budget)\r\n    response = requests.post(\r\n        f\"{API_BASE}/credits\",\r\n        json={\"project_id\": PROJECT_ID, \"credits\": 500},\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    \r\n    # Check status\r\n    response = requests.post(\r\n        f\"{API_BASE}/check\",\r\n        json={\"project_id\": PROJECT_ID},\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    result = response.json()\r\n    print(f\"Response:\\n{json.dumps(result, indent=2)}\")\r\n    print(f\"\\n‚úÖ Status: {result.get('status')}\")\r\n    \r\n    # Summary\r\n    print(\"\\n\" + \"=\" * 80)\r\n    print(\"SUMMARY OF NEW STATUS FORMAT\")\r\n    print(\"=\" * 80)\r\n    print(\"When OVER budget: status = 'usage_limit_reached'\")\r\n    print(\"When UNDER budget: status = 'X_credits_remain' (e.g., '1166_credits_remain')\")\r\n    print(\"\\nBoth responses include:\")\r\n    print(\"  - status (new format)\")\r\n    print(\"  - over_budget (boolean for backward compatibility)\")\r\n    print(\"  - credits_remaining (numeric value)\")\r\n    print(\"=\" * 80)\r\n\r\nif __name__ == \"__main__\":\r\n    test_new_format()\r\n\r\n","size_bytes":2970},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"attached_assets/vf-limit-counter/vf-limit-counter/render.yaml":{"content":"services:\r\n  - type: web\r\n    name: vf-limit-counter\r\n    env: python\r\n    buildCommand: pip install -r requirements.txt\r\n    startCommand: gunicorn render_server:app\r\n    envVars:\r\n      - key: VF_API_KEY\r\n        sync: false\r\n","size_bytes":228},"client/src/pages/login.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { BarChart3 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { login } from \"@/lib/auth\";\n\nexport default function Login() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [projectId, setProjectId] = useState(\"\");\n  const [vfApiKey, setVfApiKey] = useState(\"\");\n  const [budget, setBudget] = useState(\"60\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!projectId.trim()) {\n      toast({\n        title: \"Project ID required\",\n        description: \"Please enter your Voiceflow project ID\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const result = await login(\n        projectId,\n        vfApiKey || undefined,\n        parseFloat(budget) || 60\n      );\n\n      if (result.success) {\n        toast({\n          title: \"Login successful\",\n          description: `Welcome to project ${projectId}`,\n        });\n        setLocation(\"/\");\n      } else {\n        toast({\n          title: \"Login failed\",\n          description: result.error || \"An error occurred\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      toast({\n        title: \"Login failed\",\n        description: \"An error occurred. Please try again.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 via-background to-accent/20 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center space-y-4\">\n          <div className=\"w-16 h-16 mx-auto rounded-full bg-primary flex items-center justify-center\">\n            <BarChart3 className=\"w-8 h-8 text-primary-foreground\" />\n          </div>\n          <div>\n            <CardTitle className=\"text-2xl font-bold\">Voiceflow Dashboard</CardTitle>\n            <CardDescription className=\"mt-2\">\n              Enter your project details to access the dashboard\n            </CardDescription>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleLogin} className=\"space-y-4\">\n            <Alert>\n              <AlertDescription className=\"text-xs\">\n                Your project ID can be found in the Voiceflow dashboard URL or settings\n              </AlertDescription>\n            </Alert>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"projectId\">Project ID *</Label>\n              <Input\n                id=\"projectId\"\n                type=\"text\"\n                placeholder=\"66aeff0ea380c590e96e8e70\"\n                value={projectId}\n                onChange={(e) => setProjectId(e.target.value)}\n                required\n                data-testid=\"input-project-id\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"vfApiKey\">Voiceflow API Key (Optional)</Label>\n              <Input\n                id=\"vfApiKey\"\n                type=\"password\"\n                placeholder=\"VF.DM.xxxxx...\"\n                value={vfApiKey}\n                onChange={(e) => setVfApiKey(e.target.value)}\n                data-testid=\"input-api-key\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Optional: For live credit tracking from Voiceflow\n              </p>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"budget\">Monthly Budget ($)</Label>\n              <Input\n                id=\"budget\"\n                type=\"number\"\n                placeholder=\"60\"\n                value={budget}\n                onChange={(e) => setBudget(e.target.value)}\n                min=\"0\"\n                step=\"0.01\"\n                data-testid=\"input-budget\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                10,000 credits = $60\n              </p>\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={isLoading}\n              data-testid=\"button-login\"\n            >\n              {isLoading ? \"Logging in...\" : \"Access Dashboard\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":4752},"attached_assets/vf-usage-exporter/vf-usage-api-exporter/src/server.js":{"content":"/*\n  Minimal UI server (no external deps)\n\n  - Serves static files from ../public\n  - Provides GET /api/usage that proxies Voiceflow v2 usage API\n  - Accepts query params: metric, projectID, startTime, endTime, limit\n  - Paginates and returns consolidated items for charting\n\n  Env:\n    VF_API_KEY (required)\n    VF_PROJECT_ID (default project if not provided via query)\n*/\n\nimport http from \"http\";\nimport { readFileSync, existsSync, createReadStream } from \"fs\";\nimport { extname, join, resolve } from \"path\";\nimport { fileURLToPath } from \"url\";\nimport { URL } from \"url\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = resolve(__filename, \"..\");\nconst PUBLIC_DIR = resolve(__dirname, \"../public\");\n\nconst USAGE_ENDPOINT = \"https://analytics-api.voiceflow.com/v2/query/usage\";\n\nfunction getContentType(filePath) {\n  const ext = extname(filePath).toLowerCase();\n  switch (ext) {\n    case \".html\": return \"text/html; charset=utf-8\";\n    case \".js\": return \"application/javascript; charset=utf-8\";\n    case \".css\": return \"text/css; charset=utf-8\";\n    case \".json\": return \"application/json; charset=utf-8\";\n    case \".png\": return \"image/png\";\n    case \".jpg\":\n    case \".jpeg\": return \"image/jpeg\";\n    case \".svg\": return \"image/svg+xml\";\n    default: return \"application/octet-stream\";\n  }\n}\n\nfunction parseQuery(requestUrl) {\n  const url = new URL(requestUrl, \"http://localhost\");\n  const params = Object.fromEntries(url.searchParams.entries());\n  return params;\n}\n\nfunction toInt(value, fallback) {\n  const n = Number(value);\n  return Number.isFinite(n) ? n : fallback;\n}\n\nasync function postJson(url, body, headers) {\n  const response = await fetch(url, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      ...headers,\n    },\n    body: JSON.stringify(body),\n  });\n  const text = await response.text();\n  let json;\n  try {\n    json = text ? JSON.parse(text) : {};\n  } catch {\n    json = { raw: text };\n  }\n  if (!response.ok) {\n    const err = new Error(`HTTP ${response.status}`);\n    err.response = response;\n    err.body = json;\n    throw err;\n  }\n  return json;\n}\n\nfunction buildFilter({ projectId, limit, startTime, endTime, cursor }) {\n  const filter = { projectID: projectId, limit };\n  if (startTime) filter.startTime = startTime;\n  if (endTime) filter.endTime = endTime;\n  if (cursor != null) filter.cursor = cursor;\n  return filter;\n}\n\nasync function fetchUsageItems({ apiKey, projectId, metricName, limit, startTime, endTime }) {\n  const headers = { Authorization: apiKey };\n  let cursor = undefined;\n  const items = [];\n  const maxPages = 100;\n  for (let page = 0; page < maxPages; page++) {\n    const body = {\n      data: {\n        name: metricName,\n        filter: buildFilter({ projectId, limit, startTime, endTime, cursor }),\n      },\n    };\n    const json = await postJson(USAGE_ENDPOINT, body, headers);\n    const pageItems = json?.result?.items || [];\n    if (!Array.isArray(pageItems) || pageItems.length === 0) break;\n    items.push(...pageItems);\n    const nextCursor = json?.result?.cursor;\n    if (nextCursor == null) break;\n    cursor = nextCursor;\n  }\n  // Sort by period ascending\n  items.sort((a, b) => new Date(a.period) - new Date(b.period));\n  return items;\n}\n\nfunction sendJson(res, status, data) {\n  const body = JSON.stringify(data);\n  res.writeHead(status, {\n    \"Content-Type\": \"application/json; charset=utf-8\",\n    \"Content-Length\": Buffer.byteLength(body),\n  });\n  res.end(body);\n}\n\nasync function handleApiUsage(req, res, params) {\n  const apiKey = process.env.VF_API_KEY;\n  if (!apiKey) {\n    return sendJson(res, 500, { error: \"Missing VF_API_KEY env\" });\n  }\n  const projectId = params.projectID || process.env.VF_PROJECT_ID;\n  if (!projectId) {\n    return sendJson(res, 400, { error: \"projectID is required (query or VF_PROJECT_ID env)\" });\n  }\n  const metricName = (params.metric || \"credit_usage\").trim();\n  const limit = toInt(params.limit, 100);\n  const startTime = params.startTime;\n  const endTime = params.endTime;\n\n  try {\n    const items = await fetchUsageItems({ apiKey, projectId, metricName, limit, startTime, endTime });\n    return sendJson(res, 200, { projectId, metric: metricName, items });\n  } catch (err) {\n    return sendJson(res, 502, { error: err?.message || \"Upstream error\", details: err?.body });\n  }\n}\n\nfunction serveStatic(req, res, pathname) {\n  let filePath = pathname === \"/\" ? join(PUBLIC_DIR, \"index.html\") : join(PUBLIC_DIR, pathname);\n  // Prevent path traversal\n  filePath = resolve(filePath);\n  if (!filePath.startsWith(PUBLIC_DIR)) {\n    res.writeHead(403);\n    res.end(\"Forbidden\");\n    return;\n  }\n  if (!existsSync(filePath)) {\n    res.writeHead(404);\n    res.end(\"Not Found\");\n    return;\n  }\n  res.writeHead(200, { \"Content-Type\": getContentType(filePath) });\n  createReadStream(filePath).pipe(res);\n}\n\nconst server = http.createServer(async (req, res) => {\n  const url = new URL(req.url, \"http://localhost\");\n  const pathname = url.pathname;\n\n  if (req.method === \"GET\" && pathname === \"/api/usage\") {\n    const params = Object.fromEntries(url.searchParams.entries());\n    return handleApiUsage(req, res, params);\n  }\n\n  // Static assets\n  return serveStatic(req, res, pathname);\n});\n\nconst PORT = process.env.PORT ? Number(process.env.PORT) : 5000;\nserver.listen(PORT, () => {\n  console.log(`UI server listening on http://localhost:${PORT}`);\n});\n\n\n","size_bytes":5432},"client/src/pages/usage.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { UsageStats } from \"@shared/schema\";\nimport { UsageChart } from \"@/components/usage-chart\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { BarChart3 } from \"lucide-react\";\n\nexport default function Usage() {\n  const { data: stats, isLoading } = useQuery<UsageStats>({\n    queryKey: [\"/api/usage/stats\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"max-w-7xl mx-auto px-6 py-8 md:px-8 md:py-12 space-y-8\">\n          <Skeleton className=\"h-8 w-48 mb-2\" />\n          <Skeleton className=\"h-96\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 overflow-auto\">\n      <div className=\"max-w-7xl mx-auto px-6 py-8 md:px-8 md:py-12 space-y-8\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-foreground mb-2\" data-testid=\"text-usage-title\">\n            Usage Analytics\n          </h1>\n          <p className=\"text-sm text-muted-foreground\">\n            Detailed usage metrics and trends for your Voiceflow chatbot\n          </p>\n        </div>\n\n        <Card data-testid=\"card-usage-main\">\n          <CardHeader>\n            <CardTitle className=\"text-base font-semibold flex items-center gap-2\">\n              <BarChart3 className=\"w-4 h-4\" />\n              Usage Over Time\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {stats?.usageHistory && <UsageChart data={stats.usageHistory} height={400} />}\n          </CardContent>\n        </Card>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <Card data-testid=\"card-total-requests\">\n            <CardHeader>\n              <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n                Total Requests\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-foreground\">\n                {stats?.totalUsage.toLocaleString() || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                All time\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-avg-daily\">\n            <CardHeader>\n              <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n                Avg. Daily Usage\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-foreground\">\n                {stats?.usageHistory && stats.usageHistory.length > 0\n                  ? Math.round(\n                      stats.usageHistory.reduce((acc, curr) => acc + curr.totalRequests, 0) /\n                        stats.usageHistory.length\n                    ).toLocaleString()\n                  : 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Requests per day\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-peak-usage\">\n            <CardHeader>\n              <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n                Peak Usage\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-foreground\">\n                {stats?.usageHistory && stats.usageHistory.length > 0\n                  ? Math.max(...stats.usageHistory.map((d) => d.totalRequests)).toLocaleString()\n                  : 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Highest daily count\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3840},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"attached_assets/vf-kb-exporter/vf-knowledge-base-exporter/voiceflow_kb.py":{"content":"\"\"\"\nVoiceflow Knowledge Base Manager\n\nA Python library for managing documents in Voiceflow Knowledge Base.\nSupports uploading, querying, updating, and deleting documents.\n\"\"\"\n\nimport requests\nimport json\nfrom typing import Dict, List, Optional, Any\nfrom pathlib import Path\n\n\nclass VoiceflowKB:\n    \"\"\"Main class for interacting with Voiceflow Knowledge Base API\"\"\"\n    \n    def __init__(self, api_key: str, project_id: str):\n        \"\"\"\n        Initialize the Voiceflow KB manager\n        \n        Args:\n            api_key: Voiceflow Dialog Manager API Key (VF.DM.xxx)\n            project_id: Your Voiceflow project ID\n        \"\"\"\n        self.api_key = api_key\n        self.project_id = project_id\n        self.base_url = \"https://api.voiceflow.com\"\n        self.query_url = \"https://general-runtime.voiceflow.com\"\n        self.headers = {\n            \"Authorization\": api_key,\n            \"Content-Type\": \"application/json; charset=utf-8\"\n        }\n    \n    def upload_document(\n        self, \n        file_path: str, \n        tags: Optional[List[Dict[str, str]]] = None,\n        metadata: Optional[Dict[str, Any]] = None,\n        overwrite: Optional[bool] = None,\n        max_chunk_size: Optional[int] = None\n    ) -> Dict:\n        \"\"\"\n        Upload a document to the Knowledge Base (PDF, TXT, DOCX)\n        \n        Args:\n            file_path: Path to the file to upload\n            tags: Optional list of tags (deprecated, use metadata instead)\n            metadata: Optional metadata dict for the document\n            \n        Returns:\n            Response from the API with document details\n        \"\"\"\n        url = f\"{self.base_url}/v1/knowledge-base/docs/upload\"\n        \n        file_path = Path(file_path)\n        if not file_path.exists():\n            raise FileNotFoundError(f\"File not found: {file_path}\")\n        \n        # Prepare multipart form data\n        files = {\n            'file': (file_path.name, open(file_path, 'rb'))\n        }\n        \n        data = {}\n        \n        # Add tags if provided (deprecated but still supported)\n        if tags:\n            data['tags'] = json.dumps(tags)\n        \n        # Add metadata if provided\n        if metadata:\n            data['metadata'] = json.dumps(metadata)\n        \n        # Remove Content-Type header for multipart/form-data\n        headers = {\n            \"Authorization\": self.api_key\n        }\n        \n        params: Dict[str, Any] = {}\n        if overwrite is not None:\n            params[\"overwrite\"] = \"true\" if overwrite else \"false\"\n        if max_chunk_size is not None:\n            params[\"maxChunkSize\"] = max_chunk_size\n        \n        response = requests.post(url, headers=headers, params=params, files=files, data=data)\n        response.raise_for_status()\n        return response.json()\n    \n    def upload_url(\n        self, \n        url: str, \n        name: Optional[str] = None,\n        tags: Optional[List[Dict[str, str]]] = None,\n        metadata: Optional[Dict[str, Any]] = None,\n        overwrite: Optional[bool] = None,\n        max_chunk_size: Optional[int] = None\n    ) -> Dict:\n        \"\"\"\n        Upload a URL document to the Knowledge Base\n        \n        Args:\n            url: The URL to add to the knowledge base\n            name: Optional name for the document\n            tags: Optional list of tags\n            metadata: Optional metadata dict for the document\n            \n        Returns:\n            Response from the API with document details\n        \"\"\"\n        endpoint = f\"{self.base_url}/v1/knowledge-base/docs/upload\"\n        \n        # Per docs, URL uploads must be JSON with a top-level `data` object\n        payload: Dict[str, Any] = {\n            \"data\": {\n                \"type\": \"url\",\n                \"url\": url\n            }\n        }\n        \n        if metadata:\n            payload[\"data\"][\"metadata\"] = metadata\n        if name:\n            # Name is optional; API may generate one from the URL\n            payload[\"data\"][\"name\"] = name\n        if tags:\n            # Tags are deprecated but still supported as legacy\n            payload[\"data\"][\"tags\"] = tags\n        \n        params: Dict[str, Any] = {}\n        if overwrite is not None:\n            params[\"overwrite\"] = \"true\" if overwrite else \"false\"\n        if max_chunk_size is not None:\n            params[\"maxChunkSize\"] = max_chunk_size\n        \n        response = requests.post(endpoint, headers=self.headers, params=params, json=payload)\n        response.raise_for_status()\n        return response.json()\n    \n    def upload_table(\n        self,\n        name: str,\n        data: List[Dict[str, Any]],\n        schema: Dict[str, Dict[str, Any]],\n        tags: Optional[List[Dict[str, str]]] = None,\n        metadata: Optional[Dict[str, Any]] = None,\n        overwrite: Optional[bool] = None,\n        max_chunk_size: Optional[int] = None\n    ) -> Dict:\n        \"\"\"\n        Upload table data to the Knowledge Base\n        \n        Args:\n            name: Name for the table\n            data: List of row dictionaries\n            schema: Schema definition for the table columns\n            tags: Optional list of tags\n            metadata: Optional metadata dict for the table\n            \n        Returns:\n            Response from the API with table details\n            \n        Example:\n            schema = {\n                \"id\": {\"type\": \"number\", \"searchable\": True},\n                \"name\": {\"type\": \"string\", \"searchable\": True},\n                \"description\": {\"type\": \"string\", \"searchable\": False}\n            }\n            data = [\n                {\"id\": 1, \"name\": \"Product A\", \"description\": \"Great product\"},\n                {\"id\": 2, \"name\": \"Product B\", \"description\": \"Better product\"}\n            ]\n        \"\"\"\n        url = f\"{self.base_url}/v1/knowledge-base/docs/upload/table\"\n        \n        # Build schema with searchableFields and fields map\n        fields: Dict[str, Any] = {}\n        searchable_fields: List[str] = []\n        for field_name, field_cfg in schema.items():\n            field_type = field_cfg.get(\"type\")\n            if not field_type:\n                continue\n            fields[field_name] = {\"type\": field_type}\n            if field_cfg.get(\"searchable\") is True:\n                searchable_fields.append(field_name)\n        \n        # Per API validation errors, expects: data.items (array) and schema.searchableFields (array)\n        payload: Dict[str, Any] = {\n            \"data\": {\n                \"name\": name,\n                \"schema\": {\n                    \"fields\": fields,\n                    \"searchableFields\": searchable_fields\n                },\n                \"items\": data\n            }\n        }\n        \n        if metadata:\n            payload[\"data\"][\"metadata\"] = metadata\n        if tags:\n            payload[\"data\"][\"tags\"] = tags\n        \n        params: Dict[str, Any] = {}\n        if overwrite is not None:\n            params[\"overwrite\"] = \"true\" if overwrite else \"false\"\n        if max_chunk_size is not None:\n            params[\"maxChunkSize\"] = max_chunk_size\n        \n        response = requests.post(url, headers=self.headers, params=params, json=payload)\n        response.raise_for_status()\n        return response.json()\n    \n    def get_document(self, document_id: str) -> Dict:\n        \"\"\"\n        Retrieve a document by its ID\n        \n        Args:\n            document_id: The document ID\n            \n        Returns:\n            Document details\n        \"\"\"\n        url = f\"{self.base_url}/v1/knowledge-base/docs/{document_id}\"\n        \n        response = requests.get(url, headers=self.headers)\n        response.raise_for_status()\n        return response.json()\n    \n    def delete_document(self, document_id: str) -> Dict:\n        \"\"\"\n        Delete a document by its ID\n        \n        Args:\n            document_id: The document ID to delete\n            \n        Returns:\n            Response from the API\n        \"\"\"\n        url = f\"{self.base_url}/v1/knowledge-base/docs/{document_id}\"\n        \n        response = requests.delete(url, headers=self.headers)\n        response.raise_for_status()\n        return response.json()\n    \n    def update_document(\n        self, \n        document_id: str,\n        file_path: str,\n        tags: Optional[List[Dict[str, str]]] = None,\n        metadata: Optional[Dict[str, Any]] = None\n    ) -> Dict:\n        \"\"\"\n        Replace/update an existing document by its ID\n        \n        Args:\n            document_id: The document ID to update\n            file_path: Path to the new file\n            tags: Optional list of tags\n            metadata: Optional metadata dict for the document\n            \n        Returns:\n            Response from the API\n        \"\"\"\n        url = f\"{self.base_url}/v1/knowledge-base/docs/{document_id}/upload\"\n        \n        file_path = Path(file_path)\n        if not file_path.exists():\n            raise FileNotFoundError(f\"File not found: {file_path}\")\n        \n        files = {\n            'file': (file_path.name, open(file_path, 'rb'))\n        }\n        \n        data = {}\n        \n        if tags:\n            data['tags'] = json.dumps(tags)\n            \n        if metadata:\n            data['metadata'] = json.dumps(metadata)\n        \n        headers = {\n            \"Authorization\": self.api_key\n        }\n        \n        response = requests.put(url, headers=headers, files=files, data=data)\n        response.raise_for_status()\n        return response.json()\n    \n    def query(\n        self,\n        question: str,\n        chunkLimit: int = 5,\n        synthesis: bool = True,\n        tags: Optional[Dict[str, Any]] = None,\n        metadata: Optional[Dict[str, Any]] = None\n    ) -> Dict:\n        \"\"\"\n        Query the Knowledge Base\n        \n        Args:\n            question: The question to ask\n            chunkLimit: Maximum number of chunks to return (default: 5)\n            synthesis: Whether to synthesize an answer (default: True)\n            tags: Optional tag filters\n            metadata: Optional metadata filters\n            \n        Returns:\n            Query results with chunks and optional synthesized answer\n            \n        Example:\n            result = kb.query(\n                question=\"What are your business hours?\",\n                metadata={\"$eq\": {\"category\": \"store-info\"}}\n            )\n        \"\"\"\n        url = f\"{self.query_url}/knowledge-base/query\"\n        \n        payload = {\n            \"question\": question,\n            \"chunkLimit\": chunkLimit,\n            \"synthesis\": synthesis\n        }\n        \n        # Add settings for filtering\n        settings = {}\n        if tags:\n            settings[\"tags\"] = tags\n        if metadata:\n            settings[\"metadata\"] = metadata\n            \n        if settings:\n            payload[\"settings\"] = settings\n        \n        response = requests.post(url, headers=self.headers, json=payload)\n        response.raise_for_status()\n        return response.json()\n    \n    def list_documents(\n        self,\n        limit: int = 50,\n        offset: int = 0\n    ) -> Dict:\n        \"\"\"\n        List all documents in the knowledge base\n        Note: This endpoint may need to be confirmed from API docs\n        \n        Args:\n            limit: Number of documents to return\n            offset: Offset for pagination\n            \n        Returns:\n            List of documents\n        \"\"\"\n        url = f\"{self.base_url}/v1/knowledge-base/docs\"\n        params = {\n            \"limit\": limit,\n            \"offset\": offset\n        }\n        \n        response = requests.get(url, headers=self.headers, params=params)\n        response.raise_for_status()\n        return response.json()\n\n\n# Convenience functions for quick access\ndef create_kb_manager(api_key: str, project_id: str) -> VoiceflowKB:\n    \"\"\"\n    Create a Knowledge Base manager instance\n    \n    Args:\n        api_key: Voiceflow Dialog Manager API Key\n        project_id: Your Voiceflow project ID\n        \n    Returns:\n        VoiceflowKB instance\n    \"\"\"\n    return VoiceflowKB(api_key, project_id)\n\n\nif __name__ == \"__main__\":\n    # Example usage\n    API_KEY = \"VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR\"\n    PROJECT_ID = \"68e56f7170abdf09f66dc756\"\n    \n    kb = VoiceflowKB(API_KEY, PROJECT_ID)\n    print(\"Voiceflow Knowledge Base Manager initialized!\")\n    print(f\"Project ID: {PROJECT_ID}\")\n    print(\"\\nAvailable methods:\")\n    print(\"  - upload_document(file_path)\")\n    print(\"  - upload_url(url)\")\n    print(\"  - upload_table(name, data, schema)\")\n    print(\"  - query(question)\")\n    print(\"  - get_document(document_id)\")\n    print(\"  - delete_document(document_id)\")\n    print(\"  - update_document(document_id, file_path)\")\n    print(\"  - list_documents()\")\n\n","size_bytes":12690},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"attached_assets/vf-limit-counter/vf-limit-counter/README.md":{"content":"# Credit Budget Monitor with Voiceflow Integration\r\n\r\nA Flask web service that automatically tracks credit usage from Voiceflow API and compares against budget. Features automatic 30-day reset periods and live credit fetching.\r\n\r\n**Pricing:** 10,000 credits = $60 (or $0.006 per credit)  \r\n**Auto-reset:** Every 30 days\r\n\r\n## üåê Web UI\r\n\r\nAccess the web interface at: `https://vf-limit-counter.onrender.com`\r\n\r\n## ‚ö° Key Features\r\n\r\n- **Automatic credit fetching** from Voiceflow API\r\n- **30-day tracking period** with automatic reset\r\n- **Per-project budgets** and API keys\r\n- **Live budget status** checking (true/false)\r\n- **Multi-project support** with independent tracking\r\n- **Persistent storage** across restarts\r\n\r\n## üì° API Endpoints\r\n\r\n### POST /config\r\nConfigure a project with budget and Voiceflow API key.\r\n\r\n**Request:**\r\n```json\r\n{\r\n  \"project_id\": \"68e56f7170abdf09f66dc756\",\r\n  \"budget\": 10.0,\r\n  \"vf_api_key\": \"VF.DM.xxxxxx\"\r\n}\r\n```\r\n\r\n**Response:**\r\n```json\r\n{\r\n  \"message\": \"Configuration updated\",\r\n  \"project_id\": \"68e56f7170abdf09f66dc756\",\r\n  \"budget\": 10.0,\r\n  \"has_vf_api_key\": true,\r\n  \"start_date\": \"2025-10-16T12:00:00.000000\"\r\n}\r\n```\r\n\r\n### POST /check\r\nCheck if over budget. Automatically fetches live credits from Voiceflow if API key is configured.\r\n\r\n**Request:**\r\n```json\r\n{\r\n  \"project_id\": \"68e56f7170abdf09f66dc756\"\r\n}\r\n```\r\n\r\n**Response:**\r\n```json\r\n{\r\n  \"over_budget\": false,\r\n  \"project_id\": \"68e56f7170abdf09f66dc756\",\r\n  \"budget\": 10.0,\r\n  \"credits_used\": 1500,\r\n  \"current_cost\": 0.90,\r\n  \"remaining\": 9.10,\r\n  \"days_remaining\": 25,\r\n  \"start_date\": \"2025-10-16T12:00:00.000000\"\r\n}\r\n```\r\n\r\n### POST /budget\r\nSet budget for a project (optionally with VF API key).\r\n\r\n**Request:**\r\n```json\r\n{\r\n  \"project_id\": \"68e56f7170abdf09f66dc756\",\r\n  \"budget\": 10.0,\r\n  \"vf_api_key\": \"VF.DM.xxxxxx\"\r\n}\r\n```\r\n\r\n### POST /credits\r\nManually add credits (if not using Voiceflow API auto-fetch).\r\n\r\n**Request:**\r\n```json\r\n{\r\n  \"project_id\": \"68e56f7170abdf09f66dc756\",\r\n  \"credits\": 1000\r\n}\r\n```\r\n\r\n### GET /status/<project_id>\r\nGet detailed status for a specific project.\r\n\r\n**Response:**\r\n```json\r\n{\r\n  \"project_id\": \"68e56f7170abdf09f66dc756\",\r\n  \"budget\": 10.0,\r\n  \"credits_used\": 1500,\r\n  \"current_cost\": 0.90,\r\n  \"remaining\": 9.10,\r\n  \"over_budget\": false,\r\n  \"pricing\": {\r\n    \"credits\": 10000,\r\n    \"cost\": 60.0\r\n  }\r\n}\r\n```\r\n\r\n### GET /status\r\nGet status for all projects.\r\n\r\n### POST /reset/<project_id>\r\nManually reset a project's credits and start date.\r\n\r\n### POST /reset\r\nReset all projects.\r\n\r\n### GET /health\r\nHealth check endpoint.\r\n\r\n## üöÄ Setup\r\n\r\n### Environment Variables\r\n\r\nSet these in Render dashboard or locally:\r\n\r\n- `VF_API_KEY` - Your Voiceflow API key (optional global default)\r\n- `PORT` - Port to run on (Render sets this automatically)\r\n\r\n### Voiceflow API Key\r\n\r\nGet your Voiceflow API key:\r\n1. Go to Voiceflow dashboard\r\n2. Settings ‚Üí API Keys\r\n3. Create a new API key (format: `VF.DM.xxxxxx`)\r\n\r\nYou can set:\r\n- **Global key**: `VF_API_KEY` environment variable (applies to all projects)\r\n- **Per-project key**: via `/config` or `/budget` endpoint\r\n\r\n## üíª Usage Examples\r\n\r\n### Basic Setup\r\n```bash\r\n# 1. Configure project with budget and VF API key\r\ncurl -X POST https://vf-limit-counter.onrender.com/config \\\r\n  -H \"Content-Type: application/json\" \\\r\n  -d '{\r\n    \"project_id\": \"68e56f7170abdf09f66dc756\",\r\n    \"budget\": 10.0,\r\n    \"vf_api_key\": \"VF.DM.xxxxxx\"\r\n  }'\r\n\r\n# 2. Check budget (auto-fetches from Voiceflow)\r\ncurl -X POST https://vf-limit-counter.onrender.com/check \\\r\n  -H \"Content-Type: application/json\" \\\r\n  -d '{\r\n    \"project_id\": \"68e56f7170abdf09f66dc756\"\r\n  }'\r\n```\r\n\r\n### Get Status\r\n```bash\r\ncurl https://vf-limit-counter.onrender.com/status/68e56f7170abdf09f66dc756\r\n```\r\n\r\n### Manual Credit Entry (without Voiceflow API)\r\n```bash\r\n# Set budget\r\ncurl -X POST https://vf-limit-counter.onrender.com/budget \\\r\n  -H \"Content-Type: application/json\" \\\r\n  -d '{\r\n    \"project_id\": \"my_project\",\r\n    \"budget\": 50.0\r\n  }'\r\n\r\n# Add credits manually\r\ncurl -X POST https://vf-limit-counter.onrender.com/credits \\\r\n  -H \"Content-Type: application/json\" \\\r\n  -d '{\r\n    \"project_id\": \"my_project\",\r\n    \"credits\": 5000\r\n  }'\r\n\r\n# Check budget\r\ncurl -X POST https://vf-limit-counter.onrender.com/check \\\r\n  -H \"Content-Type: application/json\" \\\r\n  -d '{\r\n    \"project_id\": \"my_project\"\r\n  }'\r\n```\r\n\r\n## üîÑ 30-Day Reset Logic\r\n\r\n- Each project tracks a `start_date`\r\n- When checking budget, if 30+ days have passed:\r\n  - Credits reset to 0\r\n  - New 30-day period starts\r\n  - Response includes `\"reset\": true`\r\n- Use `days_remaining` field to see time left in current period\r\n\r\n## üß™ Testing\r\n\r\n```bash\r\n# Run automated tests\r\npython test_api.py\r\n\r\n# Test Voiceflow integration (update credentials first)\r\npython test_voiceflow_integration.py\r\n```\r\n\r\n## üì¶ Deployment on Render\r\n\r\n1. Push to GitHub\r\n2. Connect repository to Render\r\n3. Render auto-detects `render.yaml`\r\n4. Set `VF_API_KEY` in Render dashboard (optional)\r\n5. Deploy\r\n\r\n**Environment Variables in Render:**\r\n- Go to Dashboard ‚Üí Service ‚Üí Environment\r\n- Add `VF_API_KEY` = `VF.DM.your_key_here`\r\n\r\n## üí° Use Cases\r\n\r\n- **Monitor Voiceflow project costs** against monthly budgets\r\n- **Auto-alert when over budget** via API integration\r\n- **Track multiple projects** independently\r\n- **30-day billing cycles** with automatic reset\r\n- **Webhook integration** for budget notifications\r\n\r\n## üîß Local Development\r\n\r\n```bash\r\n# Install dependencies\r\npip install -r requirements.txt\r\n\r\n# Set environment variable (optional)\r\nexport VF_API_KEY=VF.DM.your_key_here\r\n\r\n# Run server\r\npython render_server.py\r\n\r\n# Access at http://localhost:5000\r\n```\r\n\r\n## üìä Response Fields\r\n\r\n- `over_budget`: `true` if cost > budget, `false` otherwise\r\n- `credits_used`: Total credits used in current 30-day period\r\n- `current_cost`: Dollar cost of credits used\r\n- `remaining`: Budget remaining (negative if over)\r\n- `days_remaining`: Days left in 30-day period\r\n- `start_date`: When current period started\r\n\r\n## üéØ Integration Tips\r\n\r\n1. **Poll the `/check` endpoint** from your app to monitor budget\r\n2. **Set up webhooks** to call your endpoints when budget is exceeded\r\n3. **Use project_id** to track different Voiceflow projects/environments\r\n4. **Monitor `days_remaining`** to know when reset will occur\r\n","size_bytes":6351},"client/src/pages/dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { TrendingUp, TrendingDown, Activity, CreditCard, MessageSquare, FileText } from \"lucide-react\";\nimport { UsageStats } from \"@shared/schema\";\nimport { UsageChart } from \"@/components/usage-chart\";\nimport { CreditLimitBar } from \"@/components/credit-limit-bar\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\nexport default function Dashboard() {\n  const { data: stats, isLoading } = useQuery<UsageStats>({\n    queryKey: [\"/api/usage/stats\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"max-w-7xl mx-auto px-6 py-8 md:px-8 md:py-12 space-y-8\">\n          <div>\n            <Skeleton className=\"h-8 w-48 mb-2\" />\n            <Skeleton className=\"h-4 w-96\" />\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {[1, 2, 3, 4].map((i) => (\n              <Skeleton key={i} className=\"h-32\" />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const creditLimit = stats ? {\n    current: stats.creditsUsed,\n    limit: 10000,\n    percentage: (stats.creditsUsed / 10000) * 100,\n    status: (stats.creditsUsed / 10000) > 0.9 ? \"danger\" as const : (stats.creditsUsed / 10000) > 0.7 ? \"warning\" as const : \"safe\" as const\n  } : null;\n\n  return (\n    <div className=\"flex-1 overflow-auto\">\n      <div className=\"max-w-7xl mx-auto px-6 py-8 md:px-8 md:py-12 space-y-8\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-foreground mb-2\" data-testid=\"text-dashboard-title\">\n            Dashboard Overview\n          </h1>\n          <p className=\"text-sm text-muted-foreground\">\n            Monitor your Voiceflow chatbot performance and resource usage\n          </p>\n        </div>\n\n        {creditLimit && creditLimit.status === \"danger\" && (\n          <Alert variant=\"destructive\" data-testid=\"alert-credit-limit\">\n            <AlertDescription>\n              Warning: You're approaching your credit limit. Current usage: {creditLimit.percentage.toFixed(1)}%\n            </AlertDescription>\n          </Alert>\n        )}\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          <Card className=\"hover-elevate\" data-testid=\"card-total-usage\">\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n                Total Usage\n              </CardTitle>\n              <Activity className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-3xl font-bold text-foreground\" data-testid=\"text-total-usage\">\n                {stats?.totalUsage.toLocaleString() || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                API requests this month\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"hover-elevate\" data-testid=\"card-credits-used\">\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n                Credits Used\n              </CardTitle>\n              <CreditCard className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-3xl font-bold text-foreground\" data-testid=\"text-credits-used\">\n                {stats?.creditsUsed.toLocaleString() || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {creditLimit ? `${creditLimit.percentage.toFixed(1)}% of limit` : \"Of total limit\"}\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"hover-elevate\" data-testid=\"card-active-conversations\">\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n                Active Conversations\n              </CardTitle>\n              <MessageSquare className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-3xl font-bold text-foreground\" data-testid=\"text-active-conversations\">\n                {stats?.activeConversations || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Ongoing sessions\n              </p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"hover-elevate\" data-testid=\"card-files-kb\">\n            <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n                Files in KB\n              </CardTitle>\n              <FileText className=\"w-4 h-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-3xl font-bold text-foreground\" data-testid=\"text-files-kb\">\n                {stats?.filesInKB || 0}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Knowledge base files\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {creditLimit && (\n          <Card data-testid=\"card-credit-limit\">\n            <CardHeader>\n              <CardTitle className=\"text-base font-semibold\">Credit Limit Status</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <CreditLimitBar creditLimit={creditLimit} />\n            </CardContent>\n          </Card>\n        )}\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <Card data-testid=\"card-usage-chart\">\n            <CardHeader>\n              <CardTitle className=\"text-base font-semibold\">Usage Over Time</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {stats?.usageHistory && <UsageChart data={stats.usageHistory} />}\n            </CardContent>\n          </Card>\n\n          <Card data-testid=\"card-quick-stats\">\n            <CardHeader>\n              <CardTitle className=\"text-base font-semibold\">Quick Stats</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Success Rate</span>\n                <span className=\"text-sm font-medium text-foreground\">\n                  {stats && stats.totalUsage > 0 \n                    ? ((stats.totalUsage / (stats.totalUsage + 100)) * 100).toFixed(1) \n                    : 0}%\n                </span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Avg. Messages/Session</span>\n                <span className=\"text-sm font-medium text-foreground\">\n                  {stats && stats.activeConversations > 0 \n                    ? (stats.totalUsage / stats.activeConversations).toFixed(1) \n                    : 0}\n                </span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Storage Used</span>\n                <span className=\"text-sm font-medium text-foreground\">\n                  {stats?.filesInKB || 0} files\n                </span>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":7815},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"attached_assets/vf-limit-counter/vf-limit-counter/test_voiceflow_integration.py":{"content":"#!/usr/bin/env python3\r\n\"\"\"\r\nTest script for Voiceflow API integration\r\nDemonstrates auto-fetching credits from Voiceflow and budget checking\r\n\"\"\"\r\n\r\nimport requests\r\nimport json\r\n\r\nAPI_BASE = \"https://vf-limit-counter.onrender.com\"\r\n# Replace with your actual Voiceflow project ID and API key\r\nPROJECT_ID = \"68e56f7170abdf09f66dc756\"\r\nVF_API_KEY = \"VF.DM.your_key_here\"  # Replace with actual key\r\n\r\ndef test_voiceflow_integration():\r\n    \"\"\"Test the Voiceflow integration\"\"\"\r\n    \r\n    print(\"=\" * 60)\r\n    print(\"Testing Voiceflow API Integration\")\r\n    print(\"=\" * 60)\r\n    \r\n    # Step 1: Configure project with budget and VF API key\r\n    print(\"\\n1. Setting up project configuration\")\r\n    response = requests.post(\r\n        f\"{API_BASE}/config\",\r\n        json={\r\n            \"project_id\": PROJECT_ID,\r\n            \"budget\": 10.0,\r\n            \"vf_api_key\": VF_API_KEY  # Optional: per-project key\r\n        },\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    print(f\"Status: {response.status_code}\")\r\n    print(f\"Response: {json.dumps(response.json(), indent=2)}\")\r\n    \r\n    # Step 2: Check budget (will auto-fetch from Voiceflow)\r\n    print(\"\\n2. Checking budget (auto-fetching from Voiceflow)\")\r\n    response = requests.post(\r\n        f\"{API_BASE}/check\",\r\n        json={\"project_id\": PROJECT_ID},\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    print(f\"Status: {response.status_code}\")\r\n    result = response.json()\r\n    print(f\"Response: {json.dumps(result, indent=2)}\")\r\n    \r\n    # Display summary\r\n    print(\"\\n\" + \"=\" * 60)\r\n    print(\"SUMMARY\")\r\n    print(\"=\" * 60)\r\n    print(f\"Project ID: {result.get('project_id')}\")\r\n    print(f\"Budget: ${result.get('budget')}\")\r\n    print(f\"Credits Used: {result.get('credits_used'):,}\")\r\n    print(f\"Current Cost: ${result.get('current_cost')}\")\r\n    print(f\"Remaining Budget: ${result.get('remaining')}\")\r\n    print(f\"Days Remaining: {result.get('days_remaining')} / 30\")\r\n    print(f\"Over Budget: {result.get('over_budget')}\")\r\n    print(\"=\" * 60)\r\n\r\nif __name__ == \"__main__\":\r\n    print(\"\\n‚ö†Ô∏è  IMPORTANT: Update PROJECT_ID and VF_API_KEY before running!\\n\")\r\n    # Uncomment to run:\r\n    # test_voiceflow_integration()\r\n    print(\"Edit this file and uncomment the last line to run the test.\")\r\n\r\n","size_bytes":2295},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"attached_assets/vf-transcripts-exporter/vf-transcripts-exporter/app.py":{"content":"import io\nfrom typing import Optional\n\nfrom fastapi import FastAPI, Form\nfrom fastapi.responses import HTMLResponse, StreamingResponse, JSONResponse\n\nfrom fetch_transcripts_to_csv import (\n    fetch_all_transcripts,\n    iter_message_rows,\n)\n\n\napp = FastAPI(title=\"Voiceflow Transcripts Exporter\")\n\n\nHTML_FORM = \"\"\"\n<!doctype html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <title>Voiceflow Transcripts Export</title>\n    <style>\n      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 2rem; }\n      form { max-width: 600px; display: grid; gap: 0.75rem; }\n      label { font-weight: 600; }\n      input, select { padding: 0.5rem; font-size: 1rem; }\n      button { padding: 0.6rem 1rem; font-size: 1rem; cursor: pointer; }\n      .row { display: grid; gap: 0.25rem; }\n      .note { color: #555; font-size: 0.9rem; }\n    </style>\n  </head>\n  <body>\n    <h1>Voiceflow Transcripts Export</h1>\n    <form method=\"post\" action=\"/export\">\n      <div class=\"row\">\n        <label for=\"api_key\">API Key</label>\n        <input type=\"password\" id=\"api_key\" name=\"api_key\" placeholder=\"VF.DM.xxxx.yyyy\" required />\n      </div>\n      <div class=\"row\">\n        <label for=\"project_id\">Project ID</label>\n        <input type=\"text\" id=\"project_id\" name=\"project_id\" placeholder=\"68e...\" required />\n      </div>\n      <div class=\"row\">\n        <label for=\"environment_id\">Environment ID (optional)</label>\n        <input type=\"text\" id=\"environment_id\" name=\"environment_id\" placeholder=\"env id\" />\n      </div>\n      <div class=\"row\">\n        <label for=\"order\">Order</label>\n        <select id=\"order\" name=\"order\">\n          <option value=\"DESC\" selected>DESC</option>\n          <option value=\"ASC\">ASC</option>\n        </select>\n      </div>\n      <div class=\"row\">\n        <label for=\"take\">Page Size</label>\n        <input type=\"number\" id=\"take\" name=\"take\" min=\"1\" max=\"100\" value=\"100\" />\n      </div>\n      <button type=\"submit\">Export</button>\n    </form>\n  </body>\n</html>\n\"\"\"\n\n\n@app.get(\"/\", response_class=HTMLResponse)\nasync def index() -> HTMLResponse:\n    return HTMLResponse(HTML_FORM)\n\n\n@app.post(\"/export\")\nasync def export(\n    api_key: str = Form(...),\n    project_id: str = Form(...),\n    environment_id: Optional[str] = Form(None),\n    order: str = Form(\"DESC\"),\n    take: int = Form(100),\n):\n    if order not in (\"ASC\", \"DESC\"):\n        return JSONResponse({\"error\": \"order must be ASC or DESC\"}, status_code=400)\n    if take < 1 or take > 100:\n        return JSONResponse({\"error\": \"take must be 1..100\"}, status_code=400)\n\n    # transcripts_messages.csv\n    message_rows = iter_message_rows(\n        transcripts=fetch_all_transcripts(\n            project_id=project_id,\n            api_key=api_key,\n            environment_id=environment_id,\n            page_size=take,\n            order=order,\n            verbose=False,\n        ),\n        api_key=api_key,\n        request_timeout_seconds=30,\n        verbose=False,\n    )\n    messages_buf = io.StringIO()\n    import csv\n    mwriter = csv.DictWriter(\n        messages_buf,\n        fieldnames=[\"transcriptID\", \"sessionID\", \"role\", \"message\", \"logCreatedAt\"],\n        extrasaction=\"ignore\",\n    )\n    mwriter.writeheader()\n    msg_count = 0\n    for m in message_rows:\n        mwriter.writerow(m)\n        msg_count += 1\n\n    # Respond with messages CSV as the default download\n    messages_buf.seek(0)\n    return StreamingResponse(\n        messages_buf,\n        media_type=\"text/csv\",\n        headers={\"Content-Disposition\": \"attachment; filename=transcripts_messages.csv\"},\n    )\n\n\n","size_bytes":3597},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"attached_assets/vf-limit-counter/vf-limit-counter/vf-usage-api-exporter/vf-usage-api-exporter/README.md":{"content":"## Voiceflow Usage API Exporter (v2)\n\nQuery Voiceflow Analytics v2 usage, sum counts, and alert when a threshold is exceeded.\n\n### Setup\n\n1. Node 18+ is required (global `fetch`).\n2. Install deps (none required):\n   ```bash\n   npm install\n   ```\n\n3. Configure environment variables or pass CLI flags:\n   - `VF_API_KEY` (required)\n   - `VF_PROJECT_ID` (required)\n   - `USAGE_THRESHOLD` (optional)\n   - `SLACK_WEBHOOK_URL` (optional)\n   - `METRIC_NAME` (optional, default: `credit_usage`)\n   - `START_TIME` / `END_TIME` (optional ISO timestamps)\n   - `PAGE_LIMIT` (optional, default: 100)\n\nExample `.env` (not required):\n```\nVF_API_KEY=VF.DM.xxxxxx\nVF_PROJECT_ID=66aeff0ea380c590e96e8e70\nUSAGE_THRESHOLD=1000\nSLACK_WEBHOOK_URL=https://hooks.slack.com/services/.../...\nMETRIC_NAME=credit_usage\n```\n\n### Run (CLI)\n\n```bash\nnpm run check-usage -- \\\n  --key=\"VF.DM.xxxxxx\" \\\n  --project=\"66aeff0ea380c590e96e8e70\" \\\n  --metric=credit_usage \\\n  --threshold=1000 \\\n  --limit=100\n```\n\nOptional time window:\n```bash\nnpm run check-usage -- --start=\"2025-10-01T00:00:00.000Z\" --end=\"2025-10-31T23:59:59.999Z\"\n```\n\nExit codes:\n- 0: OK (below threshold or no threshold provided)\n- 1: API error\n- 2: missing config\n- 3: threshold exceeded\n\n### Voiceflow API Step (to call usage directly)\n\nUse a POST request to `https://analytics-api.voiceflow.com/v2/query/usage` with JSON body:\n\n```json\n{\n  \"data\": {\n    \"name\": \"credit_usage\",\n    \"filter\": {\n      \"projectID\": \"66aeff0ea380c590e96e8e70\",\n      \"limit\": 100\n    }\n  }\n}\n```\n\nHeaders:\n- `Authorization: VF.DM.xxxxxx`\n- `Accept: application/json`\n- `Content-Type: application/json`\n\nYou can also use `interactions`, `unique_users`, etc. for `data.name` as per v2 docs.\n\n### Scheduling\n### Run the UI\n\nStart the local UI server (serves `public/` and proxies `/api/usage` to Voiceflow v2):\n\n```bash\nVF_API_KEY=VF.DM.xxxxxx \\\nVF_PROJECT_ID=66aeff0ea380c590e96e8e70 \\\nnpm start\n```\n\nThen open `http://localhost:3000` and click Load. You can change metric, date range, and per-page limit. The UI charts the returned `count` by `period` using Chart.js.\n\n\nUse cron to run hourly and alert via Slack when credits exceed threshold.\n\nExample cron (run at minute 5 every hour):\n```\n5 * * * * cd /path/to/vf-usage-api-exporter && \\ \n  VF_API_KEY=VF.DM.xxxxxx \\ \n  VF_PROJECT_ID=66aeff0ea380c590e96e8e70 \\ \n  USAGE_THRESHOLD=1000 \\ \n  SLACK_WEBHOOK_URL=https://hooks.slack.com/services/.../... \\ \n  npm run check-usage -- --metric=credit_usage >> usage.log 2>&1\n```\n\n\n","size_bytes":2493},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 100%;\n\n  --foreground: 222 47% 11%;\n\n  --border: 214 32% 91%;\n\n  --card: 210 20% 98%;\n\n  --card-foreground: 222 47% 11%;\n\n  --card-border: 214 32% 91%;\n\n  --sidebar: 210 20% 97%;\n\n  --sidebar-foreground: 222 47% 11%;\n\n  --sidebar-border: 214 20% 89%;\n\n  --sidebar-primary: 217 91% 60%;\n\n  --sidebar-primary-foreground: 210 40% 98%;\n\n  --sidebar-accent: 210 20% 94%;\n\n  --sidebar-accent-foreground: 222 47% 11%;\n\n  --sidebar-ring: 217 91% 60%;\n\n  --popover: 210 20% 96%;\n\n  --popover-foreground: 222 47% 11%;\n\n  --popover-border: 214 25% 88%;\n\n  --primary: 217 91% 60%;\n\n  --primary-foreground: 210 40% 98%;\n\n  --secondary: 210 20% 94%;\n\n  --secondary-foreground: 222 47% 11%;\n\n  --muted: 210 20% 95%;\n\n  --muted-foreground: 215 16% 47%;\n\n  --accent: 210 15% 93%;\n\n  --accent-foreground: 222 47% 11%;\n\n  --destructive: 0 84% 60%;\n\n  --destructive-foreground: 210 40% 98%;\n\n  --input: 214 32% 85%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 60%;\n  --chart-2: 142 71% 45%;\n  --chart-3: 38 92% 50%;\n  --chart-4: 271 81% 56%;\n  --chart-5: 0 84% 60%;\n\n  --font-sans: Inter, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: JetBrains Mono, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 1px 2px 0px hsl(222 47% 11% / 0.05);\n  --shadow-xs: 0px 1px 3px 0px hsl(222 47% 11% / 0.08);\n  --shadow-sm: 0px 2px 4px -1px hsl(222 47% 11% / 0.06), 0px 1px 2px -1px hsl(222 47% 11% / 0.04);\n  --shadow: 0px 4px 6px -1px hsl(222 47% 11% / 0.08), 0px 2px 4px -2px hsl(222 47% 11% / 0.05);\n  --shadow-md: 0px 6px 12px -2px hsl(222 47% 11% / 0.10), 0px 3px 6px -3px hsl(222 47% 11% / 0.06);\n  --shadow-lg: 0px 10px 20px -4px hsl(222 47% 11% / 0.12), 0px 5px 10px -5px hsl(222 47% 11% / 0.08);\n  --shadow-xl: 0px 20px 30px -6px hsl(222 47% 11% / 0.15), 0px 10px 15px -7px hsl(222 47% 11% / 0.10);\n  --shadow-2xl: 0px 25px 50px -12px hsl(222 47% 11% / 0.20);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 222 47% 11%;\n\n  --foreground: 210 40% 98%;\n\n  --border: 222 20% 25%;\n\n  --card: 222 47% 15%;\n\n  --card-foreground: 210 40% 98%;\n\n  --card-border: 222 20% 28%;\n\n  --sidebar: 222 47% 13%;\n\n  --sidebar-foreground: 210 40% 98%;\n\n  --sidebar-border: 222 20% 26%;\n\n  --sidebar-primary: 217 91% 60%;\n\n  --sidebar-primary-foreground: 210 40% 98%;\n\n  --sidebar-accent: 222 47% 18%;\n\n  --sidebar-accent-foreground: 210 40% 98%;\n\n  --sidebar-ring: 217 91% 60%;\n\n  --popover: 222 47% 18%;\n\n  --popover-foreground: 210 40% 98%;\n\n  --popover-border: 222 20% 30%;\n\n  --primary: 217 91% 60%;\n\n  --primary-foreground: 210 40% 98%;\n\n  --secondary: 222 47% 22%;\n\n  --secondary-foreground: 210 40% 98%;\n\n  --muted: 222 47% 20%;\n\n  --muted-foreground: 215 20% 65%;\n\n  --accent: 222 35% 21%;\n\n  --accent-foreground: 210 40% 98%;\n\n  --destructive: 0 84% 60%;\n\n  --destructive-foreground: 210 40% 98%;\n\n  --input: 222 20% 32%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 65%;\n  --chart-2: 142 71% 55%;\n  --chart-3: 38 92% 60%;\n  --chart-4: 271 81% 66%;\n  --chart-5: 0 84% 70%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(222 47% 6% / 0.30);\n  --shadow-xs: 0px 1px 3px 0px hsl(222 47% 6% / 0.40);\n  --shadow-sm: 0px 2px 4px -1px hsl(222 47% 6% / 0.35), 0px 1px 2px -1px hsl(222 47% 6% / 0.25);\n  --shadow: 0px 4px 6px -1px hsl(222 47% 6% / 0.45), 0px 2px 4px -2px hsl(222 47% 6% / 0.30);\n  --shadow-md: 0px 6px 12px -2px hsl(222 47% 6% / 0.50), 0px 3px 6px -3px hsl(222 47% 6% / 0.35);\n  --shadow-lg: 0px 10px 20px -4px hsl(222 47% 6% / 0.55), 0px 5px 10px -5px hsl(222 47% 6% / 0.40);\n  --shadow-xl: 0px 20px 30px -6px hsl(222 47% 6% / 0.60), 0px 10px 15px -7px hsl(222 47% 6% / 0.45);\n  --shadow-2xl: 0px 25px 50px -12px hsl(222 47% 6% / 0.70);\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":11279},"replit.md":{"content":"# Voiceflow Dashboard\n\n## Overview\n\nThis is a comprehensive dashboard application for managing and monitoring Voiceflow chatbot operations. The platform provides analytics for usage tracking, credit management, knowledge base file administration, and conversation transcript viewing. Built as a full-stack TypeScript application, it uses a modern React frontend with shadcn/ui components and an Express backend with planned Voiceflow API integration.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework & Build System**\n- React 18 with TypeScript using Vite as the build tool and development server\n- Client-side routing implemented with Wouter for lightweight navigation\n- TanStack Query (React Query) for server state management, caching, and data fetching\n\n**UI Component System**\n- shadcn/ui component library built on Radix UI primitives\n- Tailwind CSS for styling with a custom design system\n- Material Design-inspired aesthetic with Linear's refined visual language\n- Dark mode as primary theme with light mode support via ThemeProvider context\n- Comprehensive component set including forms, dialogs, tables, charts, and navigation elements\n\n**State Management Strategy**\n- Server state managed through TanStack Query with optimistic updates\n- Local UI state handled with React hooks\n- Theme state persisted to localStorage\n- No global state management library (Redux/Zustand) - relying on composition and prop drilling for simplicity\n\n**Design System**\n- Custom color palette defined in CSS variables with HSL values\n- Typography using Inter for UI elements and JetBrains Mono for code/data\n- Spacing system based on Tailwind's default scale (2, 4, 6, 8, 12, 16)\n- Responsive breakpoints: mobile-first design with sm (640px), md (768px), lg (1024px), xl (1280px)\n\n### Backend Architecture\n\n**Server Framework**\n- Express.js server handling API requests and serving the built frontend\n- TypeScript for type safety across the entire stack\n- Development mode uses Vite middleware for hot module replacement\n- Production mode serves static built assets\n\n**API Design Pattern**\n- RESTful API endpoints under `/api` namespace\n- Resource-oriented routes (usage stats, knowledge base, transcripts)\n- JSON request/response format with Zod schema validation\n- Error handling middleware for consistent error responses\n\n**Data Storage Strategy**\n- In-memory storage implementation (MemStorage class) for development/demo purposes\n- Interface-based storage abstraction (IStorage) allowing easy swap to persistent database\n- Drizzle ORM configured for PostgreSQL (ready for database integration)\n- Schema definitions in shared directory for type safety between client and server\n\n**File Upload Handling**\n- Multer middleware for multipart form data processing\n- In-memory file storage during upload (no disk persistence currently)\n- Knowledge base file metadata tracking (name, size, upload date, status)\n\n### Data Schema & Validation\n\n**Zod Schema Definitions**\n- Shared schema definitions between frontend and backend ensuring type consistency\n- Runtime validation for API requests and responses\n- Type inference from Zod schemas for TypeScript types\n\n**Key Data Models**\n- UsageStats: Aggregated metrics including total usage, credits, active conversations, file counts\n- UsageData: Historical time-series data for usage analytics and charting\n- KnowledgeBaseFile: File metadata with status tracking (active/inactive)\n- Transcript: Conversation message history with timestamps and roles\n- CreditLimit: Credit usage tracking with status indicators (safe/warning/danger)\n\n### Application Structure\n\n**Monorepo Layout**\n- `/client` - React frontend application\n- `/server` - Express backend application  \n- `/shared` - Shared TypeScript types and schemas\n- Root-level configuration for build tools (Vite, TypeScript, Tailwind, Drizzle)\n\n**Page Components**\n- Dashboard: Overview with key metrics, usage charts, and credit status\n- Usage Analytics: Detailed usage metrics with Chart.js visualizations\n- Knowledge Base: File management with upload, search, and deletion\n- Transcripts: Conversation history viewer with search functionality\n\n## External Dependencies\n\n### Third-Party UI Libraries\n- **Radix UI**: Headless component primitives for accessible UI components (accordion, dialog, dropdown, popover, select, tabs, toast, tooltip, etc.)\n- **shadcn/ui**: Pre-built component implementations using Radix UI and Tailwind CSS\n- **Lucide React**: Icon library for consistent iconography\n- **Chart.js**: Charting library loaded via CDN for usage analytics visualizations\n- **cmdk**: Command palette component for keyboard-driven interfaces\n\n### Data Fetching & State\n- **TanStack Query**: Server state management with intelligent caching, background refetching, and optimistic updates\n- **React Hook Form**: Form state management with validation\n- **Hookform Resolvers**: Zod integration for form validation\n\n### Backend Services\n- **Voiceflow API**: External chatbot platform API (integration planned, using mock data currently)\n  - API key stored in environment variable `VOICEFLOW_API_KEY`\n  - Base URL: `https://api.voiceflow.com/v2`\n  - Currently using mock/placeholder data for all endpoints\n\n### Database & ORM\n- **Drizzle ORM**: TypeScript ORM for type-safe database queries\n- **PostgreSQL**: Target database system (via @neondatabase/serverless for serverless PostgreSQL)\n- **Neon Database**: Serverless PostgreSQL provider\n- Database connection configured via `DATABASE_URL` environment variable\n- Migration system configured but no migrations created yet\n\n### Development Tools\n- **Vite**: Frontend build tool and development server with HMR\n- **esbuild**: Backend bundler for production builds\n- **tsx**: TypeScript execution for development server\n- **Replit Plugins**: Development tooling for Replit environment (cartographer, dev banner, runtime error overlay)\n\n### Styling & Design\n- **Tailwind CSS**: Utility-first CSS framework with custom configuration\n- **class-variance-authority**: Utility for creating variant-based component styles\n- **tailwind-merge**: Utility for merging Tailwind classes without conflicts\n- **clsx**: Conditional className composition\n\n### Fonts (Loaded from Google Fonts CDN)\n- Inter: Primary UI font\n- DM Sans: Alternative sans-serif\n- Fira Code / Geist Mono: Monospace fonts for code display\n- Architects Daughter: Handwriting font (purpose unclear, may be unused)\n\n### Validation & Type Safety\n- **Zod**: Schema validation and type inference\n- **drizzle-zod**: Integration between Drizzle ORM and Zod for schema validation\n\n### File Handling\n- **Multer**: Middleware for handling multipart/form-data file uploads\n\n### Session Management\n- **connect-pg-simple**: PostgreSQL session store for Express (configured but not currently used)\n- **express-session**: Session middleware (dependency present but not actively used in current implementation)","size_bytes":6979},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"attached_assets/vf-limit-counter/vf-limit-counter/test_over_budget.py":{"content":"#!/usr/bin/env python3\r\n\"\"\"\r\nTest over budget scenario\r\n\"\"\"\r\n\r\nimport requests\r\nimport json\r\n\r\nAPI_BASE = \"https://vf-limit-counter.onrender.com\"\r\nPROJECT_ID = \"66aeff0ea380c590e96e8e70\"\r\n\r\ndef test_over_budget():\r\n    \"\"\"Set low budget and add credits to trigger over budget\"\"\"\r\n    \r\n    print(\"=\" * 80)\r\n    print(\"TESTING OVER BUDGET SCENARIO\")\r\n    print(\"=\" * 80)\r\n    \r\n    # Step 1: Set very low budget ($0.50)\r\n    print(\"\\n1. Setting budget to $0.50\")\r\n    print(\"-\" * 80)\r\n    response = requests.post(\r\n        f\"{API_BASE}/config\",\r\n        json={\r\n            \"project_id\": PROJECT_ID,\r\n            \"budget\": 0.50\r\n        },\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    print(f\"Status: {response.status_code}\")\r\n    print(f\"Response:\\n{json.dumps(response.json(), indent=2)}\")\r\n    \r\n    # Step 2: Add 1000 credits manually ($6.00 cost)\r\n    print(\"\\n2. Adding 1000 credits (cost: $6.00)\")\r\n    print(\"-\" * 80)\r\n    response = requests.post(\r\n        f\"{API_BASE}/credits\",\r\n        json={\r\n            \"project_id\": PROJECT_ID,\r\n            \"credits\": 1000\r\n        },\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    print(f\"Status: {response.status_code}\")\r\n    print(f\"Response:\\n{json.dumps(response.json(), indent=2)}\")\r\n    \r\n    # Step 3: Check budget (should be over budget)\r\n    print(\"\\n3. Checking budget status\")\r\n    print(\"-\" * 80)\r\n    response = requests.post(\r\n        f\"{API_BASE}/check\",\r\n        json={\"project_id\": PROJECT_ID},\r\n        headers={\"Content-Type\": \"application/json\"}\r\n    )\r\n    print(f\"Status: {response.status_code}\")\r\n    result = response.json()\r\n    print(f\"Response:\\n{json.dumps(result, indent=2)}\")\r\n    \r\n    # Summary\r\n    print(\"\\n\" + \"=\" * 80)\r\n    print(\"SUMMARY\")\r\n    print(\"=\" * 80)\r\n    print(f\"Project ID:        {result.get('project_id')}\")\r\n    print(f\"Budget:            ${result.get('budget'):.2f}\")\r\n    print(f\"Credits Used:      {result.get('credits_used'):,}\")\r\n    print(f\"Current Cost:      ${result.get('current_cost'):.2f}\")\r\n    print(f\"Remaining Budget:  ${result.get('remaining'):.2f}\")\r\n    print(f\"Days Remaining:    {result.get('days_remaining')} / 30 days\")\r\n    print(f\"Over Budget:       {result.get('over_budget')}\")\r\n    print(\"=\" * 80)\r\n    \r\n    if result.get('over_budget'):\r\n        print(\"\\nüö® SUCCESS: PROJECT IS OVER BUDGET! (Test passed)\")\r\n    else:\r\n        print(\"\\n‚ùå ERROR: Project should be over budget but isn't\")\r\n\r\nif __name__ == \"__main__\":\r\n    test_over_budget()\r\n\r\n","size_bytes":2520},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/app-sidebar.tsx":{"content":"import { BarChart3, FileText, MessagesSquare, LayoutDashboard, Moon, Sun, LogOut } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useTheme } from \"./theme-provider\";\nimport { logout, getProjectId } from \"@/lib/auth\";\n\nconst menuItems = [\n  {\n    title: \"Dashboard\",\n    url: \"/\",\n    icon: LayoutDashboard,\n  },\n  {\n    title: \"Usage Analytics\",\n    url: \"/usage\",\n    icon: BarChart3,\n  },\n  {\n    title: \"Knowledge Base\",\n    url: \"/knowledge-base\",\n    icon: FileText,\n  },\n  {\n    title: \"Transcripts\",\n    url: \"/transcripts\",\n    icon: MessagesSquare,\n  },\n];\n\nexport function AppSidebar() {\n  const [location, setLocation] = useLocation();\n  const { theme, setTheme } = useTheme();\n  const projectId = getProjectId();\n\n  const handleLogout = async () => {\n    await logout();\n    setLocation(\"/login\");\n  };\n\n  return (\n    <Sidebar>\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"px-4 py-6\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-md bg-primary flex items-center justify-center\">\n                <BarChart3 className=\"w-5 h-5 text-primary-foreground\" />\n              </div>\n              <span className=\"text-base font-semibold text-foreground\">Voiceflow</span>\n            </div>\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => {\n                const isActive = location === item.url;\n                return (\n                  <SidebarMenuItem key={item.title}>\n                    <SidebarMenuButton asChild isActive={isActive}>\n                      <Link href={item.url} data-testid={`link-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                        <item.icon className=\"w-4 h-4\" />\n                        <span>{item.title}</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                );\n              })}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n      <SidebarFooter>\n        <div className=\"p-4 space-y-2\">\n          {projectId && (\n            <>\n              <div className=\"text-xs text-muted-foreground px-2 py-1 bg-muted rounded\">\n                Project: {projectId.slice(0, 8)}...\n              </div>\n              <Separator />\n            </>\n          )}\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n            className=\"w-full\"\n            data-testid=\"button-theme-toggle\"\n          >\n            {theme === \"dark\" ? (\n              <>\n                <Sun className=\"w-4 h-4 mr-2\" />\n                Light Mode\n              </>\n            ) : (\n              <>\n                <Moon className=\"w-4 h-4 mr-2\" />\n                Dark Mode\n              </>\n            )}\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleLogout}\n            className=\"w-full\"\n            data-testid=\"button-logout\"\n          >\n            <LogOut className=\"w-4 h-4 mr-2\" />\n            Logout\n          </Button>\n        </div>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":3633},"attached_assets/vf-usage-exporter/vf-usage-api-exporter/README.md":{"content":"## Voiceflow Usage API Exporter (v2)\n\nQuery Voiceflow Analytics v2 usage, sum counts, and alert when a threshold is exceeded.\n\n### Setup\n\n1. Node 18+ is required (global `fetch`).\n2. Install deps (none required):\n   ```bash\n   npm install\n   ```\n\n3. Configure environment variables or pass CLI flags:\n   - `VF_API_KEY` (required)\n   - `VF_PROJECT_ID` (required)\n   - `USAGE_THRESHOLD` (optional)\n   - `SLACK_WEBHOOK_URL` (optional)\n   - `METRIC_NAME` (optional, default: `credit_usage`)\n   - `START_TIME` / `END_TIME` (optional ISO timestamps)\n   - `PAGE_LIMIT` (optional, default: 100)\n\nExample `.env` (not required):\n```\nVF_API_KEY=VF.DM.xxxxxx\nVF_PROJECT_ID=66aeff0ea380c590e96e8e70\nUSAGE_THRESHOLD=1000\nSLACK_WEBHOOK_URL=https://hooks.slack.com/services/.../...\nMETRIC_NAME=credit_usage\n```\n\n### Run (CLI)\n\n```bash\nnpm run check-usage -- \\\n  --key=\"VF.DM.xxxxxx\" \\\n  --project=\"66aeff0ea380c590e96e8e70\" \\\n  --metric=credit_usage \\\n  --threshold=1000 \\\n  --limit=100\n```\n\nOptional time window:\n```bash\nnpm run check-usage -- --start=\"2025-10-01T00:00:00.000Z\" --end=\"2025-10-31T23:59:59.999Z\"\n```\n\nExit codes:\n- 0: OK (below threshold or no threshold provided)\n- 1: API error\n- 2: missing config\n- 3: threshold exceeded\n\n### Voiceflow API Step (to call usage directly)\n\nUse a POST request to `https://analytics-api.voiceflow.com/v2/query/usage` with JSON body:\n\n```json\n{\n  \"data\": {\n    \"name\": \"credit_usage\",\n    \"filter\": {\n      \"projectID\": \"66aeff0ea380c590e96e8e70\",\n      \"limit\": 100\n    }\n  }\n}\n```\n\nHeaders:\n- `Authorization: VF.DM.xxxxxx`\n- `Accept: application/json`\n- `Content-Type: application/json`\n\nYou can also use `interactions`, `unique_users`, etc. for `data.name` as per v2 docs.\n\n### Scheduling\n### Run the UI\n\nStart the local UI server (serves `public/` and proxies `/api/usage` to Voiceflow v2):\n\n```bash\nVF_API_KEY=VF.DM.xxxxxx \\\nVF_PROJECT_ID=66aeff0ea380c590e96e8e70 \\\nnpm start\n```\n\nThen open `http://localhost:3000` and click Load. You can change metric, date range, and per-page limit. The UI charts the returned `count` by `period` using Chart.js.\n\n\nUse cron to run hourly and alert via Slack when credits exceed threshold.\n\nExample cron (run at minute 5 every hour):\n```\n5 * * * * cd /path/to/vf-usage-api-exporter && \\ \n  VF_API_KEY=VF.DM.xxxxxx \\ \n  VF_PROJECT_ID=66aeff0ea380c590e96e8e70 \\ \n  USAGE_THRESHOLD=1000 \\ \n  SLACK_WEBHOOK_URL=https://hooks.slack.com/services/.../... \\ \n  npm run check-usage -- --metric=credit_usage >> usage.log 2>&1\n```\n\n\n","size_bytes":2493},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"attached_assets/vf-limit-counter/vf-limit-counter/render_server.py":{"content":"#!/usr/bin/env python3\r\n\"\"\"\r\nFlask server for credit budget monitoring with Voiceflow API integration.\r\nTracks credit usage from Voiceflow API and compares against budget.\r\nPrice: 10k credits = $60\r\nAuto-resets after 30 days.\r\n\"\"\"\r\n\r\nimport os\r\nimport json\r\nimport requests\r\nfrom datetime import datetime, timedelta\r\nfrom flask import Flask, request, jsonify, send_from_directory\r\nfrom flask_cors import CORS\r\n\r\napp = Flask(__name__, static_folder='static')\r\nCORS(app)\r\n\r\n# File to persist data\r\nDATA_FILE = 'budget_data.json'\r\n\r\n# Voiceflow API\r\nVF_API_ENDPOINT = 'https://analytics-api.voiceflow.com/v2/query/usage'\r\nVF_API_KEY = os.environ.get('VF_API_KEY', 'VF.DM.68e6a156911014714892eee8.Yeb3HK3luekO31gR')\r\nVF_PROJECT_ID = '66aeff0ea380c590e96e8e70'\r\n\r\n# Pricing: 10,000 credits = $60\r\nCREDITS_PER_UNIT = 10000\r\nCOST_PER_UNIT = 60.0\r\nRESET_DAYS = 30\r\n\r\ndef load_data():\r\n    \"\"\"Load project data from file\"\"\"\r\n    if os.path.exists(DATA_FILE):\r\n        try:\r\n            with open(DATA_FILE, 'r') as f:\r\n                return json.load(f)\r\n        except:\r\n            pass\r\n    return {}\r\n\r\ndef save_data(data):\r\n    \"\"\"Save data to file\"\"\"\r\n    with open(DATA_FILE, 'w') as f:\r\n        json.dump(data, f)\r\n\r\ndef get_project_data(project_id):\r\n    \"\"\"Get or create project data\"\"\"\r\n    if project_id not in data:\r\n        data[project_id] = {\r\n            'budget': 0.0,\r\n            'credits_used': 0,\r\n            'start_date': datetime.now().isoformat(),\r\n            'vf_api_key': ''\r\n        }\r\n        save_data(data)\r\n    return data[project_id]\r\n\r\ndef calculate_cost(credits):\r\n    \"\"\"Calculate cost based on credits used\"\"\"\r\n    return (credits / CREDITS_PER_UNIT) * COST_PER_UNIT\r\n\r\ndef check_and_reset_if_needed(project_data):\r\n    \"\"\"Check if 30 days have passed and reset if needed\"\"\"\r\n    if 'start_date' not in project_data:\r\n        project_data['start_date'] = datetime.now().isoformat()\r\n        return False\r\n    \r\n    start_date = datetime.fromisoformat(project_data['start_date'])\r\n    days_elapsed = (datetime.now() - start_date).days\r\n    \r\n    if days_elapsed >= RESET_DAYS:\r\n        # Reset credits and start date\r\n        project_data['credits_used'] = 0\r\n        project_data['start_date'] = datetime.now().isoformat()\r\n        save_data(data)\r\n        return True\r\n    return False\r\n\r\ndef fetch_voiceflow_credits(project_id, vf_api_key, start_time=None, end_time=None):\r\n    \"\"\"Fetch credit usage from Voiceflow API\"\"\"\r\n    if not vf_api_key:\r\n        return None\r\n    \r\n    headers = {\r\n        'Authorization': vf_api_key,\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n    }\r\n    \r\n    body = {\r\n        'data': {\r\n            'name': 'credit_usage',\r\n            'filter': {\r\n                'projectID': project_id,\r\n                'limit': 100\r\n            }\r\n        }\r\n    }\r\n    \r\n    if start_time:\r\n        body['data']['filter']['startTime'] = start_time\r\n    if end_time:\r\n        body['data']['filter']['endTime'] = end_time\r\n    \r\n    try:\r\n        # Paginate through all results\r\n        all_items = []\r\n        cursor = None\r\n        max_pages = 100\r\n        \r\n        for page in range(max_pages):\r\n            if cursor:\r\n                body['data']['filter']['cursor'] = cursor\r\n            \r\n            response = requests.post(VF_API_ENDPOINT, json=body, headers=headers, timeout=10)\r\n            \r\n            if response.status_code != 200:\r\n                return None\r\n            \r\n            result = response.json()\r\n            items = result.get('result', {}).get('items', [])\r\n            \r\n            if not items:\r\n                break\r\n            \r\n            all_items.extend(items)\r\n            cursor = result.get('result', {}).get('cursor')\r\n            \r\n            if not cursor:\r\n                break\r\n        \r\n        # Sum all counts\r\n        total_credits = sum(item.get('count', 0) for item in all_items)\r\n        return total_credits\r\n    \r\n    except Exception as e:\r\n        print(f\"Error fetching Voiceflow credits: {e}\")\r\n        return None\r\n\r\n# Initialize data\r\ndata = load_data()\r\n\r\n@app.route('/check', methods=['POST'])\r\ndef check_budget():\r\n    \"\"\"\r\n    Check if credit usage is over budget for a specific project.\r\n    Requires 'project_id' in JSON body.\r\n    Optionally fetches live credits from Voiceflow API if vf_api_key is set.\r\n    Returns true if over budget, false otherwise.\r\n    Auto-resets after 30 days.\r\n    \"\"\"\r\n    global data\r\n    \r\n    request_data = request.get_json() if request.is_json else {}\r\n    \r\n    if 'project_id' not in request_data:\r\n        return jsonify({'error': 'project_id required'}), 400\r\n    \r\n    project_id = request_data['project_id']\r\n    project_data = get_project_data(project_id)\r\n    \r\n    # Check if 30 days passed and reset if needed\r\n    was_reset = check_and_reset_if_needed(project_data)\r\n    \r\n    # Try to fetch live credits from Voiceflow if API key is set\r\n    vf_api_key = project_data.get('vf_api_key') or VF_API_KEY\r\n    if vf_api_key:\r\n        start_date = project_data.get('start_date')\r\n        if start_date:\r\n            start_time = datetime.fromisoformat(start_date).isoformat() + 'Z'\r\n        else:\r\n            start_time = None\r\n        \r\n        live_credits = fetch_voiceflow_credits(project_id, vf_api_key, start_time=start_time)\r\n        if live_credits is not None:\r\n            project_data['credits_used'] = live_credits\r\n            save_data(data)\r\n    \r\n    # Calculate current cost\r\n    current_cost = calculate_cost(project_data['credits_used'])\r\n    budget = project_data['budget']\r\n    \r\n    # Get days remaining\r\n    start_date = datetime.fromisoformat(project_data['start_date'])\r\n    days_elapsed = (datetime.now() - start_date).days\r\n    days_remaining = RESET_DAYS - days_elapsed\r\n    \r\n    # Determine if over budget\r\n    over_budget = current_cost > budget\r\n    \r\n    # Calculate credits remaining based on budget\r\n    budget_in_credits = int((budget / COST_PER_UNIT) * CREDITS_PER_UNIT)\r\n    credits_remaining = budget_in_credits - project_data['credits_used']\r\n    \r\n    # Set status message\r\n    if over_budget:\r\n        status = \"usage_limit_reached\"\r\n    else:\r\n        status = f\"{credits_remaining}_credits_remain\"\r\n    \r\n    response = {\r\n        'status': status,\r\n        'over_budget': over_budget,\r\n        'project_id': project_id,\r\n        'budget': budget,\r\n        'credits_used': project_data['credits_used'],\r\n        'current_cost': round(current_cost, 2),\r\n        'remaining': round(budget - current_cost, 2),\r\n        'credits_remaining': credits_remaining,\r\n        'days_remaining': days_remaining,\r\n        'start_date': project_data['start_date']\r\n    }\r\n    \r\n    if was_reset:\r\n        response['reset'] = True\r\n        response['message'] = 'Period reset (30 days elapsed)'\r\n    \r\n    return jsonify(response), 200\r\n\r\n@app.route('/budget', methods=['POST'])\r\ndef set_budget():\r\n    \"\"\"Set the budget amount for a specific project\"\"\"\r\n    global data\r\n    \r\n    request_data = request.get_json()\r\n    if not request_data or 'budget' not in request_data or 'project_id' not in request_data:\r\n        return jsonify({'error': 'Budget amount and project_id required'}), 400\r\n    \r\n    project_id = request_data['project_id']\r\n    project_data = get_project_data(project_id)\r\n    project_data['budget'] = float(request_data['budget'])\r\n    \r\n    # Optionally set VF API key for this project\r\n    if 'vf_api_key' in request_data:\r\n        project_data['vf_api_key'] = request_data['vf_api_key']\r\n    \r\n    save_data(data)\r\n    \r\n    return jsonify({\r\n        'message': 'Budget set successfully',\r\n        'project_id': project_id,\r\n        'budget': project_data['budget'],\r\n        'has_vf_api_key': bool(project_data.get('vf_api_key'))\r\n    }), 200\r\n\r\n@app.route('/config', methods=['POST'])\r\ndef set_config():\r\n    \"\"\"Set configuration for a project (budget, VF API key)\"\"\"\r\n    global data\r\n    \r\n    request_data = request.get_json()\r\n    if not request_data or 'project_id' not in request_data:\r\n        return jsonify({'error': 'project_id required'}), 400\r\n    \r\n    project_id = request_data['project_id']\r\n    project_data = get_project_data(project_id)\r\n    \r\n    # Update budget if provided\r\n    if 'budget' in request_data:\r\n        project_data['budget'] = float(request_data['budget'])\r\n    \r\n    # Update VF API key if provided\r\n    if 'vf_api_key' in request_data:\r\n        project_data['vf_api_key'] = request_data['vf_api_key']\r\n    \r\n    save_data(data)\r\n    \r\n    return jsonify({\r\n        'message': 'Configuration updated',\r\n        'project_id': project_id,\r\n        'budget': project_data['budget'],\r\n        'has_vf_api_key': bool(project_data.get('vf_api_key')),\r\n        'start_date': project_data['start_date']\r\n    }), 200\r\n\r\n@app.route('/credits', methods=['POST'])\r\ndef add_credits():\r\n    \"\"\"Add credits to usage for a specific project\"\"\"\r\n    global data\r\n    \r\n    request_data = request.get_json()\r\n    if not request_data or 'credits' not in request_data or 'project_id' not in request_data:\r\n        return jsonify({'error': 'Credits amount and project_id required'}), 400\r\n    \r\n    project_id = request_data['project_id']\r\n    project_data = get_project_data(project_id)\r\n    credits_to_add = int(request_data['credits'])\r\n    project_data['credits_used'] += credits_to_add\r\n    save_data(data)\r\n    \r\n    current_cost = calculate_cost(project_data['credits_used'])\r\n    \r\n    return jsonify({\r\n        'message': 'Credits added',\r\n        'project_id': project_id,\r\n        'credits_used': project_data['credits_used'],\r\n        'current_cost': round(current_cost, 2)\r\n    }), 200\r\n\r\n@app.route('/status', methods=['GET'])\r\ndef get_status():\r\n    \"\"\"Get status for all projects\"\"\"\r\n    return jsonify({\r\n        'projects': data,\r\n        'pricing': {\r\n            'credits': CREDITS_PER_UNIT,\r\n            'cost': COST_PER_UNIT\r\n        }\r\n    }), 200\r\n\r\n@app.route('/status/<project_id>', methods=['GET'])\r\ndef get_project_status(project_id):\r\n    \"\"\"Get current budget status for a specific project\"\"\"\r\n    project_data = get_project_data(project_id)\r\n    current_cost = calculate_cost(project_data['credits_used'])\r\n    over_budget = current_cost > project_data['budget']\r\n    \r\n    return jsonify({\r\n        'project_id': project_id,\r\n        'budget': project_data['budget'],\r\n        'credits_used': project_data['credits_used'],\r\n        'current_cost': round(current_cost, 2),\r\n        'remaining': round(project_data['budget'] - current_cost, 2),\r\n        'over_budget': over_budget,\r\n        'pricing': {\r\n            'credits': CREDITS_PER_UNIT,\r\n            'cost': COST_PER_UNIT\r\n        }\r\n    }), 200\r\n\r\n@app.route('/reset', methods=['POST'])\r\ndef reset_data():\r\n    \"\"\"Reset all data\"\"\"\r\n    global data\r\n    data = {}\r\n    save_data(data)\r\n    \r\n    return jsonify({\r\n        'message': 'All data reset successfully'\r\n    }), 200\r\n\r\n@app.route('/reset/<project_id>', methods=['POST'])\r\ndef reset_project_data(project_id):\r\n    \"\"\"Reset data for a specific project\"\"\"\r\n    global data\r\n    project_data = get_project_data(project_id)\r\n    project_data['budget'] = 0.0\r\n    project_data['credits_used'] = 0\r\n    save_data(data)\r\n    \r\n    return jsonify({\r\n        'message': f'Project {project_id} data reset successfully'\r\n    }), 200\r\n\r\n@app.route('/health', methods=['GET'])\r\ndef health_check():\r\n    \"\"\"\r\n    Health check endpoint for monitoring.\r\n    \"\"\"\r\n    return jsonify({\r\n        'status': 'healthy',\r\n        'service': 'render-server',\r\n        'version': '1.0.0'\r\n    }), 200\r\n\r\n@app.route('/')\r\ndef index():\r\n    \"\"\"Serve the UI\"\"\"\r\n    return send_from_directory('static', 'index.html')\r\n\r\n@app.route('/api', methods=['GET'])\r\ndef api_info():\r\n    \"\"\"API information\"\"\"\r\n    return jsonify({\r\n        'name': 'Credit Budget Monitor',\r\n        'description': 'Track credit usage against budget per project (10k credits = $60)',\r\n        'endpoints': {\r\n            'POST /check': 'Check if over budget (requires project_id, optional: add credits)',\r\n            'POST /budget': 'Set budget amount (requires project_id)',\r\n            'POST /credits': 'Add credits to usage (requires project_id)',\r\n            'GET /status': 'Get status for all projects',\r\n            'GET /status/<project_id>': 'Get status for specific project',\r\n            'POST /reset': 'Reset all data',\r\n            'POST /reset/<project_id>': 'Reset specific project data',\r\n            'GET /health': 'Health check'\r\n        }\r\n    }), 200\r\n\r\n# For Render deployment, we need to handle the PORT environment variable\r\nif __name__ == '__main__':\r\n    import os\r\n\r\n    print(\"üöÄ Starting Credit Budget Monitor Server...\")\r\n    print(\"üìã Available endpoints:\")\r\n    print(\"   POST /check - Check if over budget (requires project_id)\")\r\n    print(\"   POST /budget - Set budget amount (requires project_id)\")\r\n    print(\"   POST /credits - Add credits to usage (requires project_id)\")\r\n    print(\"   GET /status - Get status for all projects\")\r\n    print(\"   GET /status/<project_id> - Get status for specific project\")\r\n    print(\"   POST /reset - Reset all data\")\r\n    print(\"   POST /reset/<project_id> - Reset specific project\")\r\n    print(\"   GET / - Web UI\")\r\n    print(\"   GET /health - Health check\")\r\n\r\n    # Get port from environment variable (Render sets this)\r\n    port = int(os.environ.get('PORT', 5000))\r\n\r\n    print(\"\\nConfiguration:\")\r\n    print(f\"   Host: 0.0.0.0\")\r\n    print(f\"   Port: {port}\")\r\n    print(f\"   Debug: {os.environ.get('FLASK_ENV') == 'development'}\")\r\n\r\n    app.run(\r\n        host='0.0.0.0',\r\n        port=port,\r\n        debug=os.environ.get('FLASK_ENV') == 'development'\r\n    )\r\n","size_bytes":13718},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/pages/knowledge-base.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { KnowledgeBaseFile } from \"@shared/schema\";\nimport { Upload, Search, Trash2, FileText, CloudUpload } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\nexport default function KnowledgeBase() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [deleteId, setDeleteId] = useState<string | null>(null);\n  const { toast } = useToast();\n\n  const { data: files, isLoading } = useQuery<KnowledgeBaseFile[]>({\n    queryKey: [\"/api/knowledge-base\"],\n  });\n\n  const uploadMutation = useMutation({\n    mutationFn: async (file: File) => {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      return apiRequest(\"POST\", \"/api/knowledge-base/upload\", formData);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/knowledge-base\"] });\n      toast({\n        title: \"File uploaded\",\n        description: \"The file has been added to your knowledge base.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Upload failed\",\n        description: \"There was an error uploading the file.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return apiRequest(\"DELETE\", `/api/knowledge-base/${id}`, undefined);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/knowledge-base\"] });\n      toast({\n        title: \"File deleted\",\n        description: \"The file has been removed from your knowledge base.\",\n      });\n      setDeleteId(null);\n    },\n    onError: () => {\n      toast({\n        title: \"Delete failed\",\n        description: \"There was an error deleting the file.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      uploadMutation.mutate(file);\n    }\n  };\n\n  const filteredFiles = files?.filter((file) =>\n    file.name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  if (isLoading) {\n    return (\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"max-w-7xl mx-auto px-6 py-8 md:px-8 md:py-12 space-y-8\">\n          <Skeleton className=\"h-8 w-48 mb-2\" />\n          <Skeleton className=\"h-96\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 overflow-auto\">\n      <div className=\"max-w-7xl mx-auto px-6 py-8 md:px-8 md:py-12 space-y-8\">\n        <div className=\"flex flex-wrap items-center justify-between gap-4\">\n          <div>\n            <h1 className=\"text-2xl font-semibold text-foreground mb-2\" data-testid=\"text-kb-title\">\n              Knowledge Base\n            </h1>\n            <p className=\"text-sm text-muted-foreground\">\n              Manage files and documents for your chatbot\n            </p>\n          </div>\n          <div>\n            <input\n              type=\"file\"\n              id=\"file-upload\"\n              className=\"hidden\"\n              onChange={handleFileUpload}\n              disabled={uploadMutation.isPending}\n            />\n            <Button\n              onClick={() => document.getElementById(\"file-upload\")?.click()}\n              disabled={uploadMutation.isPending}\n              data-testid=\"button-upload-file\"\n            >\n              <Upload className=\"w-4 h-4 mr-2\" />\n              {uploadMutation.isPending ? \"Uploading...\" : \"Upload File\"}\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search files...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-10\"\n            data-testid=\"input-search-files\"\n          />\n        </div>\n\n        {filteredFiles && filteredFiles.length === 0 ? (\n          <Card data-testid=\"card-empty-state\">\n            <CardContent className=\"flex flex-col items-center justify-center py-16\">\n              <CloudUpload className=\"w-16 h-16 text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold text-foreground mb-2\">\n                No files yet\n              </h3>\n              <p className=\"text-sm text-muted-foreground mb-6 text-center max-w-sm\">\n                Upload your first file to start building your chatbot's knowledge base\n              </p>\n              <Button\n                onClick={() => document.getElementById(\"file-upload\")?.click()}\n                data-testid=\"button-upload-first\"\n              >\n                <Upload className=\"w-4 h-4 mr-2\" />\n                Upload File\n              </Button>\n            </CardContent>\n          </Card>\n        ) : (\n          <Card data-testid=\"card-files-table\">\n            <CardHeader>\n              <CardTitle className=\"text-base font-semibold\">\n                Files ({filteredFiles?.length || 0})\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-2\">\n                {filteredFiles?.map((file) => (\n                  <div\n                    key={file.id}\n                    className=\"flex flex-wrap items-center justify-between gap-4 p-4 rounded-md border border-border hover-elevate\"\n                    data-testid={`file-item-${file.id}`}\n                  >\n                    <div className=\"flex items-center gap-3 min-w-0 flex-1\">\n                      <FileText className=\"w-5 h-5 text-muted-foreground shrink-0\" />\n                      <div className=\"min-w-0 flex-1\">\n                        <p className=\"text-sm font-medium text-foreground truncate\">\n                          {file.name}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {(file.size / 1024).toFixed(2)} KB ‚Ä¢ Uploaded{\" \"}\n                          {new Date(file.uploadedAt).toLocaleDateString()}\n                        </p>\n                      </div>\n                    </div>\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => setDeleteId(file.id)}\n                      data-testid={`button-delete-${file.id}`}\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n\n      <AlertDialog open={!!deleteId} onOpenChange={() => setDeleteId(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete File</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete this file? This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-delete\">Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={() => deleteId && deleteMutation.mutate(deleteId)}\n              data-testid=\"button-confirm-delete\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":7990},"attached_assets/vf-transcripts-exporter/vf-transcripts-exporter/db_storage.py":{"content":"\"\"\"\nPostgreSQL storage utilities for saving generated CSV files securely.\n\nEnforces TLS by ensuring sslmode=require on the connection string.\n\"\"\"\n\nfrom __future__ import annotations\n\nimport os\nfrom typing import Any, Dict, Optional\n\nfrom sqlalchemy import create_engine, text\n\n\ndef _ensure_ssl_in_url(db_url: str) -> str:\n    # Append sslmode=require if not present\n    lower = db_url.lower()\n    if \"sslmode=\" in lower:\n        return db_url\n    separator = \"&\" if \"?\" in db_url else \"?\"\n    return f\"{db_url}{separator}sslmode=require\"\n\n\ndef get_database_url(explicit_url: Optional[str] = None) -> Optional[str]:\n    url = explicit_url or os.getenv(\"DATABASE_URL\")\n    if not url:\n        return None\n    return _ensure_ssl_in_url(url)\n\n\ndef ensure_tables(db_url: str) -> None:\n    engine = create_engine(db_url, pool_pre_ping=True)\n    ddl = text(\n        \"\"\"\n        CREATE TABLE IF NOT EXISTS csv_exports (\n            id SERIAL PRIMARY KEY,\n            created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n            project_id TEXT,\n            environment_id TEXT,\n            filename TEXT NOT NULL,\n            content BYTEA NOT NULL,\n            content_type TEXT NOT NULL,\n            row_count INTEGER,\n            metadata JSONB\n        );\n        \"\"\"\n    )\n    with engine.begin() as conn:\n        conn.execute(ddl)\n\n\ndef store_csv(\n    db_url: str,\n    *,\n    project_id: Optional[str],\n    environment_id: Optional[str],\n    filename: str,\n    content: bytes,\n    content_type: str = \"text/csv\",\n    row_count: Optional[int] = None,\n    extra_metadata: Optional[Dict[str, Any]] = None,\n) -> None:\n    engine = create_engine(db_url, pool_pre_ping=True)\n    ensure_tables(db_url)\n    insert_sql = text(\n        \"\"\"\n        INSERT INTO csv_exports (project_id, environment_id, filename, content, content_type, row_count, metadata)\n        VALUES (:project_id, :environment_id, :filename, :content, :content_type, :row_count, :metadata)\n        \"\"\"\n    )\n    with engine.begin() as conn:\n        conn.execute(\n            insert_sql,\n            {\n                \"project_id\": project_id,\n                \"environment_id\": environment_id,\n                \"filename\": filename,\n                \"content\": content,\n                \"content_type\": content_type,\n                \"row_count\": row_count,\n                \"metadata\": extra_metadata or {},\n            },\n        )\n\n\n","size_bytes":2385},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"attached_assets/vf-kb-exporter/vf-knowledge-base-exporter/examples/README.md":{"content":"# Example Files\n\nThis directory contains example files for using the Voiceflow Knowledge Base Manager.\n\n## Table Upload Examples\n\n### `table_data.example.json`\nExample data for uploading a product catalog table. This file contains sample product information including IDs, names, prices, descriptions, and metadata.\n\n### `table_schema.example.json`\nSchema definition for the product catalog table. Defines field types and searchability settings.\n\n### Usage\n\nTo upload the example table:\n\n```bash\npython ../kb_cli.py upload-table \"Product Catalog\" \\\n  --data-file examples/table_data.example.json \\\n  --schema-file examples/table_schema.example.json \\\n  --metadata '{\"type\": \"catalog\", \"version\": \"1.0\"}'\n```\n\nOr in Python:\n\n```python\nimport json\nfrom voiceflow_kb import VoiceflowKB\n\nkb = VoiceflowKB(\"YOUR_API_KEY\", \"YOUR_PROJECT_ID\")\n\n# Load the example files\nwith open('examples/table_data.example.json') as f:\n    data = json.load(f)\n\nwith open('examples/table_schema.example.json') as f:\n    schema = json.load(f)\n\n# Upload the table\nresult = kb.upload_table(\n    name=\"Product Catalog\",\n    data=data,\n    schema=schema,\n    metadata={\"type\": \"catalog\", \"version\": \"1.0\"}\n)\n\nprint(f\"Table uploaded! Document ID: {result['data']['documentID']}\")\n```\n\n## Schema Field Types\n\nThe schema supports the following field types:\n\n- `string` - Text data\n- `number` - Numeric data (integers or floats)\n- `boolean` - True/False values\n- `array` - Lists of values\n- `object` - Nested JSON objects\n\n## Searchable Fields\n\nSet `\"searchable\": true` for fields that should be:\n- Included in semantic search\n- Used for query matching\n- Returned in search results\n\nSet `\"searchable\": false` for metadata fields that should:\n- Be stored but not searched\n- Remain in the document for reference\n- Not affect search relevance\n\n## Creating Your Own Tables\n\n1. Create a JSON file with your data (array of objects)\n2. Create a schema file defining the structure\n3. Ensure all data rows match the schema\n4. Upload using the CLI or Python library\n\nExample for a FAQ table:\n\n**faq_data.json:**\n```json\n[\n  {\n    \"question\": \"What are your business hours?\",\n    \"answer\": \"We're open Monday-Friday, 9am-5pm EST\",\n    \"category\": \"general\"\n  },\n  {\n    \"question\": \"How do I reset my password?\",\n    \"answer\": \"Click 'Forgot Password' on the login page\",\n    \"category\": \"account\"\n  }\n]\n```\n\n**faq_schema.json:**\n```json\n{\n  \"question\": {\"type\": \"string\", \"searchable\": true},\n  \"answer\": {\"type\": \"string\", \"searchable\": true},\n  \"category\": {\"type\": \"string\", \"searchable\": false}\n}\n```\n\n","size_bytes":2564}},"version":2}